{"version":3,"file":"geoplatform-common.js","sources":["ng://@geoplatform/common/logger.ts","ng://@geoplatform/common/auth/authenticated.component.ts","ng://@geoplatform/common/auth/auth.factory.ts","ng://@geoplatform/common/auth/auth.service.ts","ng://@geoplatform/common/auth/login.ts","ng://@geoplatform/common/dialogs/list-select/list-select.ts","ng://@geoplatform/common/dialogs/message/message.ts","ng://@geoplatform/common/directives/icon.ts","ng://@geoplatform/common/components/header/header.component.ts","ng://@geoplatform/common/item-helper.ts","ng://@geoplatform/common/components/link/link.component.ts","ng://@geoplatform/common/components/selected/selected.component.ts","ng://@geoplatform/common/components/thumbnail/thumbnail.component.ts","ng://@geoplatform/common/error.ts","ng://@geoplatform/common/error.service.ts","ng://@geoplatform/common/event.ts","ng://@geoplatform/common/item-factory.ts","ng://@geoplatform/common/map-types.ts","ng://@geoplatform/common/pipes.ts","ng://@geoplatform/common/resolvers.ts","ng://@geoplatform/common/search/search.service.ts","ng://@geoplatform/common/tracking.factory.ts","ng://@geoplatform/common/module.ts","ng://@geoplatform/common/public_api.ts","ng://@geoplatform/common/geoplatform-common.ts"],"sourcesContent":["\nimport { Config } from '@geoplatform/client';\n\nconst LEVELS = [\n    \"error\",\n    \"warn\",\n    \"info\",\n    \"debug\"\n];\n\nclass Logger {\n\n    private level : string = 'error';\n\n    constructor() {\n        this.setLevel(Config.logLevel || Config.LOG_LEVEL);\n    }\n\n    setLevel(level : string) {\n        if( level && LEVELS.indexOf(level) >= 0 ) {\n            this.level = level;\n        }\n        this.info(\"Log Level : \" + this.level);\n    }\n\n    isVisible(level : string) : boolean {\n        return LEVELS.indexOf(this.level) >= LEVELS.indexOf(level);\n    }\n\n    log(arg, ...addl) {\n        let msg = this.toStr(arg);\n        msg += addl.map( a => this.toStr(a) ).join('');\n        console.log(msg);\n    }\n\n    debug(arg, ...addl) {\n        if(!this.isVisible('debug')) return;\n        let msg = \"[DEBUG] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    info(arg, ...addl) {\n        if(!this.isVisible('info')) return;\n        let msg = \"[INFO] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    warn(arg, ...addl) {\n        if(!this.isVisible('warn')) return;\n        let msg = \"[WARN] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    error(arg, ...addl) {\n        let msg = \"[ERROR] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    toStr(arg) {\n        if(null === arg || typeof(arg) === 'undefined') return '';\n        if(typeof(arg) ===  'string') return arg;\n        return JSON.stringify(arg);\n    }\n}\n\nconst logger = new Logger();\n\nexport {\n    logger as default,\n    logger\n};\n","import { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { AuthService, GeoPlatformUser } from '@geoplatform/oauth-ng/angular';\n\nimport { AppAuthService } from './auth.service';\nimport { logger } from '../logger';\n\nconst EDIT_ROLE = 'gp_editor';\n\n\n/**\n * Base class that can be used to hook authentication notifications into\n * Angular @Component instances.\n */\nexport abstract class AuthenticatedComponent {\n\n    public user : GeoPlatformUser;\n    private gpAuthSubscription : Subscription;\n\n    constructor(protected authService : AppAuthService) {\n    }\n\n    //facade methods to mimic @Component lifecycle methods in case sub-classes\n    // want to use consistent names\n    ngOnInit() { this.init(); }\n    ngOnDestroy() { this.destroy(); }\n\n    /**\n     * Sub-classes must invoke this method in order to register listeners\n     * for authentication events\n     */\n    init() {\n\n        let obs : Observer<GeoPlatformUser> = {\n            next : (value: GeoPlatformUser) => {\n                logger.debug(\"AuthenticatedComponent : User changed to \" + (value ? value.username : 'null'));\n                this.user = value;\n                this.onUserChange(this.user);\n            },\n            error : (err: any) => {\n                logger.error(\"Unable to get authenticated user info: \" +\n                    (err as Error).message);\n            },\n            complete : () => { }\n        };\n\n        this.gpAuthSubscription = this.authService.subscribe( obs );\n\n        //for components that initialize AFTER a user has changed auth state,\n        // we need to fetch the current user details\n        this.user = this.authService.getUser();\n        this.onUserChange(this.user);\n    }\n\n    /**\n     * Sub-classes must invoke this method in order to de-register listeners\n     * for authentication events and clean up internals\n     */\n    destroy() {\n        if(this.gpAuthSubscription) {\n            this.gpAuthSubscription.unsubscribe();\n            this.gpAuthSubscription = null;\n        }\n        this.user = null;\n        this.authService = null;\n    }\n\n    /** @return {boolean} */\n    public isAuthenticated() : boolean { return !!this.user; }\n\n    /** @return {GeoPlatformUser} */\n    public getUser() : GeoPlatformUser { return this.user; }\n\n    /** @return {string} JWT token associated with the current user or null */\n    public getAuthToken() : string { return this.authService.getToken(); }\n\n    /** @return Promise containing current user or null */\n    public checkAuth() : Promise<GeoPlatformUser> { return this.authService.check(); }\n\n    /**\n     * @param item - optional object the user may be able to edit\n     * @return boolean indicating whether user can edit the requested item or is an editor if no item was specified\n     */\n    public canUserEdit(item ?: any) : boolean {\n        if(!this.user) return false;\n        if(this.user.isAuthorized(EDIT_ROLE)) return true;\n        return this.isAuthorOf(item);\n    }\n\n    /**\n     * @param item - object the user may be the owner of\n     * @return boolean indicating if the user is the associated creator/owner of the item\n     */\n    public isAuthorOf(item ?: any) : boolean {\n        if(!this.user || !item) return false;\n        return item.createdBy && item.createdBy === this.user.username;\n    }\n\n    /**\n     * @param {GeoPlatformUser} user - authenticated user object or null if not authed\n     */\n    protected onUserChange(user : GeoPlatformUser) { /* implement in sub-classes */ }\n\n\n}\n","import { ngGpoauthFactory, AuthService } from '@geoplatform/oauth-ng/angular';\n\nimport { logger } from \"../logger\";\n\n\n//should be exported by gp-ngoauth but isn't so we are declaring it here...\ninterface AuthConfig {\n    AUTH_TYPE?: 'grant' | 'token'\n    IDP_BASE_URL?: string\n    APP_BASE_URL?: string\n    ALLOW_SSO_LOGIN?: boolean\n    APP_ID?: boolean\n    ALLOW_IFRAME_LOGIN?: boolean\n    FORCE_LOGIN?: boolean\n    CALLBACK?: string\n    LOGIN_URL?: string\n    LOGOUT_URL?: string\n    ALLOW_DEV_EDITS?: boolean\n};\nconst AUTH_KEYS = [\n    'AUTH_TYPE', 'IDP_BASE_URL', 'APP_BASE_URL', 'ALLOW_SSO_LOGIN',\n    'APP_ID', 'ALLOW_IFRAME_LOGIN', 'FORCE_LOGIN', 'CALLBACK',\n    'LOGIN_URL', 'LOGOUT_URL', 'ALLOW_DEV_EDITS'\n];\n\n\n\n\nvar authService : AuthService = null;\n\n\nexport function authServiceFactory( environment : any ) {\n\n    //once service has been built, keep using it\n    if(authService) return authService;\n\n    //\n    //but the first time it's requested, it has to be built using env settings\n    let authSettings : AuthConfig = {};\n\n    let gpGlobal = (<any>window).GeoPlatform;\n    if(gpGlobal && gpGlobal.config && gpGlobal.config.auth) {\n        //auth library settings made available through WP via 'GeoPlatform' global\n        //https://geoplatform.atlassian.net/browse/DT-2307\n        authSettings = gpGlobal.config.auth;\n    } else {\n        authSettings.APP_BASE_URL = environment.wpUrl || '';\n        AUTH_KEYS.forEach( key => {\n            let v = environment[key];\n            if(typeof(v) !== 'undefined') {\n                if(~key.indexOf('ALLOW') || ~key.indexOf('FORCE')) {\n                    v = (v === true || v === 'true');\n                }\n                authSettings[key] = v;\n            }\n        });\n    }\n\n    logger.info(\"Configuring OAuth using: \");\n    logger.info(authSettings);\n\n    authService = ngGpoauthFactory(authSettings);\n    return authService;\n};\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { Config } from '@geoplatform/client';\nimport { RPMService } from '@geoplatform/rpm/src/iRPMService'\n\nimport {\n    ngGpoauthFactory, AuthService, GeoPlatformUser\n} from '@geoplatform/oauth-ng/angular';\n\nimport { authServiceFactory } from './auth.factory';\nimport { logger } from \"../logger\";\n\n\n\n@Injectable({providedIn: 'root'})\nexport class AppAuthService {\n\n    private user : GeoPlatformUser;\n    private user$ : Subject<GeoPlatformUser>;\n    private observers : { [key:string]: Observer<GeoPlatformUser> } =\n        {} as { [key:string]: Observer<GeoPlatformUser> };\n    private gpAuthSubscription : Subscription;\n    private authService : AuthService;\n    private rpm: RPMService;\n\n\n\n    constructor( @Inject(RPMService) rpm : RPMService ) {\n        this.authService = authServiceFactory(Config);\n        this.rpm = rpm;\n        this.init();\n    }\n\n\n    init() {\n\n        this.user$ = new Subject<GeoPlatformUser>();\n\n        if(!this.authService) return;\n\n        const sub = this.authService.getMessenger().raw();\n        this.gpAuthSubscription = sub.subscribe(msg => {\n            logger.debug(\"Received Auth Message: \" + msg.name);\n            switch(msg.name){\n                case 'userAuthenticated': this.onUserChange(msg.user); break;\n                case 'userSignOut': this.onUserChange(null); break;\n            }\n        });\n\n        this.authService.getUser().then( user => { this.onUserChange(user); });\n\n    }\n\n    onUserChange(user : GeoPlatformUser) {\n        logger.debug(\"AuthService.onUserChange() : User is \" + (user ? user.username : 'N/A'));\n        this.user = user;\n        // this.rpm.setUserId( user ? user.id : null);\n        this.user$.next(user);\n    }\n\n    /**\n     *\n     */\n    getMessenger() : Subject<any>{\n        return this.authService ? this.authService.getMessenger().raw() : null;\n    }\n\n\n    isAuthenticated() : boolean {\n        return !!this.user;\n    }\n\n    getUser() : GeoPlatformUser {\n        return this.user;\n    }\n\n    getToken() : string {\n        return this.authService ? this.authService.getJWT() : null;\n    }\n\n    /**\n     * Check the underlying authentication mechanism endpoint to validate the\n     * current JWT token (if one exists) is not expired or revoked.\n     * @return GeoPlatformUser or null\n     */\n    check() : Promise<GeoPlatformUser> {\n        if(!this.authService) return Promise.resolve(null);\n        return this.authService.checkWithClient()\n        .then( token => this.authService.getUser() )\n        .then( user => {\n            setTimeout( () => { this.onUserChange(user); },100 );\n            return user;\n        });\n    }\n\n    login() {\n        this.authService.login();\n    }\n\n    logout() {\n        this.authService.logout();\n    }\n\n    /**\n     *\n     */\n    subscribe( callback : Observer<GeoPlatformUser> ) : Subscription {\n        return this.user$.subscribe( callback );\n    }\n\n\n    dispose() {\n        if(this.gpAuthSubscription) {\n            this.gpAuthSubscription.unsubscribe();\n            this.gpAuthSubscription = null;\n        }\n        this.user = null;\n        this.user$ = null;\n        this.observers = null;\n        this.authService = null;\n    }\n}\n","\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Config } from '@geoplatform/client';\nimport { AuthService, GeoPlatformUser } from '@geoplatform/oauth-ng/angular';\n\nimport { AuthenticatedComponent } from './authenticated.component';\nimport { AppAuthService } from './auth.service';\nimport { logger } from '../logger';\n\n\n@Component({\n    selector: 'gp-login-button',\n    styles: [\n        `\n        .btn-login.btn-link {\n            padding: .375em .75em;\n            border-right: none;\n            margin: 0 0.5em;\n            font-weight: 700;\n        }\n        .btn-login.btn-link:hover {\n            background-color: #fff;\n            text-decoration: none;\n            color: #333;\n        }\n        .o-account-details {\n            display: flex;\n            justify-content: space-between;\n            align-items: stretch;\n            margin-top: -0.5em;\n            padding: 1em;\n            background: #185b8a;\n            color: #fff;\n        }\n        .o-account-details__avatar {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 6em;\n            margin-right: 0.25em;\n            padding-top: 10px;\n            width: 100px;\n            height: 100px;\n            overflow: hidden;\n            background: #fff;\n            color: #777;\n            border-radius: 100%;\n        }\n        .dropdown-menu .btn.btn-link {\n            display: inline-block;\n            padding: 0.375rem 0.75rem;\n            border-right: none;\n        }\n        .dropdown-menu .btn.btn-link:after {\n            content: '';\n        }\n        .btn.btn-logout {\n            padding: 0.375rem 0.75rem;\n            margin-bottom: -0.5em;\n        }\n        `\n    ],\n    template:\n    `\n    <div class=\"btn-account btn-group\">\n        <!-- not logged in yet -->\n        <a class=\"btn-login btn btn-link\" (click)=\"login()\" *ngIf=\"!user\">Sign In</a>\n\n        <!-- logged in -->\n        <button type=\"button\" class=\"btn-login btn btn-link dropdown-toggle\" data-toggle=\"dropdown\"\n            aria-expanded=\"false\" *ngIf=\"user\">\n            <span class=\"fas fa-user\"></span>\n            <span class=\"d-xs-none\">{{user?.name}}</span>\n            <span class=\"caret\"></span>\n        </button>\n        <div class=\"dropdown-menu dropdown-menu-right\" role=\"menu\" *ngIf=\"user\">\n            <div class=\"o-account-details\">\n                <div class=\"o-account-details__avatar\">\n                    <span class=\"fas fa-user\"></span>\n                </div>\n                <div class=\"flex-1\">\n                    <div class=\"a-heading\">\n                        {{user?.name}}\n                        <small><em>({{user?.username}})</em></small>\n                    </div>\n                    <div class=\"u-text--sm\">{{user?.email}}</div>\n                    <div class=\"u-text--sm\">{{user?.org}}</div>\n                </div>\n            </div>\n            <div class=\"d-flex flex-justify-around u-mg-top--sm\">\n                <a class=\"btn btn-sm btn-link\" target=\"_blank\" href=\"{{idpBaseUrl}}/profile\">\n                    <span class=\"fas fa-pencil-alt\"></span> Edit Profile\n                </a>\n                <a class=\"btn btn-sm btn-link\" target=\"_blank\" href=\"{{idpBaseUrl}}/updatepw\">\n                    <span class=\"fas fa-key\"></span> Change Password\n                </a>\n            </div>\n            <div class=\"u-mg-top--sm\">\n                <a class=\"btn-logout btn btn-light btn-block\" (click)=\"logout()\">\n                    <span class=\"fas fa-power-off\"></span> Sign Out\n                </a>\n            </div>\n        </div>\n    </div>\n    `\n\n})\nexport class LoginButtonComponent extends AuthenticatedComponent implements OnInit {\n\n    public idpBaseUrl : string = Config.IDP_BASE_URL || 'https://accounts.geoplatform.gov';\n    public user : GeoPlatformUser =  null;\n\n    constructor( authService : AppAuthService ) {\n        super(authService);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n\n        // this.authService.check();\n    }\n\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n\n    onUserChange(user : GeoPlatformUser) {\n        super.onUserChange(user);\n        logger.debug(\"LoginButton.onUserChange() : User is \" + (user ? user.username : 'null'));\n        this.user = user;\n    }\n\n    login() {\n        this.authService.login();\n    }\n\n    logout() {\n        this.authService.logout();\n    }\n\n}\n\n\n\n\n\n\n\n\n\n@Component({\n    selector: 'gp-login-modal',\n    styles: [\n    `\n        .gpLoginCover {\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            background: rgba(0,0,0,0.6);\n            z-index: 5000;\n            width: 100vw;\n            height: 100vh;\n        }\n\n        .gpLoginCancelIframe {\n          z-index: 5001;\n          position: absolute;\n          right: 0px;\n        }\n\n        .gpLoginWindow {\n          top: 100px;\n          height: 60%;\n          width: 75%;\n          margin: 0 auto;\n          position: relative;\n          z-index: 5001;\n        \tborder: 5px solid #cccccc;\n          border-radius: 10px;\n        }\n\n        .gpLoginWindow iframe {\n          width: 100%;\n          height: 100%\n        }\n\n        .gpLoginWindow .btn-cancel {\n          color: white;\n          background-color: red;\n        }\n\n        .gpLoginWindow .btn {\n          display: inline-block;\n          padding: 6px 12px;\n          margin-bottom: 0;\n          font-size: 14px;\n          font-weight: 400;\n          line-height: 1.42857143;\n          text-align: center;\n          white-space: nowrap;\n          vertical-align: middle;\n          -ms-touch-action: manipulation;\n          touch-action: manipulation;\n          cursor: pointer;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          background-image: none;\n          border: 1px solid transparent;\n          border-radius: 4px;\n        }\n    `\n    ],\n    templateUrl: './login.html',\n\n})\nexport class LoginModalComponent implements OnInit, OnDestroy {\n\n    public showLoginModal : boolean = false;\n    public forceLogin : boolean = Config.FORCE_LOGIN;\n\n    constructor(private authService : AppAuthService) {\n\n    }\n\n    ngOnInit() {\n        if(!this.authService) return;\n\n        this.authService.getMessenger().subscribe(msg => {\n            logger.debug(\"LoginModal received auth message: \" + msg.name);\n            switch(msg.name){\n                case 'auth:requireLogin':\n                    this.showLoginModal = true;   //show the modal\n                    break;\n\n                case 'userAuthenticated':\n                case 'iframe:userAuthenticated':\n                    this.showLoginModal = false;  //hide the modal\n                    this.authService.onUserChange(msg.user);\n                    break;\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this.showLoginModal = false;\n    }\n\n    cancel() {\n        //hide the modal\n        this.showLoginModal = false;\n    }\n\n}\n","import { Inject, Component } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { Item, ItemService, Query, SearchResults } from \"@geoplatform/client\";\n\n\n\n\nexport interface ListSelectDialogData {\n    selected    : Item[];       //array of pre-selected values\n    service     : ItemService;  //service to query for new values\n    query       : Query;        //query defining how to search for new values\n    subHeading ?: string;       //optional data to display under title\n}\n\n\n\n\n@Component({\n  selector: 'gp-list-select-dialog',\n  templateUrl: 'list-select.html',\n  styleUrls: ['./list-select.less']\n})\nexport class ListSelectDialog {\n\n    public  suggested : any[];\n    public  termQuery : string;\n    public  isLoading : boolean;\n\n    //pagination\n    public  currentPage    : number = 0;\n    public  totalSuggested : number = 0;\n\n    private query     : Query;\n    private subject   : Subject<string> = new Subject<string>();\n\n\n    constructor (\n        public dialogRef: MatDialogRef<ListSelectDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: ListSelectDialogData\n    ) {\n        this.query = data.query.clone().page(this.currentPage);\n\n        this.subject.pipe(\n            debounceTime(300),\n            distinctUntilChanged()\n        )\n        .subscribe( term => {\n            this.filterValues(term);\n        });\n    }\n\n    onNoClick () : void {\n        this.dialogRef.close();\n    }\n\n    onTermChange( term : string, immediate ?: boolean) {\n        if(true === immediate) {        //if needing to update without debounce\n            this.filterValues(term);\n        } else {                        //otherwise, debounce change\n            this.subject.next(term);\n        }\n    }\n\n    /**\n     * @param {string} value - user input to filter options with\n     * @return {Promise} resolving array of string options\n     */\n    filterValues ( value: string ) : void {\n\n        this.termQuery = value;\n\n        if(!value) {    //require user to provide input before searching\n            this.suggested = [];\n            this.totalSuggested = 0;\n            return;\n        }\n\n        this.query.q(value);\n\n        this.isLoading = true;\n\n        this.data.service.search(this.query)\n        .then( ( response : SearchResults ) => {\n            let hits = response.results;\n            this.suggested = hits;\n            this.totalSuggested = response.totalResults;\n        })\n        .catch(e => {\n            //display error message indicating an issue searching...\n        }).finally( () => {\n            this.isLoading = false;\n        });\n    }\n\n    addValue ( arg : Item) : void {\n        if(this.isSelected(arg)) {  //if already selected, remove it\n            this.removeValue(arg);  //...\n            return;                 //...\n        }\n        this.data.selected.push( arg );\n    }\n\n    removeValue ( value: Item ) : void {\n        let index = -1;\n        this.data.selected.forEach( (p,i) => { if(p.id === value.id) { index = i; } });\n        if (index >= 0) {\n            this.data.selected.splice(index, 1);\n        }\n    }\n\n    isSelected ( arg : Item ) : boolean {\n        return this.data.selected.length > 0 &&\n            !!this.data.selected.find( (s) => s.id === arg.id);\n    }\n\n\n    /**\n     * @param pageNo - new page number being requested\n     */\n    onPageChange( pageNo : number ) {\n        if(this.currentPage !== pageNo-1 ) {\n            this.query.page( pageNo-1 );\n            this.filterValues( this.termQuery );\n        }\n    }\n\n    getSubHeading(item : Item) : string {\n        let property = this.data.subHeading;\n        let value = item[property];\n        return this.getLabelFrom(value);\n    }\n\n    getLabelFrom( value : any ) : string {\n        if(value === null || typeof(value) === 'undefined') return '';\n        if(Array.isArray(value)) {\n            return (value as []).map( v => this.getLabelFrom(v) ).join(', ');\n        }\n        if(typeof(value) === 'object' && (value.label || value.title || value.prefLabel)) {\n            return value.label || value.title || value.prefLabel;\n        }\n        return '';\n    }\n}\n","import { Inject, Component, HostBinding } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n\n\n\nexport interface MessageDialogData {\n    type     : 'error' | 'warn' | 'info';\n    label   ?: string;\n    message  : string;\n}\n\n\n\n\n@Component({\n  selector: 'gp-message-dialog',\n  templateUrl: 'message.html',\n  styleUrls: ['./message.less'],\n\n})\nexport class MessageDialog {\n\n    @HostBinding('class') className;\n\n    constructor (\n        public dialogRef: MatDialogRef<MessageDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: MessageDialogData\n    ) {\n\n        switch(data.type) {\n            case 'error' : this.className = 'danger'; break;\n            case 'warn' : this.className = 'warning'; break;\n            case 'info' : this.className = 'info'; break;\n        }\n\n    }\n\n    close () : void {\n        this.dialogRef.close();\n    }\n\n    getIconClass() : string {\n        switch(this.data.type) {\n            case 'error' : return \"fas fa-exclamation-circle\";\n            case 'warn'  : return \"fas fa-exclamation-triangle\";\n            case 'info'  : return 'fas fa-info-circle'\n        }\n        return '';\n    }\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n\n@Directive({\n  selector: '[gpIcon]'\n})\nexport class GeoPlatformIconDirective {\n\n    @Input() item : Item;\n    @Input() themed : boolean = true;\n\n    constructor(private el: ElementRef) {\n\n    }\n\n    ngOnInit() {\n        if(!this.item) return;\n        let className = this.item.type.toLowerCase().replace(/^[a-z]+\\:/,'');\n        className = 'icon-' + className;\n        if(this.themed) {\n            className += \" is-themed\";\n        }\n        this.el.nativeElement.className = className;\n    }\n}\n","import { Component, Input, HostBinding } from '@angular/core';\nimport { Config } from '@geoplatform/client';\n\n@Component({\n    selector: 'gp-app-header',\n    templateUrl: './header.component.html',\n    styleUrls: ['./header.component.less']\n})\nexport class HeaderComponent {\n\n    @Input() appName : string = \"Application\";\n    @HostBinding('class') class = 'o-header'\n\n    public portalUrl : string = Config.portalUrl || 'https://www.geoplatform.gov';\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Config, ItemTypes } from \"@geoplatform/client\";\n\nconst ASSETS = [\n    ItemTypes.DATASET, ItemTypes.SERVICE,   ItemTypes.LAYER,       ItemTypes.MAP,\n    ItemTypes.GALLERY, ItemTypes.COMMUNITY, ItemTypes.APPLICATION, ItemTypes.TOPIC,\n    ItemTypes.WEBSITE\n];\n\n@Injectable()\nexport class ItemHelper {\n\n    constructor() { }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {boolean}\n     */\n    static isAsset(item : any) {\n        if(!item) return false;\n        let type = null;\n        if(typeof(item) === 'string')  type = item as string;\n        else if(item.type) type = item.type;\n        return type && ASSETS.indexOf(type) >= 0;\n    }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} url of icon for the type\n     */\n    static getIcon(item : any) :string {\n        let type = \"dataset\";\n        switch(item.type) {\n            case ItemTypes.CONTACT:         type =  'vcard'; break;\n            default: type = item.type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        }\n        return 'icon-' + type;\n    }\n\n    /**\n     * @param {any} item - either GP item\n     * @return {string} label for the item\n     */\n    static getLabel(item : any) {\n        if(!item || !item.type) return 'Unknown type';\n\n        let type = item.type;\n        switch(type) {\n\n            case ItemTypes.ORGANIZATION :\n            // case ItemTypes.PERSON :\n                return item.label || item.name || \"Un-titled resource\";\n\n            case ItemTypes.CONCEPT :\n            case ItemTypes.CONCEPT_SCHEME :\n                return item.label || item.prefLabel || \"Un-titled resource\";\n\n            case ItemTypes.CONTACT :\n                let fn = item.fullName || '';\n                let pt = item.positionTitle || '';\n                let on = item.orgName || '';\n                let label = fn + (fn.length?' - ':'') + pt + (pt.length?' - ':'') + on;\n                //if none of those fields have been provided, default to email or placeholder\n                if(!label.length) label = item.email || 'Untitled Contact';\n                return label;\n\n            default: return item.label || item.title || \"Un-titled resource\";\n        }\n    }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} label for the item's type\n     */\n    static getTypeLabel(item:any) {\n        if(!item) return 'Unknown Resource Type';\n\n        let type : string = null;\n        if(typeof(item) === 'string') type = item as string;\n        else if(item.type) type = item.type;\n        else return null;\n\n        switch(type) {\n            case ItemTypes.DATASET :\n            case ItemTypes.SERVICE :\n            // case ItemTypes.PERSON :\n            case ItemTypes.ORGANIZATION :\n            case ItemTypes.CONCEPT :\n                return type.replace(/^[a-z]+\\:/i, '');\n            case ItemTypes.CONCEPT_SCHEME : return \"Concept Scheme\";\n            case ItemTypes.WEBSITE : return \"Website\";\n            case ItemTypes.CONTACT : return \"Contact\";\n            default: return type;   //remainder are unprefixed\n        }\n    }\n\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} key (plural) for the item's type\n     */\n    static getTypeKey(item:any) {\n        if(!item) return null;\n\n        let type : string = null;\n        if(typeof(item) === 'string') type = item as string;\n        else if(item.type) type = item.type;\n        else return null;\n\n        switch(type) {\n            //special plurality\n            case ItemTypes.GALLERY : return 'galleries';\n            case ItemTypes.COMMUNITY : return 'communities';\n            //different name\n            case ItemTypes.CONTACT : return 'contacts'; //instead of \"vcards\"\n            //remainder\n            default: return type.replace(/^[a-z]+\\:/i, '').toLowerCase() + 's';\n\n        }\n    }\n\n\n    /**\n     * @param {string} type - item type\n     * @return {string} string path to the type's icon\n     */\n    static determineIconType(type : string) {\n        let name = type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        return `/assets/icons/${name}.svg`;\n    }\n\n    static getItemDetailsUrl(item : any) {\n        if(!item || !item.type || !item.id) return null;\n\n        return Config.portalUrl + '/resources/' + this.getTypeKey(item) + '/' + item.id;\n    }\n\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { ItemTypes } from \"@geoplatform/client\";\n\nimport { ItemHelper } from '../../item-helper';\n\n@Component({\n  selector: 'gp-resource-link',\n  templateUrl: './link.component.html',\n  styleUrls: ['./link.component.less']\n})\nexport class ResourceLinkComponent implements OnInit {\n\n    @Input() item : any;\n    @Input() icon : any;\n    @Input() external : boolean = false;    //open link in new window/tab\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    hasIcon() : boolean {\n        // return this.icon !== null && this.icon !== undefined;\n        return true;\n    }\n\n    getIcon() : string {\n        return ItemHelper.getIcon(this.item);\n    }\n\n    getLabel() : string {\n        return ItemHelper.getLabel(this.item);\n    }\n\n    getType() : string {\n        return ItemHelper.getTypeKey(this.item);\n    }\n\n    getIconClass() : string {\n        let type = ItemHelper.getTypeLabel(this.item);\n        if(\"Contact\" === type) type = 'vcard';\n        if(\"Product\" === type) type = 'imageproduct';\n        return 'icon-' + type.toLowerCase();\n    }\n\n}\n","import {\n    Component, OnInit, OnChanges,\n    Input, Output, EventEmitter, SimpleChanges\n} from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n@Component({\n  selector: 'gp-selected-items',\n  templateUrl: './selected.component.html',\n  styleUrls: ['./selected.component.less']\n})\nexport class SelectedItemsComponent implements OnInit {\n\n    @Input() selected : Item[];\n    @Output() onEvent : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    ngOnChanges( changes : SimpleChanges ) {\n\n    }\n\n    clear() {\n        this.onEvent.emit( { name: 'selected:clear' } );\n    }\n\n    remove( item : Item ) {\n\n    }\n}\n","import {\n    Component, OnInit, Input, Directive, HostBinding\n} from '@angular/core';\nimport {\n    DomSanitizer, SafeResourceUrl, SafeUrl\n} from '@angular/platform-browser';\n\nimport { Config, ItemTypes, Item } from \"@geoplatform/client\";\n\n\n\n\n\ninterface Thumbnail {\n    url ?: string;\n    contentData ?: string;\n    width ?: number;\n    height ?: number;\n    mediaType ?: string;\n}\n\n\n\n@Directive({\n    selector: 'img[fallback]',\n    host: {\n        '(error)':'onImgError()',\n        '(load)': 'onImgLoad()',\n        '[src]':'src'\n     }\n})\nexport class ImageFallbackDirective {\n    @Input() src : string;\n    @Input() fallback : string = `/assets/img-404.png`;\n    @HostBinding('class') className\n    onImgError() { this.src = this.fallback; }\n    onImgLoad() { this.className = 'is-image-loaded'; }\n}\n\n\n\n@Component({\n  selector: 'gp-item-thumbnail',\n  templateUrl: './thumbnail.component.html',\n  styleUrls: ['./thumbnail.component.less']\n})\nexport class ThumbnailComponent implements OnInit {\n\n    @Input() item : Item;\n\n    constructor(private sanitizer: DomSanitizer) { }\n\n    ngOnInit() {\n    }\n\n    getThumbnailUrl() {\n        if(this.item.thumbnail && this.item.thumbnail.url)\n            return this.item.thumbnail.url;\n        return Config.ualUrl + '/api/items/' + this.item.id + '/thumbnail';\n    }\n\n    getBackgroundImage() {\n        if(!this.item || !this.item.thumbnail) {\n            return this.getFallbackBackgroundImage();\n        }\n\n        let thumbnail = this.item.thumbnail;\n        let type = thumbnail.mediaType || 'image/png';\n\n        if(thumbnail.contentData) {\n            let content = thumbnail.contentData;\n            return this.sanitizer.bypassSecurityTrustStyle(`url(data:${type};base64,${content})`);\n        }\n    }\n\n    getFallbackBackgroundImage() {\n        let url = this.getFallbackUrl();\n        return `url(${url})`;\n    }\n\n    isEmpty() {\n        return !this.item || !this.item.thumbnail ||\n            ( !this.item.thumbnail.url && !this.item.thumbnail.contentData );\n    }\n\n    hasURL() {\n        return this.item.thumbnail && !!this.item.thumbnail.url;\n    }\n\n    hasContentData() {\n        return this.item.thumbnail && !!this.item.thumbnail.contentData && !this.item.thumbnail.url;\n    }\n\n    getFallbackUrl() {\n        return Config.ualUrl + '/api/items/' + this.item.id + '/thumbnail';\n    }\n}\n","\nimport { Item } from \"@geoplatform/client\";\n\n/**\n *\n */\nexport class GeoPlatformError extends Error {\n\n    private _label: string;\n    private _code: number;\n    private _item : Item;\n\n    public get label() { return this._label; }\n    public set label(value: string) { this._label = value; }\n\n    public get code() { return this._code; }\n    public set code(value: number) { this._code = value; }\n\n    public get item() { return this._item; }\n    public set item(value : Item) { this._item = value; }\n\n\n    constructor(\n        message: string,\n        label ?: string,\n        code ?: number,\n        item ?: Item\n    ) {\n        super(message);\n        this.label = label;\n        this.code  = code;\n        this.item  = item;\n    }\n\n    static from(error : Error) : GeoPlatformError {\n        if(error instanceof GeoPlatformError)\n            return error as GeoPlatformError;\n\n        let gpe = new GeoPlatformError(error.message);\n        gpe.label = \"An error occurred\";\n        gpe.code = 500;\n        return gpe;\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\n\nimport { GeoPlatformError } from './error';\n\n@Injectable()\nexport class GeoPlatformErrorService {\n\n    private updateSubject: BehaviorSubject<GeoPlatformError> = new BehaviorSubject<GeoPlatformError>(null);\n\n    error$: Observable<GeoPlatformError> = this.updateSubject.asObservable();\n\n    setError(error: Error) {\n        let gpe = GeoPlatformError.from(error);\n        this.updateSubject.next(gpe);\n    }\n}\n","\n/**\n *\n */\nexport const EventTypes = {\n    CLOSE       : Symbol( \"Close\"      ),   //\n    OPEN        : Symbol( \"Open\"       ),   //\n    RESET       : Symbol( \"Reset\"      ),   // clearing query filters\n    SELECT      : Symbol( \"Select\"     ),   // selecting item(s)\n    SELECT_NONE : Symbol( \"SelectNone\" ),   // clearing selections\n    QUERY       : Symbol( \"Query\"      ),   // change to query\n    ADDED       : Symbol( \"Added\"      ),   //\n    REMOVED     : Symbol( \"Removed\"    ),   //\n    CHANGED     : Symbol( \"Changed\"    ),   //\n    ERROR       : Symbol( \"Error\"      )    //\n};\n\n\n\n/**\n * Search Event\n *\n */\nexport class SearchEvent {\n\n    private type : Symbol;\n    private options : { [key:string] : any } = {} as { [key:string] : any };\n\n    constructor(type : Symbol,options ?: { [key:string] :any }) {\n        this.type = type;\n        if(options) {\n            Object.assign(this.options, options);\n        }\n    }\n    getType() : Symbol { return this.type; }\n    getOptions() : { [key:string] : any } { return this.options; }\n\n}\n","\n\nimport {\n    Item, Asset,\n    Map, Layer, Service, Dataset, Gallery, Community, Concept,\n    ConceptScheme, Organization, Contact,\n    ItemTypes\n} from '@geoplatform/client';\n\nimport { ItemHelper } from './item-helper';\n\n\nconst Visibilities : any = {\n    PUBLIC : 'public',\n    PRIVATE : 'private'\n};\n\nconst Statuses : any = {\n    SUBMITTED : 'submitted'\n};\n\n\n\nfunction createItem(type, opts ?: {[key:string]:any}) : any {\n    return Object.assign({\n        type:           type,\n        uri:            null,\n        label:          \"New Item\",\n        description:    \"This item needs a description\",\n        resourceTypes:  [],\n        createdBy:      null,\n        lastModifiedBy: null\n    }, opts||{});\n}\n\nfunction createAsset(type, opts ?: {[key:string]:any}) : any {\n    let options : {[key:string]:string} = Object.assign({\n        keywords        : [],\n        alternateTitles : [],\n        purpose         : null,\n        themes          : [],\n        contacts        : [],\n        publishers      : [],\n        contributors    : [],\n        distributions   : [],\n        classifiers     : {},\n        landingPage     : null,\n        status          : Statuses.SUBMITTED,\n        visibility      : Visibilities.PUBLIC,\n        identifiers     : [] as string[],\n        extent          : { minx: -179, miny: -89, maxx: 179, maxy: 89 },\n        temporal        : { startDate: null, endDate: null },\n        statistics      : { numViews: 0, numLikes: 0 },\n        usedBy          : [],\n        related         : [],\n        rights          : []\n    }, opts||{});\n    let item = createItem(type, options);\n    return item as Asset;\n}\n\n\n\nfunction createMap() : Map {\n    let obj = createAsset(ItemTypes.MAP, {\n        layers      : [],\n        baseLayer   : null,\n        annotations : {},\n        thumbnail   : {\n            label       : null,\n            url         : null,\n            contentData : null,\n            width       : 0,\n            height      : 0\n        }\n    });\n    return obj as Map;\n}\n\n\nfunction createLayer( service ?: Service ) : Map {\n    let services = service ? [service] : [];\n    let obj = createAsset(ItemTypes.LAYER, {\n        subLayers   : [],\n        parentLayer : null,\n        services    : services,\n        layerName   : null,\n        layerType   : null,\n        legend      : null\n    });\n    return obj as Map;\n}\n\nfunction createService() : Service {\n    let obj = createAsset(ItemTypes.SERVICE, {\n        datasets    : [],\n        serviceType : null,\n        href        : null\n    });\n    return obj as Service;\n}\n\nfunction createDataset() : Dataset {\n    let obj = createAsset(ItemTypes.DATASET, { services : [] });\n    return obj as Dataset;\n}\n\nfunction createGallery() : Gallery {\n    let obj = createAsset(ItemTypes.GALLERY, { items : [] });\n    return obj as Gallery;\n}\n\nfunction createCommunity() : Community {\n    let obj = createAsset(ItemTypes.COMMUNITY);\n    return obj as Community;\n}\n\nfunction createConcept() : Concept {\n    let obj = createItem(ItemTypes.CONCEPT, { scheme : null });\n    return obj as Concept;\n}\n\nfunction createConceptScheme() : ConceptScheme {\n    let obj = createItem(ItemTypes.CONCEPT_SCHEME);\n    return obj as ConceptScheme;\n}\n\n\nfunction createOrg() : Organization {\n    let obj = createItem(ItemTypes.ORGANIZATION, { subOrgOf : null });\n    return obj as Organization;\n}\n\nfunction createContact() : Contact {\n    let obj = createItem(ItemTypes.CONTACT, {\n        fullName : null,\n        email    : null,\n        tel      : null,\n        fax      : null,\n        address  : {\n            street1: null,\n            street2: null,\n            city:    null,\n            state:   null,\n            zip:     null\n        }\n    });\n    return obj as Contact;\n}\n\n\n\n\n\n\nfunction defaultArrayValue(item, property) {\n    if(!item || !property) return;\n    if( item[property] === null || item[property] === undefined ||\n        typeof(item[property]) === 'undefined' )\n        item[property] = [];\n}\n\nfunction defaultToNullValue(item, property) {\n    if(!item || !property) return;\n    if( typeof(item[property]) === 'undefined' )\n        item[property] = null;\n}\n\n\n\nexport class ItemFactory {\n\n    static create(type) {\n        switch(type) {\n            case ItemTypes.MAP : return createMap();\n            case ItemTypes.LAYER : return createLayer();\n            case ItemTypes.SERVICE : return createService();\n            case ItemTypes.DATASET : return createDataset();\n            case ItemTypes.GALLERY : return createGallery();\n            case ItemTypes.COMMUNITY: return createCommunity();\n            case ItemTypes.CONCEPT : return createConcept();\n            case ItemTypes.CONCEPT_SCHEME: return createConceptScheme();\n            case ItemTypes.ORGANIZATION: return createOrg();\n            case ItemTypes.CONTACT: return createContact();\n            default: return null;\n        }\n    }\n\n    static fix(item) {\n\n        defaultArrayValue(item, 'resourceTypes');\n\n        if(ItemHelper.isAsset(item)) {\n            defaultArrayValue(item, 'keywords');\n            defaultArrayValue(item, 'alternateTitles');\n            defaultArrayValue(item, 'themes');\n            defaultArrayValue(item, 'contacts');\n            defaultArrayValue(item, 'publishers');\n            defaultArrayValue(item, 'contributors');\n            defaultArrayValue(item, 'distributions');\n            defaultArrayValue(item, 'identifiers');\n            defaultArrayValue(item, 'usedBy');\n            defaultArrayValue(item, 'related');\n            defaultArrayValue(item, 'accessRights');\n\n            defaultToNullValue(item, 'purpose');\n            defaultToNullValue(item, 'landingPage');\n            defaultToNullValue(item, 'status');\n            defaultToNullValue(item, 'visibility');\n\n            if(!item.temporal) {\n                item.temporal = {startDate: null, endDate: null};\n            }\n            if(!item.extent) {\n                item.extent = { minx: -179, miny: -89, maxx: 179, maxy: 89 };\n            }\n        }\n    }\n\n}\n","export const MapTypes = {\n    GeoPlatform : { label: \"GeoPlatform Map\", uri: 'http://www.geoplatform.gov/ont/openmap/GeoplatformMap' },\n    AGOL        : { label: \"AGOL Web Map\",    uri: 'http://www.geoplatform.gov/ont/openmap/AGOLMap'        },\n    WMS         : { label: \"WMS Map\",         uri: \"http://www.geoplatform.gov/ont/openmap/WMSMap\"         },\n    MapBox      : { label: \"Map Box Map\",     uri: 'http://www.geoplatform.gov/ont/openmap/MapBoxMap'      }\n};\n","\nimport { NgModule, Pipe, PipeTransform } from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n\n\n@Pipe({name: 'arrayedItems'})\nexport class ArrayedItemsPipe implements PipeTransform {\n    transform(value: Item[], property:string, num?: number): string {\n        let max = isNaN(num) || num > value.length ? value.length : num;\n        return value.slice(0, max).map( v => v[property] ).join(' ');\n    }\n}\n\n\n/*\n * Limits an array of entries to a maximum number\n * Usage:\n *   array | limitTo:num\n * Example:\n *   {{ ['one','two','three'] | limitTo:2 }}\n */\n@Pipe({name: 'limitTo'})\nexport class LimitToPipe implements PipeTransform {\n    transform(value: any[], num: number, start ?: number): any[] {\n        if(value && value.length > num) {\n            let st = isNaN(start) ? 0 : start;\n            if(st > 0) num += st;\n            return value.slice( st, num);\n        }\n        return value;\n    }\n}\n\n\n\n/*\n *\n * Usage:\n *   array | sortBy : property\n * Example:\n *   {{ ['one','two','three'] | limitTo:2 }}\n */\n@Pipe({name: 'sortBy'})\nexport class SortByPipe implements PipeTransform {\n    transform(value: any[], property: string): any[] {\n        return value.sort( (a,b) => {\n            return a[property] > b[property] ? -1 : 1;\n        });\n    }\n}\n\n\n\n/*\n * Formats a GeoPlatform Item's type to a friendly label\n * Usage:\n *   type | friendlyType\n * Example:\n *   {{ \"dcat:Dataset\" | friendlyType }}\n *   formats to: \"Dataset\"\n*/\n@Pipe({name: 'friendlyType'})\nexport class FriendlyTypePipe implements PipeTransform {\n    transform(value: string): string {\n        if(!value || typeof(value) !== 'string' || value.length === 0) return value;\n        let name = value;\n        let idx = value.indexOf(\":\");\n        if(~idx) name = value.substring(idx+1);\n        if('VCard' === name) name = 'Contact';\n        return name;\n    }\n}\n\n\n\n\n\n/*\n * Replaces underscores between words with spaces\n * Usage:\n *   type | fixLabel\n * Example:\n *   {{ \"One_Two_Three\" | fixLabel }}\n *   formats to: \"One Two Three\"\n*/\n@Pipe({name: 'fixLabel'})\nexport class FixLabelPipe implements PipeTransform {\n    transform(value: string): string {\n        if(!value || typeof(value) !== 'string' || !value.length) return 'Untitled';\n        let result = value.replace(/([a-z])([A-Z])/g, \"$1 $2\").replace(/_/g, \" \").trim();\n        return result.charAt(0).toUpperCase() + result.slice(1);\n    }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport {\n    Router, ActivatedRouteSnapshot, RouterStateSnapshot, Resolve\n} from '@angular/router';\nimport { Observable, of, empty } from 'rxjs';\nimport {\n    Item, ItemService,\n    TrackingService, TrackingTypes, TrackingEventFactory\n} from '@geoplatform/client';\nimport { ItemFactory }       from './item-factory';\nimport { GeoPlatformError }           from './error';\n\n@Injectable(/*{ providedIn: 'root' }*/)\nexport class ItemResolver implements Resolve<Item> {\n\n    constructor(\n        @Inject(ItemService) private service : ItemService,\n        @Inject(TrackingService) private trackingService : TrackingService\n    ) {\n    }\n\n    resolve(\n        route: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<any>|Promise<any>|any {\n\n        let id = route.paramMap.get('id');\n        let opts : any = {};\n        let version = route.paramMap.get(\"version\");\n        if(version) opts.version = version;\n        return this.service.get(id, opts)\n        .then( item => {\n            if(this.trackingService) {\n                let event = TrackingEventFactory(TrackingTypes.VIEWED, item);\n                this.trackingService.logEvent(event);\n            }\n            return item;\n        })\n        .catch( (e : Error) => of( e ) );\n    }\n}\n\n\n@Injectable(/*{ providedIn: 'root' }*/)\nexport class VersionResolver implements Resolve<string> {\n\n    constructor() { }\n\n    resolve(\n        route: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<any>|Promise<any>|any {\n        let version = route.paramMap.get(\"version\");\n        return Promise.resolve(version||null);\n    }\n}\n\n\n\n@Injectable()\nexport class NewItemResolver implements Resolve<Item> {\n\n    constructor(\n        private router: Router,\n        // private errorService: ErrorService\n    ) {\n\n    }\n\n    resolve( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ): Observable<Item> {\n        let type = route.params.type;\n        let item = ItemFactory.create(type);\n        if(!item) {\n            let gpe = new GeoPlatformError(`Type ${type} is unsupported`, \"Unsupported Type\", 400);\n            // this.errorService.setError(gpe);\n            this.router.navigateByUrl('error', {skipLocationChange:false});\n            return empty();\n        } else {\n            return of(item);\n        }\n    }\n}\n\n\n\n@Injectable()\nexport class ErrorResolver implements Resolve<Error> {\n    constructor(private router: Router) {}\n    resolve( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ): Observable<Error> {\n        let type = route.params.type;\n        let msg = \"An error has occurred\";\n        if(\"unsupported\" === type)\n            msg = `Type ${type} is not supported`;\n        else if(\"404\" === type)\n            msg = \"Item not found\";\n        let error = new Error(msg);\n        // error.error = \"Unsupported Type\";\n        return of(error);\n    }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { Item, Query, SearchResults, ItemService } from '@geoplatform/client';\nimport { logger } from '../logger';\n\n\n/**\n *\n */\nexport interface SearchServiceEvent {\n    query    ?: Query;\n    results  ?: SearchResults;\n    selected ?: Item[]\n}\n\n/**\n *\n */\nexport interface SearchAwareComponent {\n    onQueryChange( query : Query ) : void;\n    onResultsChange( results : SearchResults ) : void;\n    onSelectedChange( selected : Item[] ) : void;\n}\n\n\n/**\n *\n */\n@Injectable()\nexport class SearchService {\n\n    private query    : Query;\n    private results  : SearchResults;\n    private selected : Item[] = [] as Item[];\n\n    private subject = new Subject<SearchServiceEvent>();\n    private subject$ = this.subject.asObservable();\n\n\n    constructor(\n        @Inject(ItemService) private service : ItemService\n    ) {\n\n    }\n\n    setQuery(query : Query) {\n        this.query = query ? query.clone() : new Query();\n        this.subject.next({ query : this.query.clone() });\n    }\n\n    getQuery() : Query {\n        return this.query.clone();\n    }\n\n    getResults() : SearchResults {\n        return this.results;\n    }\n\n    search(query ?: Query) {\n\n        //if a query was provided, store it and use it\n        if(query) this.setQuery(query);\n\n        this.service.search(this.query)\n        .then( (response:SearchResults) => {\n            logger.debug('SearchService.search() - ' + response.totalResults + \" results found\");\n            this.results = response;\n            this.subject.next({ results : response });\n        })\n        .catch( (error : Error) => {\n            logger.error(error.message);\n        });\n    }\n\n\n    /**\n     * @param item - item or array of item selected from search results\n     * @param asBaseLayer - boolean indicating how to select the layer\n     */\n    select( item : Item|Item[] ) {\n\n        if(Array.isArray(item)) { //multiple selections\n            item.forEach( it => this._toggleItem(it, false) );\n            this.subject.next({ selected: this.selected });\n            return;\n        }\n\n        this._toggleItem( item, true );\n    }\n\n    /**\n     *\n     */\n    _toggleItem( item : Item, fireEvent : boolean ) {\n        if(!item || !item.id) return;\n\n        let position = this.selected.findIndex( s => s.id === item.id );\n\n        if(position >= 0) { //already selected, deselect it and return\n            this.selected.splice(position, 1);\n            if(fireEvent) this.subject.next({selected: this.selected});\n            return;\n        }\n\n        //new selection\n        // logger.error(`Selecting ${item.label} as ${entry.type.toString()}`);\n\n        //fetch full object and replace placeholder in selected array\n        this.service.get(item.id)\n        .then( fullItem => {\n            this.selected.push(fullItem);\n            this.selected.sort( (a,b) => a.label > b.label ? 1 : -1 );\n            if(fireEvent) this.subject.next({selected: this.selected});\n        })\n        .catch(e => {\n            logger.error(\"SearchService.select() - \" +\n                \"Error encountered fetching selected item's details: \" + e.message);\n        });\n    }\n\n    /**\n     * @param item Item\n     * @return boolean\n     */\n    isSelected( item : Item ): boolean {\n        return this.selected.length &&\n            item && item.id &&\n            this.selected.findIndex(it=>it.id===item.id) >= 0;\n    }\n\n    /**\n     *\n     */\n    hasSelected() : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    /**\n     * @return Item[]\n     */\n    getSelected() : Item[] {\n        return this.selected;\n    }\n\n    clearSelected() {\n        this.selected = [];\n        this.subject.next({ selected: this.selected });\n    }\n\n\n    subscribe( listener : SearchAwareComponent ) : Subscription {\n\n        let obs : Observer<SearchServiceEvent> = {\n            next : (value: SearchServiceEvent) => {\n                if( typeof(value) === 'undefined' || value === null) return;\n                if(value.query)\n                    listener.onQueryChange( value.query );\n                if(value.results)\n                    listener.onResultsChange( value.results );\n                if(value.selected)\n                    listener.onSelectedChange( value.selected );\n            },\n            error : ( err: Error ) => {\n                console.log(\"[ERROR] \" + err.message);\n            },\n            complete : () => { }\n        };\n\n        return this.subject$.subscribe( obs );\n    }\n\n}\n","\nimport { TrackingService } from '@geoplatform/client';\nimport { RPMService      } from '@geoplatform/rpm/src/iRPMService'\n\n\nlet trackingServiceInst : TrackingService;\n\nexport function TrackingServiceFactory ( rpm : RPMService ) {\n    if(!trackingServiceInst) {\n        trackingServiceInst = new TrackingService({ provider: rpm });\n    }\n    return trackingServiceInst;\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n    MatInputModule, MatButtonModule, MatIconModule, MatDialogModule\n} from '@angular/material';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\n\n// Adds window.RPMService to global namespace\nimport { RPMServiceFactory } from '@geoplatform/rpm/dist/js/geoplatform.rpm.browser.js';\nimport { RPMService }        from '@geoplatform/rpm/src/iRPMService'\n// import { RPMStatsService }   from './rpm/rpmstats.service';\n// let RPMStatsServiceFactory = (http: HttpClient) => {\n//     return new RPMStatsService(environment.rpmUrl, environment.rpmToken, http)\n// }\n\n\nimport { TrackingService } from '@geoplatform/client';\nimport { TrackingServiceFactory } from './tracking.factory';\n\n\nimport { AppAuthService, LoginButtonComponent, LoginModalComponent } from './auth';\nimport { ListSelectDialog, MessageDialog } from './dialogs/';\nimport { SearchService } from './search';\n\n\nimport {\n    ImageFallbackDirective,\n    ThumbnailComponent,\n    ResourceLinkComponent,\n    SelectedItemsComponent,\n    HeaderComponent\n} from './components';\n\nimport {\n    ArrayedItemsPipe,\n    LimitToPipe,\n    SortByPipe,\n    FriendlyTypePipe,\n    FixLabelPipe\n} from './pipes';\nimport { GeoPlatformIconDirective } from './directives/icon';\nimport {\n    ItemResolver, NewItemResolver, ErrorResolver, VersionResolver\n} from './resolvers';\nimport { GeoPlatformErrorService  } from './error.service';\nimport { ItemHelper               } from './item-helper';\n\n@NgModule({\n    imports: [\n        RouterModule,\n        CommonModule,\n        FormsModule,\n        MatInputModule, MatButtonModule, MatIconModule, MatDialogModule,\n        NgbModule\n    ],\n    exports: [\n        ListSelectDialog,\n        MessageDialog,\n        ImageFallbackDirective, ThumbnailComponent,\n        SelectedItemsComponent,\n        ResourceLinkComponent,\n        LoginButtonComponent, LoginModalComponent,\n        HeaderComponent,\n\n        ArrayedItemsPipe,\n        LimitToPipe,\n        SortByPipe,\n        FriendlyTypePipe,\n        FixLabelPipe,\n\n        GeoPlatformIconDirective\n    ],\n    declarations: [\n        ListSelectDialog,\n        MessageDialog,\n        ImageFallbackDirective, ThumbnailComponent,\n        SelectedItemsComponent,\n        ResourceLinkComponent,\n        LoginButtonComponent, LoginModalComponent,\n        HeaderComponent,\n\n        ArrayedItemsPipe,\n        LimitToPipe,\n        SortByPipe,\n        FriendlyTypePipe,\n        FixLabelPipe,\n\n        GeoPlatformIconDirective\n    ],\n    providers: [\n        AppAuthService,\n        ErrorResolver,\n        ItemResolver,\n        NewItemResolver,\n        VersionResolver,\n        GeoPlatformErrorService,\n        ItemHelper,\n        SearchService,\n        // {\n        //     provide: RPMStatsService,\n        //     useFactory: RPMStatsServiceFactory,\n        //     deps: [ HttpClient ]\n        // },\n        {\n            provide: RPMService,\n            useValue: RPMServiceFactory()\n        },\n        {\n            provide: TrackingService,\n            useFactory: TrackingServiceFactory,\n            deps: [ RPMService]\n        }\n    ],\n    entryComponents: [\n        ListSelectDialog,\n        MessageDialog\n    ]\n})\nexport class GeoPlatformCommonModule {}\n","\n/*\n    Version of the library exposed to consumers.\n    Long-term this value should be auto-set to be whatever is set in package.json\n */\nexport const GeoPlatformCommonVersion = \"1.0.0\";\n\n// import Polyfills from \"./shared/polyfills\";\n// Polyfills();\n\nexport const DefaultSortOptions = [\n    { value: \"_score,desc\",     label: \"Relevance\"  },\n    { value: \"modified,desc\",   label: \"Most Recently Modified\"  },\n    { value: \"modified,asc\",    label: \"Least Recently Modified\" },\n    { value: \"label,asc\",       label: \"Title [A-Z]\" },\n    { value: \"label,desc\",      label: \"Title [Z-A]\" },\n    { value: \"reliability,asc\", label: \"Reliability\" }\n];\n\nexport * from './auth';\nexport * from './dialogs';\nexport * from './directives';\nexport * from './components';\nexport * from './logger';\nexport * from './error.service';\nexport * from './error';\nexport * from './event';\nexport * from './item-factory';\nexport * from './item-helper';\nexport * from './map-types';\nexport * from './pipes';\nexport * from './resolvers';\nexport * from './search';\nexport * from './module';\nexport * from './tracking.factory';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {AppAuthService as k,LoginButtonComponent as g,LoginModalComponent as h} from './auth';\nexport {HeaderComponent as i,ImageFallbackDirective as c,ResourceLinkComponent as f,SelectedItemsComponent as e,ThumbnailComponent as d} from './components';\nexport {ListSelectDialog as a,MessageDialog as b} from './dialogs/';\nexport {GeoPlatformIconDirective as j} from './directives/icon';\nexport {SearchService as l} from './search';"],"names":["tslib_1.__param","tslib_1.__decorate"],"mappings":"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"}