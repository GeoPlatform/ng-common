{"version":3,"sources":["../../node_modules/tslib/tslib.es6.js","ng://@geoplatform/common/logger.ts","ng://@geoplatform/common/auth/authenticated.component.ts","ng://@geoplatform/common/auth/auth.factory.ts","ng://@geoplatform/common/auth/auth.service.ts","ng://@geoplatform/common/auth/login.ts","ng://@geoplatform/common/dialogs/list-select/list-select.ts","ng://@geoplatform/common/dialogs/message/message.ts","ng://@geoplatform/common/directives/icon.ts","ng://@geoplatform/common/item-helper.ts","ng://@geoplatform/common/components/link/link.component.ts","ng://@geoplatform/common/components/selected/selected.component.ts","ng://@geoplatform/common/components/thumbnail/thumbnail.component.ts","ng://@geoplatform/common/error.ts","ng://@geoplatform/common/error.service.ts","ng://@geoplatform/common/event.ts","ng://@geoplatform/common/item-factory.ts","ng://@geoplatform/common/tracking.factory.ts","ng://@geoplatform/common/pipes.ts","ng://@geoplatform/common/resolvers.ts","ng://@geoplatform/common/module.ts","ng://@geoplatform/common/public_api.ts","ng://@geoplatform/common/map-types.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__read","o","n","m","Symbol","iterator","e","call","ar","next","done","push","value","error","__spread","concat","LEVELS","logger","Logger","level","setLevel","Config","logLevel","LOG_LEVEL","indexOf","info","isVisible","log","arg","_this","addl","_i","msg","toStr","map","a","join","console","debug","apply","warn","JSON","stringify","AuthenticatedComponent","authService","ngOnInit","init","ngOnDestroy","destroy","obs","username","user","onUserChange","err","message","complete","gpAuthSubscription","subscribe","getUser","unsubscribe","isAuthenticated","getAuthToken","getToken","checkAuth","check","canUserEdit","item","isAuthorized","isAuthorOf","createdBy","AUTH_KEYS","authServiceFactory","environment","authSettings","gpGlobal","window","GeoPlatform","config","auth","APP_BASE_URL","wpUrl","forEach","v","ngGpoauthFactory","AppAuthService","rpm","observers","user$","Subject","sub","getMessenger","raw","name","then","getJWT","checkWithClient","token","setTimeout","Promise","resolve","login","logout","callback","dispose","Inject","args","RPMService","Injectable","providedIn","tslib_1.__param","LoginButtonComponent","_super","idpBaseUrl","IDP_BASE_URL","tslib_1.__extends","Component","selector","template","LoginModalComponent","showLoginModal","forceLogin","FORCE_LOGIN","cancel","ListSelectDialog","dialogRef","data","currentPage","totalSuggested","subject","query","clone","page","pipe","debounceTime","distinctUntilChanged","term","filterValues","onNoClick","close","onTermChange","immediate","termQuery","suggested","q","isLoading","service","search","response","hits","results","totalResults","catch","finally","addValue","isSelected","removeValue","selected","index","id","splice","find","s","onPageChange","pageNo","getSubHeading","subHeading","getLabelFrom","isArray","label","title","prefLabel","MatDialogRef","MAT_DIALOG_DATA","MessageDialog","type","className","getIconClass","tslib_1.__decorate","HostBinding","GeoPlatformIconDirective","el","themed","toLowerCase","replace","nativeElement","ElementRef","Input","Directive","ASSETS","ItemTypes","DATASET","SERVICE","LAYER","MAP","GALLERY","COMMUNITY","APPLICATION","TOPIC","WEBSITE","ItemHelper","isAsset","getIcon","CONTACT","getLabel","ORGANIZATION","CONCEPT","CONCEPT_SCHEME","fn","fullName","pt","positionTitle","on","orgName","email","getTypeLabel","getTypeKey","determineIconType","getItemDetailsUrl","portalUrl","ResourceLinkComponent","external","hasIcon","getType","SelectedItemsComponent","onEvent","EventEmitter","ngOnChanges","changes","clear","emit","remove","Output","ImageFallbackDirective","fallback","onImgError","src","onImgLoad","host","(error)","(load)","[src]","ThumbnailComponent","sanitizer","getThumbnailUrl","thumbnail","url","ualUrl","getBackgroundImage","getFallbackBackgroundImage","mediaType","contentData","content","bypassSecurityTrustStyle","getFallbackUrl","isEmpty","hasURL","hasContentData","DomSanitizer","GeoPlatformError","code","_label","_code","_item","from","gpe","Error","GeoPlatformErrorService","updateSubject","BehaviorSubject","error$","asObservable","setError","EventTypes","CLOSE","OPEN","RESET","SELECT","SELECT_NONE","QUERY","ADDED","REMOVED","CHANGED","ERROR","SearchEvent","options","assign","getOptions","Visibilities","PUBLIC","PRIVATE","Statuses","SUBMITTED","createItem","opts","uri","description","resourceTypes","lastModifiedBy","createAsset","keywords","alternateTitles","purpose","themes","contacts","publishers","contributors","distributions","classifiers","landingPage","status","visibility","identifiers","extent","minx","miny","maxx","maxy","temporal","startDate","endDate","statistics","numViews","numLikes","usedBy","related","rights","defaultArrayValue","property","undefined","defaultToNullValue","trackingServiceInst","ItemFactory","layers","baseLayer","annotations","width","height","services","subLayers","parentLayer","layerName","layerType","legend","datasets","serviceType","href","items","scheme","subOrgOf","tel","fax","address","street1","street2","city","state","zip","fix","ArrayedItemsPipe","transform","num","max","isNaN","slice","Pipe","LimitToPipe","start","st","SortByPipe","sort","FriendlyTypePipe","idx","substring","FixLabelPipe","result","trim","charAt","toUpperCase","ItemResolver","trackingService","route","paramMap","get","version","event_1","TrackingEventFactory","TrackingTypes","VIEWED","logEvent","of","ItemService","TrackingService","VersionResolver","NewItemResolver","router","params","navigateByUrl","skipLocationChange","empty","Router","ErrorResolver","TrackingServiceFactory","provider","RPMServiceFactory","ɵ1","GeoPlatformCommonModule","NgModule","imports","RouterModule","CommonModule","FormsModule","MatInputModule","MatButtonModule","MatIconModule","MatDialogModule","NgbModule","exports","declarations","providers","provide","useValue","ɵ0","useFactory","deps","entryComponents","AGOL","WMS","MapBox"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\nimport { Config } from '@geoplatform/client';\n\nconst LEVELS = [\n    \"error\",\n    \"warn\",\n    \"info\",\n    \"debug\"\n];\n\nclass Logger {\n\n    private level : string = 'error';\n\n    constructor() {\n        this.setLevel(Config.logLevel || Config.LOG_LEVEL);\n    }\n\n    setLevel(level : string) {\n        if( level && LEVELS.indexOf(level) >= 0 ) {\n            this.level = level;\n        }\n        this.info(\"Log Level : \" + this.level);\n    }\n\n    isVisible(level : string) : boolean {\n        return LEVELS.indexOf(this.level) >= LEVELS.indexOf(level);\n    }\n\n    log(arg, ...addl) {\n        let msg = this.toStr(arg);\n        msg += addl.map( a => this.toStr(a) ).join('');\n        console.log(msg);\n    }\n\n    debug(arg, ...addl) {\n        if(!this.isVisible('debug')) return;\n        let msg = \"[DEBUG] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    info(arg, ...addl) {\n        if(!this.isVisible('info')) return;\n        let msg = \"[INFO] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    warn(arg, ...addl) {\n        if(!this.isVisible('warn')) return;\n        let msg = \"[WARN] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    error(arg, ...addl) {\n        let msg = \"[ERROR] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    toStr(arg) {\n        if(null === arg || typeof(arg) === 'undefined') return '';\n        if(typeof(arg) ===  'string') return arg;\n        return JSON.stringify(arg);\n    }\n}\n\nconst logger = new Logger();\n\nexport {\n    logger as default,\n    logger\n};\n","import { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { AuthService, GeoPlatformUser } from '@geoplatform/oauth-ng/angular';\n\nimport { AppAuthService } from './auth.service';\nimport { logger } from '../logger';\n\nconst EDIT_ROLE = 'gp_editor';\n\n\n/**\n * Base class that can be used to hook authentication notifications into\n * Angular @Component instances.\n */\nexport abstract class AuthenticatedComponent {\n\n    public user : GeoPlatformUser;\n    private gpAuthSubscription : Subscription;\n\n    constructor(protected authService : AppAuthService) {\n    }\n\n    //facade methods to mimic @Component lifecycle methods in case sub-classes\n    // want to use consistent names\n    ngOnInit() { this.init(); }\n    ngOnDestroy() { this.destroy(); }\n\n    /**\n     * Sub-classes must invoke this method in order to register listeners\n     * for authentication events\n     */\n    init() {\n\n        let obs : Observer<GeoPlatformUser> = {\n            next : (value: GeoPlatformUser) => {\n                logger.debug(\"AuthenticatedComponent : User changed to \" + (value ? value.username : 'null'));\n                this.user = value;\n                this.onUserChange(this.user);\n            },\n            error : (err: any) => {\n                logger.error(\"Unable to get authenticated user info: \" +\n                    (err as Error).message);\n            },\n            complete : () => { }\n        };\n\n        this.gpAuthSubscription = this.authService.subscribe( obs );\n\n        //for components that initialize AFTER a user has changed auth state,\n        // we need to fetch the current user details\n        this.user = this.authService.getUser();\n        this.onUserChange(this.user);\n    }\n\n    /**\n     * Sub-classes must invoke this method in order to de-register listeners\n     * for authentication events and clean up internals\n     */\n    destroy() {\n        if(this.gpAuthSubscription) {\n            this.gpAuthSubscription.unsubscribe();\n            this.gpAuthSubscription = null;\n        }\n        this.user = null;\n        this.authService = null;\n    }\n\n    /** @return {boolean} */\n    isAuthenticated() : boolean { return !!this.user; }\n\n    /** @return {GeoPlatformUser} */\n    getUser() : GeoPlatformUser { return this.user; }\n\n    /** @return {string} JWT token associated with the current user or null */\n    getAuthToken() : string { return this.authService.getToken(); }\n\n    /** @return Promise containing current user or null */\n    checkAuth() : Promise<GeoPlatformUser> { return this.authService.check(); }\n\n    /**\n     * @param item - optional object the user may be able to edit\n     * @return boolean indicating whether user can edit the requested item or is an editor if no item was specified\n     */\n    canUserEdit(item ?: any) : boolean {\n        if(!this.user) return false;\n        if(this.user.isAuthorized(EDIT_ROLE)) return true;\n        return this.isAuthorOf(item);\n    }\n\n    /**\n     * @param item - object the user may be the owner of\n     * @return boolean indicating if the user is the associated creator/owner of the item\n     */\n    isAuthorOf(item ?: any) : boolean {\n        if(!this.user || !item) return false;\n        return item.createdBy && item.createdBy === this.user.username;\n    }\n\n    /**\n     * @param {GeoPlatformUser} user - authenticated user object or null if not authed\n     */\n    protected onUserChange(user : GeoPlatformUser) { /* implement in sub-classes */ }\n\n\n}\n","import { ngGpoauthFactory, AuthService } from '@geoplatform/oauth-ng/angular';\n\nimport { logger } from \"../logger\";\n\n\n//should be exported by gp-ngoauth but isn't so we are declaring it here...\ninterface AuthConfig {\n    AUTH_TYPE?: 'grant' | 'token'\n    IDP_BASE_URL?: string\n    APP_BASE_URL?: string\n    ALLOW_SSO_LOGIN?: boolean\n    APP_ID?: boolean\n    ALLOW_IFRAME_LOGIN?: boolean\n    FORCE_LOGIN?: boolean\n    CALLBACK?: string\n    LOGIN_URL?: string\n    LOGOUT_URL?: string\n    ALLOW_DEV_EDITS?: boolean\n};\nconst AUTH_KEYS = [\n    'AUTH_TYPE', 'IDP_BASE_URL', 'APP_BASE_URL', 'ALLOW_SSO_LOGIN',\n    'APP_ID', 'ALLOW_IFRAME_LOGIN', 'FORCE_LOGIN', 'CALLBACK',\n    'LOGIN_URL', 'LOGOUT_URL', 'ALLOW_DEV_EDITS'\n];\n\n\n\n\nvar authService : AuthService = null;\n\n\nexport function authServiceFactory( environment : any ) {\n\n    //once service has been built, keep using it\n    if(authService) return authService;\n\n    //\n    //but the first time it's requested, it has to be built using env settings\n    let authSettings : AuthConfig = {};\n\n    let gpGlobal = (<any>window).GeoPlatform;\n    if(gpGlobal && gpGlobal.config && gpGlobal.config.auth) {\n        //auth library settings made available through WP via 'GeoPlatform' global\n        //https://geoplatform.atlassian.net/browse/DT-2307\n        authSettings = gpGlobal.config.auth;\n    } else {\n        authSettings.APP_BASE_URL = environment.wpUrl || '';\n        AUTH_KEYS.forEach( key => {\n            let v = environment[key];\n            if(typeof(v) !== 'undefined') {\n                if(~key.indexOf('ALLOW') || ~key.indexOf('FORCE')) {\n                    v = (v === true || v === 'true');\n                }\n                authSettings[key] = v;\n            }\n        });\n    }\n\n    logger.info(\"Configuring OAuth using: \");\n    logger.info(authSettings);\n\n    authService = ngGpoauthFactory(authSettings);\n    return authService;\n};\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { Config } from '@geoplatform/client';\nimport { RPMService } from '@geoplatform/rpm/src/iRPMService'\n\nimport {\n    ngGpoauthFactory, AuthService, GeoPlatformUser\n} from '@geoplatform/oauth-ng/angular';\n\nimport { authServiceFactory } from './auth.factory';\nimport { logger } from \"../logger\";\n\n\n\n@Injectable({providedIn: 'root'})\nexport class AppAuthService {\n\n    private user : GeoPlatformUser;\n    private user$ : Subject<GeoPlatformUser>;\n    private observers : { [key:string]: Observer<GeoPlatformUser> } =\n        {} as { [key:string]: Observer<GeoPlatformUser> };\n    private gpAuthSubscription : Subscription;\n    private authService : AuthService;\n    private rpm: RPMService;\n\n\n\n    constructor( @Inject(RPMService) rpm : RPMService ) {\n        this.authService = authServiceFactory(Config);\n        this.rpm = rpm;\n        this.init();\n    }\n\n\n    init() {\n\n        this.user$ = new Subject<GeoPlatformUser>();\n\n        if(!this.authService) return;\n\n        const sub = this.authService.getMessenger().raw();\n        this.gpAuthSubscription = sub.subscribe(msg => {\n            logger.debug(\"Received Auth Message: \" + msg.name);\n            switch(msg.name){\n                case 'userAuthenticated': this.onUserChange(msg.user); break;\n                case 'userSignOut': this.onUserChange(null); break;\n            }\n        });\n\n        this.authService.getUser().then( user => { this.onUserChange(user); });\n\n    }\n\n    onUserChange(user : GeoPlatformUser) {\n        logger.debug(\"AuthService.onUserChange() : User is \" + (user ? user.username : 'N/A'));\n        this.user = user;\n        // this.rpm.setUserId( user ? user.id : null);\n        this.user$.next(user);\n    }\n\n    /**\n     *\n     */\n    getMessenger() : Subject<any>{\n        return this.authService ? this.authService.getMessenger().raw() : null;\n    }\n\n\n    isAuthenticated() : boolean {\n        return !!this.user;\n    }\n\n    getUser() : GeoPlatformUser {\n        return this.user;\n    }\n\n    getToken() : string {\n        return this.authService ? this.authService.getJWT() : null;\n    }\n\n    /**\n     * Check the underlying authentication mechanism endpoint to validate the\n     * current JWT token (if one exists) is not expired or revoked.\n     * @return GeoPlatformUser or null\n     */\n    check() : Promise<GeoPlatformUser> {\n        if(!this.authService) return Promise.resolve(null);\n        return this.authService.checkWithClient()\n        .then( token => this.authService.getUser() )\n        .then( user => {\n            setTimeout( () => { this.onUserChange(user); },100 );\n            return user;\n        });\n    }\n\n    login() {\n        this.authService.login();\n    }\n\n    logout() {\n        this.authService.logout();\n    }\n\n    /**\n     *\n     */\n    subscribe( callback : Observer<GeoPlatformUser> ) : Subscription {\n        return this.user$.subscribe( callback );\n    }\n\n\n    dispose() {\n        if(this.gpAuthSubscription) {\n            this.gpAuthSubscription.unsubscribe();\n            this.gpAuthSubscription = null;\n        }\n        this.user = null;\n        this.user$ = null;\n        this.observers = null;\n        this.authService = null;\n    }\n}\n","\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Config } from '@geoplatform/client';\nimport { AuthService, GeoPlatformUser } from '@geoplatform/oauth-ng/angular';\n\nimport { AuthenticatedComponent } from './authenticated.component';\nimport { AppAuthService } from './auth.service';\nimport { logger } from '../logger';\n\n\n@Component({\n    selector: 'gp-login-button',\n    styles: [\n        `\n        .btn-login.btn-link {\n            padding: .375em .75em;\n            border-right: none;\n            margin: 0 0.5em;\n            font-weight: 700;\n        }\n        .btn-login.btn-link:hover {\n            background-color: #fff;\n            text-decoration: none;\n            color: #333;\n        }\n        .o-account-details {\n            display: flex;\n            justify-content: space-between;\n            align-items: stretch;\n            margin-top: -0.5em;\n            padding: 1em;\n            background: #185b8a;\n            color: #fff;\n        }\n        .o-account-details__avatar {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 6em;\n            margin-right: 0.25em;\n            padding-top: 10px;\n            width: 100px;\n            height: 100px;\n            overflow: hidden;\n            background: #fff;\n            color: #777;\n            border-radius: 100%;\n        }\n        .dropdown-menu .btn.btn-link {\n            display: inline-block;\n            padding: 0.375rem 0.75rem;\n            border-right: none;\n        }\n        .dropdown-menu .btn.btn-link:after {\n            content: '';\n        }\n        .btn.btn-logout {\n            padding: 0.375rem 0.75rem;\n            margin-bottom: -0.5em;\n        }\n        `\n    ],\n    template:\n    `\n    <div class=\"btn-account btn-group\">\n        <!-- not logged in yet -->\n        <a class=\"btn-login btn btn-link\" (click)=\"login()\" *ngIf=\"!user\">Sign In</a>\n\n        <!-- logged in -->\n        <button type=\"button\" class=\"btn-login btn btn-link dropdown-toggle\" data-toggle=\"dropdown\"\n            aria-expanded=\"false\" *ngIf=\"user\">\n            <span class=\"fas fa-user\"></span>\n            <span class=\"d-xs-none\">{{user?.name}}</span>\n            <span class=\"caret\"></span>\n        </button>\n        <div class=\"dropdown-menu dropdown-menu-right\" role=\"menu\" *ngIf=\"user\">\n            <div class=\"o-account-details\">\n                <div class=\"o-account-details__avatar\">\n                    <span class=\"fas fa-user\"></span>\n                </div>\n                <div class=\"flex-1\">\n                    <div class=\"a-heading\">\n                        {{user?.name}}\n                        <small><em>({{user?.username}})</em></small>\n                    </div>\n                    <div class=\"u-text--sm\">{{user?.email}}</div>\n                    <div class=\"u-text--sm\">{{user?.org}}</div>\n                </div>\n            </div>\n            <div class=\"d-flex flex-justify-around u-mg-top--sm\">\n                <a class=\"btn btn-sm btn-link\" target=\"_blank\" href=\"{{idpBaseUrl}}/profile\">\n                    <span class=\"fas fa-pencil-alt\"></span> Edit Profile\n                </a>\n                <a class=\"btn btn-sm btn-link\" target=\"_blank\" href=\"{{idpBaseUrl}}/updatepw\">\n                    <span class=\"fas fa-key\"></span> Change Password\n                </a>\n            </div>\n            <div class=\"u-mg-top--sm\">\n                <a class=\"btn-logout btn btn-light btn-block\" (click)=\"logout()\">\n                    <span class=\"fas fa-power-off\"></span> Sign Out\n                </a>\n            </div>\n        </div>\n    </div>\n    `\n\n})\nexport class LoginButtonComponent extends AuthenticatedComponent implements OnInit {\n\n    public idpBaseUrl : string = Config.IDP_BASE_URL || 'https://accounts.geoplatform.gov';\n    public user : GeoPlatformUser =  null;\n\n    constructor( authService : AppAuthService ) {\n        super(authService);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n\n        // this.authService.check();\n    }\n\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n\n    onUserChange(user : GeoPlatformUser) {\n        super.onUserChange(user);\n        logger.debug(\"LoginButton.onUserChange() : User is \" + (user ? user.username : 'null'));\n        this.user = user;\n    }\n\n    login() {\n        this.authService.login();\n    }\n\n    logout() {\n        this.authService.logout();\n    }\n\n}\n\n\n\n\n\n\n\n\n\n@Component({\n    selector: 'gp-login-modal',\n    styles: [\n    `\n        .gpLoginCover {\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            background: rgba(0,0,0,0.6);\n            z-index: 5000;\n            width: 100vw;\n            height: 100vh;\n        }\n\n        .gpLoginCancelIframe {\n          z-index: 5001;\n          position: absolute;\n          right: 0px;\n        }\n\n        .gpLoginWindow {\n          top: 100px;\n          height: 60%;\n          width: 75%;\n          margin: 0 auto;\n          position: relative;\n          z-index: 5001;\n        \tborder: 5px solid #cccccc;\n          border-radius: 10px;\n        }\n\n        .gpLoginWindow iframe {\n          width: 100%;\n          height: 100%\n        }\n\n        .gpLoginWindow .btn-cancel {\n          color: white;\n          background-color: red;\n        }\n\n        .gpLoginWindow .btn {\n          display: inline-block;\n          padding: 6px 12px;\n          margin-bottom: 0;\n          font-size: 14px;\n          font-weight: 400;\n          line-height: 1.42857143;\n          text-align: center;\n          white-space: nowrap;\n          vertical-align: middle;\n          -ms-touch-action: manipulation;\n          touch-action: manipulation;\n          cursor: pointer;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          background-image: none;\n          border: 1px solid transparent;\n          border-radius: 4px;\n        }\n    `\n    ],\n    templateUrl: './login.html',\n\n})\nexport class LoginModalComponent implements OnInit, OnDestroy {\n\n    public showLoginModal : boolean = false;\n    public forceLogin : boolean = Config.FORCE_LOGIN;\n\n    constructor(private authService : AppAuthService) {\n\n    }\n\n    ngOnInit() {\n        if(!this.authService) return;\n\n        this.authService.getMessenger().subscribe(msg => {\n            logger.debug(\"LoginModal received auth message: \" + msg.name);\n            switch(msg.name){\n                case 'auth:requireLogin':\n                    this.showLoginModal = true;   //show the modal\n                    break;\n\n                case 'userAuthenticated':\n                case 'iframe:userAuthenticated':\n                    this.showLoginModal = false;  //hide the modal\n                    this.authService.onUserChange(msg.user);\n                    break;\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this.showLoginModal = false;\n    }\n\n    cancel() {\n        //hide the modal\n        this.showLoginModal = false;\n    }\n\n}\n","import { Inject, Component } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { Item, ItemService, Query, SearchResults } from \"@geoplatform/client\";\n\n\n\n\nexport interface ListSelectDialogData {\n    selected    : Item[];       //array of pre-selected values\n    service     : ItemService;  //service to query for new values\n    query       : Query;        //query defining how to search for new values\n    subHeading ?: string;       //optional data to display under title\n}\n\n\n\n\n@Component({\n  selector: 'gp-list-select-dialog',\n  templateUrl: 'list-select.html',\n  styleUrls: ['./list-select.less']\n})\nexport class ListSelectDialog {\n\n    public  suggested : any[];\n    public  termQuery : string;\n    public  isLoading : boolean;\n\n    //pagination\n    public  currentPage    : number = 0;\n    public  totalSuggested : number = 0;\n\n    private query     : Query;\n    private subject   : Subject<string> = new Subject<string>();\n\n\n    constructor (\n        public dialogRef: MatDialogRef<ListSelectDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: ListSelectDialogData\n    ) {\n        this.query = data.query.clone().page(this.currentPage);\n\n        this.subject.pipe(\n            debounceTime(300),\n            distinctUntilChanged()\n        )\n        .subscribe( term => {\n            this.filterValues(term);\n        });\n    }\n\n    onNoClick () : void {\n        this.dialogRef.close();\n    }\n\n    onTermChange( term : string, immediate ?: boolean) {\n        if(true === immediate) {        //if needing to update without debounce\n            this.filterValues(term);\n        } else {                        //otherwise, debounce change\n            this.subject.next(term);\n        }\n    }\n\n    /**\n     * @param {string} value - user input to filter options with\n     * @return {Promise} resolving array of string options\n     */\n    filterValues ( value: string ) : void {\n\n        this.termQuery = value;\n\n        if(!value) {    //require user to provide input before searching\n            this.suggested = [];\n            this.totalSuggested = 0;\n            return;\n        }\n\n        this.query.q(value);\n\n        this.isLoading = true;\n\n        this.data.service.search(this.query)\n        .then( ( response : SearchResults ) => {\n            let hits = response.results;\n            this.suggested = hits;\n            this.totalSuggested = response.totalResults;\n        })\n        .catch(e => {\n            //display error message indicating an issue searching...\n        }).finally( () => {\n            this.isLoading = false;\n        });\n    }\n\n    addValue ( arg : Item) : void {\n        if(this.isSelected(arg)) {  //if already selected, remove it\n            this.removeValue(arg);  //...\n            return;                 //...\n        }\n        this.data.selected.push( arg );\n    }\n\n    removeValue ( value: Item ) : void {\n        let index = -1;\n        this.data.selected.forEach( (p,i) => { if(p.id === value.id) { index = i; } });\n        if (index >= 0) {\n            this.data.selected.splice(index, 1);\n        }\n    }\n\n    isSelected ( arg : Item ) : boolean {\n        return this.data.selected.length > 0 &&\n            !!this.data.selected.find( (s) => s.id === arg.id);\n    }\n\n\n    /**\n     * @param pageNo - new page number being requested\n     */\n    onPageChange( pageNo : number ) {\n        if(this.currentPage !== pageNo-1 ) {\n            this.query.page( pageNo-1 );\n            this.filterValues( this.termQuery );\n        }\n    }\n\n    getSubHeading(item : Item) : string {\n        let property = this.data.subHeading;\n        let value = item[property];\n        return this.getLabelFrom(value);\n    }\n\n    getLabelFrom( value : any ) : string {\n        if(value === null || typeof(value) === 'undefined') return '';\n        if(Array.isArray(value)) {\n            return (value as []).map( v => this.getLabelFrom(v) ).join(', ');\n        }\n        if(typeof(value) === 'object' && (value.label || value.title || value.prefLabel)) {\n            return value.label || value.title || value.prefLabel;\n        }\n        return '';\n    }\n}\n","import { Inject, Component, HostBinding } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n\n\n\nexport interface MessageDialogData {\n    type     : 'error' | 'warn' | 'info';\n    label   ?: string;\n    message  : string;\n}\n\n\n\n\n@Component({\n  selector: 'gp-message-dialog',\n  templateUrl: 'message.html',\n  styleUrls: ['./message.less'],\n\n})\nexport class MessageDialog {\n\n    @HostBinding('class') className;\n\n    constructor (\n        public dialogRef: MatDialogRef<MessageDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: MessageDialogData\n    ) {\n\n        switch(data.type) {\n            case 'error' : this.className = 'danger'; break;\n            case 'warn' : this.className = 'warning'; break;\n            case 'info' : this.className = 'info'; break;\n        }\n\n    }\n\n    close () : void {\n        this.dialogRef.close();\n    }\n\n    getIconClass() : string {\n        switch(this.data.type) {\n            case 'error' : return \"fas fa-exclamation-circle\";\n            case 'warn'  : return \"fas fa-exclamation-triangle\";\n            case 'info'  : return 'fas fa-info-circle'\n        }\n        return '';\n    }\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n\n@Directive({\n  selector: '[gpIcon]'\n})\nexport class GeoPlatformIconDirective {\n\n    @Input() item : Item;\n    @Input() themed : boolean = true;\n\n    constructor(private el: ElementRef) {\n\n    }\n\n    ngOnInit() {\n        if(!this.item) return;\n        let className = this.item.type.toLowerCase().replace(/^[a-z]+\\:/,'');\n        className = 'icon-' + className;\n        if(this.themed) {\n            className += \" is-themed\";\n        }\n        this.el.nativeElement.className = className;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Config, ItemTypes } from \"@geoplatform/client\";\n\nconst ASSETS = [\n    ItemTypes.DATASET, ItemTypes.SERVICE,   ItemTypes.LAYER,       ItemTypes.MAP,\n    ItemTypes.GALLERY, ItemTypes.COMMUNITY, ItemTypes.APPLICATION, ItemTypes.TOPIC,\n    ItemTypes.WEBSITE\n];\n\n@Injectable()\nexport class ItemHelper {\n\n    constructor() { }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {boolean}\n     */\n    static isAsset(item : any) {\n        if(!item) return false;\n        let type = null;\n        if(typeof(item) === 'string')  type = item as string;\n        else if(item.type) type = item.type;\n        return type && ASSETS.indexOf(type) >= 0;\n    }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} url of icon for the type\n     */\n    static getIcon(item : any) :string {\n        let type = \"dataset\";\n        switch(item.type) {\n            case ItemTypes.CONTACT:         type =  'vcard'; break;\n            default: type = item.type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        }\n        return 'icon-' + type;\n    }\n\n    /**\n     * @param {any} item - either GP item\n     * @return {string} label for the item\n     */\n    static getLabel(item : any) {\n        if(!item || !item.type) return 'Unknown type';\n\n        let type = item.type;\n        switch(type) {\n\n            case ItemTypes.ORGANIZATION :\n            // case ItemTypes.PERSON :\n                return item.label || item.name || \"Un-titled resource\";\n\n            case ItemTypes.CONCEPT :\n            case ItemTypes.CONCEPT_SCHEME :\n                return item.label || item.prefLabel || \"Un-titled resource\";\n\n            case ItemTypes.CONTACT :\n                let fn = item.fullName || '';\n                let pt = item.positionTitle || '';\n                let on = item.orgName || '';\n                let label = fn + (fn.length?' - ':'') + pt + (pt.length?' - ':'') + on;\n                //if none of those fields have been provided, default to email or placeholder\n                if(!label.length) label = item.email || 'Untitled Contact';\n                return label;\n\n            default: return item.label || item.title || \"Un-titled resource\";\n        }\n    }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} label for the item's type\n     */\n    static getTypeLabel(item:any) {\n        if(!item) return 'Unknown Resource Type';\n\n        let type : string = null;\n        if(typeof(item) === 'string') type = item as string;\n        else if(item.type) type = item.type;\n        else return null;\n\n        switch(type) {\n            case ItemTypes.DATASET :\n            case ItemTypes.SERVICE :\n            // case ItemTypes.PERSON :\n            case ItemTypes.ORGANIZATION :\n            case ItemTypes.CONCEPT :\n                return type.replace(/^[a-z]+\\:/i, '');\n            case ItemTypes.CONCEPT_SCHEME : return \"Concept Scheme\";\n            case ItemTypes.WEBSITE : return \"Website\";\n            case ItemTypes.CONTACT : return \"Contact\";\n            default: return type;   //remainder are unprefixed\n        }\n    }\n\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} key (plural) for the item's type\n     */\n    static getTypeKey(item:any) {\n        if(!item) return null;\n\n        let type : string = null;\n        if(typeof(item) === 'string') type = item as string;\n        else if(item.type) type = item.type;\n        else return null;\n\n        switch(type) {\n            //special plurality\n            case ItemTypes.GALLERY : return 'galleries';\n            case ItemTypes.COMMUNITY : return 'communities';\n            //different name\n            case ItemTypes.CONTACT : return 'contacts'; //instead of \"vcards\"\n            //remainder\n            default: return type.replace(/^[a-z]+\\:/i, '').toLowerCase() + 's';\n\n        }\n    }\n\n\n    /**\n     * @param {string} type - item type\n     * @return {string} string path to the type's icon\n     */\n    static determineIconType(type : string) {\n        let name = type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        return `/assets/icons/${name}.svg`;\n    }\n\n    static getItemDetailsUrl(item : any) {\n        if(!item || !item.type || !item.id) return null;\n\n        return Config.portalUrl + '/resources/' + this.getTypeKey(item) + '/' + item.id;\n    }\n\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { ItemTypes } from \"@geoplatform/client\";\n\nimport { ItemHelper } from '../../item-helper';\n\n@Component({\n  selector: 'gp-resource-link',\n  templateUrl: './link.component.html',\n  styleUrls: ['./link.component.less']\n})\nexport class ResourceLinkComponent implements OnInit {\n\n    @Input() item : any;\n    @Input() icon : any;\n    @Input() external : boolean = false;    //open link in new window/tab\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    hasIcon() : boolean {\n        // return this.icon !== null && this.icon !== undefined;\n        return true;\n    }\n\n    getIcon() : string {\n        return ItemHelper.getIcon(this.item);\n    }\n\n    getLabel() : string {\n        return ItemHelper.getLabel(this.item);\n    }\n\n    getType() : string {\n        return ItemHelper.getTypeKey(this.item);\n    }\n\n    getIconClass() : string {\n        let type = ItemHelper.getTypeLabel(this.item);\n        if(\"Contact\" === type) type = 'vcard';\n        if(\"Product\" === type) type = 'imageproduct';\n        return 'icon-' + type.toLowerCase();\n    }\n\n}\n","import {\n    Component, OnInit, OnChanges,\n    Input, Output, EventEmitter, SimpleChanges\n} from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n@Component({\n  selector: 'gp-selected-items',\n  templateUrl: './selected.component.html',\n  styleUrls: ['./selected.component.less']\n})\nexport class SelectedItemsComponent implements OnInit {\n\n    @Input() selected : Item[];\n    @Output() onEvent : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    ngOnChanges( changes : SimpleChanges ) {\n\n    }\n\n    clear() {\n        this.onEvent.emit( { name: 'selected:clear' } );\n    }\n\n    remove( item : Item ) {\n\n    }\n}\n","import {\n    Component, OnInit, Input, Directive, HostBinding\n} from '@angular/core';\nimport {\n    DomSanitizer, SafeResourceUrl, SafeUrl\n} from '@angular/platform-browser';\n\nimport { Config, ItemTypes, Item } from \"@geoplatform/client\";\n\n\n\n\n\ninterface Thumbnail {\n    url ?: string;\n    contentData ?: string;\n    width ?: number;\n    height ?: number;\n    mediaType ?: string;\n}\n\n\n\n@Directive({\n    selector: 'img[fallback]',\n    host: {\n        '(error)':'onImgError()',\n        '(load)': 'onImgLoad()',\n        '[src]':'src'\n     }\n})\nexport class ImageFallbackDirective {\n    @Input() src : string;\n    @Input() fallback : string = `/assets/img-404.png`;\n    @HostBinding('class') className\n    onImgError() { this.src = this.fallback; }\n    onImgLoad() { this.className = 'is-image-loaded'; }\n}\n\n\n\n@Component({\n  selector: 'gp-item-thumbnail',\n  templateUrl: './thumbnail.component.html',\n  styleUrls: ['./thumbnail.component.less']\n})\nexport class ThumbnailComponent implements OnInit {\n\n    @Input() item : Item;\n\n    constructor(private sanitizer: DomSanitizer) { }\n\n    ngOnInit() {\n    }\n\n    getThumbnailUrl() {\n        if(this.item.thumbnail && this.item.thumbnail.url)\n            return this.item.thumbnail.url;\n        return Config.ualUrl + '/api/items/' + this.item.id + '/thumbnail';\n    }\n\n    getBackgroundImage() {\n        if(!this.item || !this.item.thumbnail) {\n            return this.getFallbackBackgroundImage();\n        }\n\n        let thumbnail = this.item.thumbnail;\n        let type = thumbnail.mediaType || 'image/png';\n\n        if(thumbnail.contentData) {\n            let content = thumbnail.contentData;\n            return this.sanitizer.bypassSecurityTrustStyle(`url(data:${type};base64,${content})`);\n        }\n    }\n\n    getFallbackBackgroundImage() {\n        let url = this.getFallbackUrl();\n        return `url(${url})`;\n    }\n\n    isEmpty() {\n        return !this.item || !this.item.thumbnail ||\n            ( !this.item.thumbnail.url && !this.item.thumbnail.contentData );\n    }\n\n    hasURL() {\n        return this.item.thumbnail && !!this.item.thumbnail.url;\n    }\n\n    hasContentData() {\n        return this.item.thumbnail && !!this.item.thumbnail.contentData && !this.item.thumbnail.url;\n    }\n\n    getFallbackUrl() {\n        return Config.ualUrl + '/api/items/' + this.item.id + '/thumbnail';\n    }\n}\n","\nimport { Item } from \"@geoplatform/client\";\n\n/**\n *\n */\nexport class GeoPlatformError extends Error {\n\n    private _label: string;\n    private _code: number;\n    private _item : Item;\n\n    public get label() { return this._label; }\n    public set label(value: string) { this._label = value; }\n\n    public get code() { return this._code; }\n    public set code(value: number) { this._code = value; }\n\n    public get item() { return this._item; }\n    public set item(value : Item) { this._item = value; }\n\n\n    constructor(\n        message: string,\n        label ?: string,\n        code ?: number,\n        item ?: Item\n    ) {\n        super(message);\n        this.label = label;\n        this.code  = code;\n        this.item  = item;\n    }\n\n    static from(error : Error) : GeoPlatformError {\n        if(error instanceof GeoPlatformError)\n            return error as GeoPlatformError;\n\n        let gpe = new GeoPlatformError(error.message);\n        gpe.label = \"An error occurred\";\n        gpe.code = 500;\n        return gpe;\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\n\nimport { GeoPlatformError } from './error';\n\n@Injectable()\nexport class GeoPlatformErrorService {\n\n    private updateSubject: BehaviorSubject<GeoPlatformError> = new BehaviorSubject<GeoPlatformError>(null);\n\n    error$: Observable<GeoPlatformError> = this.updateSubject.asObservable();\n\n    setError(error: Error) {\n        let gpe = GeoPlatformError.from(error);\n        this.updateSubject.next(gpe);\n    }\n}\n","\n/**\n *\n */\nexport const EventTypes = {\n    CLOSE       : Symbol( \"Close\"      ),   //\n    OPEN        : Symbol( \"Open\"       ),   //\n    RESET       : Symbol( \"Reset\"      ),   // clearing query filters\n    SELECT      : Symbol( \"Select\"     ),   // selecting item(s)\n    SELECT_NONE : Symbol( \"SelectNone\" ),   // clearing selections\n    QUERY       : Symbol( \"Query\"      ),   // change to query\n    ADDED       : Symbol( \"Added\"      ),   //\n    REMOVED     : Symbol( \"Removed\"    ),   //\n    CHANGED     : Symbol( \"Changed\"    ),   //\n    ERROR       : Symbol( \"Error\"      )    //\n};\n\n\n\n/**\n * Search Event\n *\n */\nexport class SearchEvent {\n\n    private type : Symbol;\n    private options : { [key:string] : any } = {} as { [key:string] : any };\n\n    constructor(type : Symbol,options ?: { [key:string] :any }) {\n        this.type = type;\n        if(options) {\n            Object.assign(this.options, options);\n        }\n    }\n    getType() : Symbol { return this.type; }\n    getOptions() : { [key:string] : any } { return this.options; }\n\n}\n","\n\nimport {\n    Item, Asset,\n    Map, Layer, Service, Dataset, Gallery, Community, Concept,\n    ConceptScheme, Organization, Contact,\n    ItemTypes\n} from '@geoplatform/client';\n\nimport { ItemHelper } from './item-helper';\n\n\nconst Visibilities : any = {\n    PUBLIC : 'public',\n    PRIVATE : 'private'\n};\n\nconst Statuses : any = {\n    SUBMITTED : 'submitted'\n};\n\n\n\nfunction createItem(type, opts ?: {[key:string]:any}) : any {\n    return Object.assign({\n        type:           type,\n        uri:            null,\n        label:          \"New Item\",\n        description:    \"This item needs a description\",\n        resourceTypes:  [],\n        createdBy:      null,\n        lastModifiedBy: null\n    }, opts||{});\n}\n\nfunction createAsset(type, opts ?: {[key:string]:any}) : any {\n    let options : {[key:string]:string} = Object.assign({\n        keywords        : [],\n        alternateTitles : [],\n        purpose         : null,\n        themes          : [],\n        contacts        : [],\n        publishers      : [],\n        contributors    : [],\n        distributions   : [],\n        classifiers     : {},\n        landingPage     : null,\n        status          : Statuses.SUBMITTED,\n        visibility      : Visibilities.PUBLIC,\n        identifiers     : [] as string[],\n        extent          : { minx: -179, miny: -89, maxx: 179, maxy: 89 },\n        temporal        : { startDate: null, endDate: null },\n        statistics      : { numViews: 0, numLikes: 0 },\n        usedBy          : [],\n        related         : [],\n        rights          : []\n    }, opts||{});\n    let item = createItem(type, options);\n    return item as Asset;\n}\n\n\n\nfunction createMap() : Map {\n    let obj = createAsset(ItemTypes.MAP, {\n        layers      : [],\n        baseLayer   : null,\n        annotations : {},\n        thumbnail   : {\n            label       : null,\n            url         : null,\n            contentData : null,\n            width       : 0,\n            height      : 0\n        }\n    });\n    return obj as Map;\n}\n\n\nfunction createLayer( service ?: Service ) : Map {\n    let services = service ? [service] : [];\n    let obj = createAsset(ItemTypes.LAYER, {\n        subLayers   : [],\n        parentLayer : null,\n        services    : services,\n        layerName   : null,\n        layerType   : null,\n        legend      : null\n    });\n    return obj as Map;\n}\n\nfunction createService() : Service {\n    let obj = createAsset(ItemTypes.SERVICE, {\n        datasets    : [],\n        serviceType : null,\n        href        : null\n    });\n    return obj as Service;\n}\n\nfunction createDataset() : Dataset {\n    let obj = createAsset(ItemTypes.DATASET, { services : [] });\n    return obj as Dataset;\n}\n\nfunction createGallery() : Gallery {\n    let obj = createAsset(ItemTypes.GALLERY, { items : [] });\n    return obj as Gallery;\n}\n\nfunction createCommunity() : Community {\n    let obj = createAsset(ItemTypes.COMMUNITY);\n    return obj as Community;\n}\n\nfunction createConcept() : Concept {\n    let obj = createItem(ItemTypes.CONCEPT, { scheme : null });\n    return obj as Concept;\n}\n\nfunction createConceptScheme() : ConceptScheme {\n    let obj = createItem(ItemTypes.CONCEPT_SCHEME);\n    return obj as ConceptScheme;\n}\n\n\nfunction createOrg() : Organization {\n    let obj = createItem(ItemTypes.ORGANIZATION, { subOrgOf : null });\n    return obj as Organization;\n}\n\nfunction createContact() : Contact {\n    let obj = createItem(ItemTypes.CONTACT, {\n        fullName : null,\n        email    : null,\n        tel      : null,\n        fax      : null,\n        address  : {\n            street1: null,\n            street2: null,\n            city:    null,\n            state:   null,\n            zip:     null\n        }\n    });\n    return obj as Contact;\n}\n\n\n\n\n\n\nfunction defaultArrayValue(item, property) {\n    if(!item || !property) return;\n    if( item[property] === null || item[property] === undefined ||\n        typeof(item[property]) === 'undefined' )\n        item[property] = [];\n}\n\nfunction defaultToNullValue(item, property) {\n    if(!item || !property) return;\n    if( typeof(item[property]) === 'undefined' )\n        item[property] = null;\n}\n\n\n\nexport class ItemFactory {\n\n    static create(type) {\n        switch(type) {\n            case ItemTypes.MAP : return createMap();\n            case ItemTypes.LAYER : return createLayer();\n            case ItemTypes.SERVICE : return createService();\n            case ItemTypes.DATASET : return createDataset();\n            case ItemTypes.GALLERY : return createGallery();\n            case ItemTypes.COMMUNITY: return createCommunity();\n            case ItemTypes.CONCEPT : return createConcept();\n            case ItemTypes.CONCEPT_SCHEME: return createConceptScheme();\n            case ItemTypes.ORGANIZATION: return createOrg();\n            case ItemTypes.CONTACT: return createContact();\n            default: return null;\n        }\n    }\n\n    static fix(item) {\n\n        defaultArrayValue(item, 'resourceTypes');\n\n        if(ItemHelper.isAsset(item)) {\n            defaultArrayValue(item, 'keywords');\n            defaultArrayValue(item, 'alternateTitles');\n            defaultArrayValue(item, 'themes');\n            defaultArrayValue(item, 'contacts');\n            defaultArrayValue(item, 'publishers');\n            defaultArrayValue(item, 'contributors');\n            defaultArrayValue(item, 'distributions');\n            defaultArrayValue(item, 'identifiers');\n            defaultArrayValue(item, 'usedBy');\n            defaultArrayValue(item, 'related');\n            defaultArrayValue(item, 'accessRights');\n\n            defaultToNullValue(item, 'purpose');\n            defaultToNullValue(item, 'landingPage');\n            defaultToNullValue(item, 'status');\n            defaultToNullValue(item, 'visibility');\n\n            if(!item.temporal) {\n                item.temporal = {startDate: null, endDate: null};\n            }\n            if(!item.extent) {\n                item.extent = { minx: -179, miny: -89, maxx: 179, maxy: 89 };\n            }\n        }\n    }\n\n}\n","\nimport { TrackingService } from '@geoplatform/client';\nimport { RPMService      } from '@geoplatform/rpm/src/iRPMService'\n\n\nlet trackingServiceInst : TrackingService;\n\nexport function TrackingServiceFactory ( rpm : RPMService ) {\n    if(!trackingServiceInst) {\n        trackingServiceInst = new TrackingService({ provider: rpm });\n    }\n    return trackingServiceInst;\n}\n","\nimport { NgModule, Pipe, PipeTransform } from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n\n\n@Pipe({name: 'arrayedItems'})\nexport class ArrayedItemsPipe implements PipeTransform {\n    transform(value: Item[], property:string, num?: number): string {\n        let max = isNaN(num) || num > value.length ? value.length : num;\n        return value.slice(0, max).map( v => v[property] ).join(' ');\n    }\n}\n\n\n/*\n * Limits an array of entries to a maximum number\n * Usage:\n *   array | limitTo:num\n * Example:\n *   {{ ['one','two','three'] | limitTo:2 }}\n */\n@Pipe({name: 'limitTo'})\nexport class LimitToPipe implements PipeTransform {\n    transform(value: any[], num: number, start ?: number): any[] {\n        if(value && value.length > num) {\n            let st = isNaN(start) ? 0 : start;\n            if(st > 0) num += st;\n            return value.slice( st, num);\n        }\n        return value;\n    }\n}\n\n\n\n/*\n *\n * Usage:\n *   array | sortBy : property\n * Example:\n *   {{ ['one','two','three'] | limitTo:2 }}\n */\n@Pipe({name: 'sortBy'})\nexport class SortByPipe implements PipeTransform {\n    transform(value: any[], property: string): any[] {\n        return value.sort( (a,b) => {\n            return a[property] > b[property] ? -1 : 1;\n        });\n    }\n}\n\n\n\n/*\n * Formats a GeoPlatform Item's type to a friendly label\n * Usage:\n *   type | friendlyType\n * Example:\n *   {{ \"dcat:Dataset\" | friendlyType }}\n *   formats to: \"Dataset\"\n*/\n@Pipe({name: 'friendlyType'})\nexport class FriendlyTypePipe implements PipeTransform {\n    transform(value: string): string {\n        if(!value || typeof(value) !== 'string' || value.length === 0) return value;\n        let name = value;\n        let idx = value.indexOf(\":\");\n        if(~idx) name = value.substring(idx+1);\n        if('VCard' === name) name = 'Contact';\n        return name;\n    }\n}\n\n\n\n\n\n/*\n * Replaces underscores between words with spaces\n * Usage:\n *   type | fixLabel\n * Example:\n *   {{ \"One_Two_Three\" | fixLabel }}\n *   formats to: \"One Two Three\"\n*/\n@Pipe({name: 'fixLabel'})\nexport class FixLabelPipe implements PipeTransform {\n    transform(value: string): string {\n        if(!value || typeof(value) !== 'string' || !value.length) return 'Untitled';\n        let result = value.replace(/([a-z])([A-Z])/g, \"$1 $2\").replace(/_/g, \" \").trim();\n        return result.charAt(0).toUpperCase() + result.slice(1);\n    }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport {\n    Router, ActivatedRouteSnapshot, RouterStateSnapshot, Resolve\n} from '@angular/router';\nimport { Observable, of, empty } from 'rxjs';\nimport {\n    Item, ItemService,\n    TrackingService, TrackingTypes, TrackingEventFactory\n} from '@geoplatform/client';\nimport { ItemFactory }       from './item-factory';\nimport { GeoPlatformError }           from './error';\n\n@Injectable(/*{ providedIn: 'root' }*/)\nexport class ItemResolver implements Resolve<Item> {\n\n    constructor(\n        @Inject(ItemService) private service : ItemService,\n        @Inject(TrackingService) private trackingService : TrackingService\n    ) {\n    }\n\n    resolve(\n        route: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<any>|Promise<any>|any {\n\n        let id = route.paramMap.get('id');\n        let opts : any = {};\n        let version = route.paramMap.get(\"version\");\n        if(version) opts.version = version;\n        return this.service.get(id, opts)\n        .then( item => {\n            if(this.trackingService) {\n                let event = TrackingEventFactory(TrackingTypes.VIEWED, item);\n                this.trackingService.logEvent(event);\n            }\n            return item;\n        })\n        .catch( (e : Error) => of( e ) );\n    }\n}\n\n\n@Injectable(/*{ providedIn: 'root' }*/)\nexport class VersionResolver implements Resolve<string> {\n\n    constructor() { }\n\n    resolve(\n        route: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<any>|Promise<any>|any {\n        let version = route.paramMap.get(\"version\");\n        return Promise.resolve(version||null);\n    }\n}\n\n\n\n@Injectable()\nexport class NewItemResolver implements Resolve<Item> {\n\n    constructor(\n        private router: Router,\n        // private errorService: ErrorService\n    ) {\n\n    }\n\n    resolve( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ): Observable<Item> {\n        let type = route.params.type;\n        let item = ItemFactory.create(type);\n        if(!item) {\n            let gpe = new GeoPlatformError(`Type ${type} is unsupported`, \"Unsupported Type\", 400);\n            // this.errorService.setError(gpe);\n            this.router.navigateByUrl('error', {skipLocationChange:false});\n            return empty();\n        } else {\n            return of(item);\n        }\n    }\n}\n\n\n\n@Injectable()\nexport class ErrorResolver implements Resolve<Error> {\n    constructor(private router: Router) {}\n    resolve( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ): Observable<Error> {\n        let type = route.params.type;\n        let msg = \"An error has occurred\";\n        if(\"unsupported\" === type)\n            msg = `Type ${type} is not supported`;\n        else if(\"404\" === type)\n            msg = \"Item not found\";\n        let error = new Error(msg);\n        // error.error = \"Unsupported Type\";\n        return of(error);\n    }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n    MatInputModule, MatButtonModule, MatIconModule, MatDialogModule\n} from '@angular/material';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\n\n// Adds window.RPMService to global namespace\nimport { RPMServiceFactory } from '@geoplatform/rpm/dist/js/geoplatform.rpm.browser.js';\nimport { RPMService }        from '@geoplatform/rpm/src/iRPMService'\n// import { RPMStatsService }   from './rpm/rpmstats.service';\n// let RPMStatsServiceFactory = (http: HttpClient) => {\n//     return new RPMStatsService(environment.rpmUrl, environment.rpmToken, http)\n// }\n\n\nimport { TrackingService } from '@geoplatform/client';\nimport { TrackingServiceFactory } from './tracking.factory';\n\n\nimport { AppAuthService, LoginButtonComponent, LoginModalComponent } from './auth';\nimport { ListSelectDialog, MessageDialog } from './dialogs/';\n\nimport {\n    ImageFallbackDirective,\n    ThumbnailComponent,\n    ResourceLinkComponent,\n    SelectedItemsComponent\n} from './components';\n\nimport {\n    ArrayedItemsPipe,\n    LimitToPipe,\n    SortByPipe,\n    FriendlyTypePipe,\n    FixLabelPipe\n} from './pipes';\nimport { GeoPlatformIconDirective } from './directives/icon';\nimport {\n    ItemResolver, NewItemResolver, ErrorResolver, VersionResolver\n} from './resolvers';\nimport { GeoPlatformErrorService  } from './error.service';\nimport { ItemHelper               } from './item-helper';\n\n@NgModule({\n    imports: [\n        RouterModule,\n        CommonModule,\n        FormsModule,\n        MatInputModule, MatButtonModule, MatIconModule, MatDialogModule,\n        NgbModule\n    ],\n    exports: [\n        ListSelectDialog,\n        MessageDialog,\n        ImageFallbackDirective, ThumbnailComponent,\n        SelectedItemsComponent,\n        ResourceLinkComponent,\n        LoginButtonComponent, LoginModalComponent,\n\n        ArrayedItemsPipe,\n        LimitToPipe,\n        SortByPipe,\n        FriendlyTypePipe,\n        FixLabelPipe,\n\n        GeoPlatformIconDirective\n    ],\n    declarations: [\n        ListSelectDialog,\n        MessageDialog,\n        ImageFallbackDirective, ThumbnailComponent,\n        SelectedItemsComponent,\n        ResourceLinkComponent,\n        LoginButtonComponent, LoginModalComponent,\n\n        ArrayedItemsPipe,\n        LimitToPipe,\n        SortByPipe,\n        FriendlyTypePipe,\n        FixLabelPipe,\n\n        GeoPlatformIconDirective\n    ],\n    providers: [\n        AppAuthService,\n        ErrorResolver,\n        ItemResolver,\n        NewItemResolver,\n        VersionResolver,\n        GeoPlatformErrorService,\n        ItemHelper,\n        // {\n        //     provide: RPMStatsService,\n        //     useFactory: RPMStatsServiceFactory,\n        //     deps: [ HttpClient ]\n        // },\n        {\n            provide: RPMService,\n            useValue: RPMServiceFactory()\n        },\n        {\n            provide: TrackingService,\n            useFactory: TrackingServiceFactory,\n            deps: [ RPMService]\n        }\n    ],\n    entryComponents: [\n        ListSelectDialog,\n        MessageDialog\n    ]\n})\nexport class GeoPlatformCommonModule {}\n","\n/*\n    Version of the library exposed to consumers.\n    Long-term this value should be auto-set to be whatever is set in package.json\n */\nexport const GeoPlatformCommonVersion = \"1.0.0\";\n\n// import Polyfills from \"./shared/polyfills\";\n// Polyfills();\n\nexport const DefaultSortOptions = [\n    { value: \"_score,desc\",     label: \"Relevance\"  },\n    { value: \"modified,desc\",   label: \"Most Recently Modified\"  },\n    { value: \"modified,asc\",    label: \"Least Recently Modified\" },\n    { value: \"label,asc\",       label: \"Title [A-Z]\" },\n    { value: \"label,desc\",      label: \"Title [Z-A]\" },\n    { value: \"reliability,asc\", label: \"Reliability\" }\n];\n\nexport * from './auth';\nexport * from './dialogs';\nexport * from './directives';\nexport * from './components';\nexport * from './logger';\nexport * from './error.service';\nexport * from './error';\nexport * from './event';\nexport * from './item-factory';\nexport * from './item-helper';\nexport * from './map-types';\nexport * from './pipes';\nexport * from './resolvers';\nexport * from './module';\nexport * from './tracking.factory';\n","export const MapTypes = {\n    GeoPlatform : { label: \"GeoPlatform Map\", uri: 'http://www.geoplatform.gov/ont/openmap/GeoplatformMap' },\n    AGOL        : { label: \"AGOL Web Map\",    uri: 'http://www.geoplatform.gov/ont/openmap/AGOLMap'        },\n    WMS         : { label: \"WMS Map\",         uri: \"http://www.geoplatform.gov/ont/openmap/WMSMap\"         },\n    MapBox      : { label: \"Map Box Map\",     uri: 'http://www.geoplatform.gov/ont/openmap/MapBoxMap'      }\n};\n"]}