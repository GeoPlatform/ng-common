{"version":3,"file":"geoplatform-common.umd.js","sources":["../../node_modules/tslib/tslib.es6.js","ng://@geoplatform/common/logger.ts","ng://@geoplatform/common/auth/authenticated.component.ts","ng://@geoplatform/common/auth/auth.factory.ts","ng://@geoplatform/common/auth/auth.service.ts","ng://@geoplatform/common/auth/login.ts","ng://@geoplatform/common/dialogs/list-select/list-select.ts","ng://@geoplatform/common/dialogs/message/message.ts","ng://@geoplatform/common/directives/icon.ts","ng://@geoplatform/common/components/header/header.component.ts","ng://@geoplatform/common/item-helper.ts","ng://@geoplatform/common/components/link/link.component.ts","ng://@geoplatform/common/event.ts","ng://@geoplatform/common/components/selected/selected.component.ts","ng://@geoplatform/common/components/thumbnail/thumbnail.component.ts","ng://@geoplatform/common/error.ts","ng://@geoplatform/common/error.service.ts","ng://@geoplatform/common/item-factory.ts","ng://@geoplatform/common/map-types.ts","ng://@geoplatform/common/pipes.ts","ng://@geoplatform/common/resolvers.ts","ng://@geoplatform/common/search/search.service.ts","ng://@geoplatform/common/search/item/item-adapter.ts","ng://@geoplatform/common/search/item/item.component.ts","ng://@geoplatform/common/search/results/results.component.ts","ng://@geoplatform/common/search/filters/item-filter.component.ts","ng://@geoplatform/common/search/filters/community/community.component.ts","ng://@geoplatform/common/search/filters/creator/creator.component.ts","ng://@geoplatform/common/search/filters/keyword/keyword.component.ts","ng://@geoplatform/common/search/filters/publisher/publisher.component.ts","ng://@geoplatform/common/search/filters/scheme/scheme.component.ts","ng://@geoplatform/common/search/filters/semantic/semantic.dialog.ts","ng://@geoplatform/common/search/filters/semantic/semantic.component.ts","ng://@geoplatform/common/search/filters/service-types/service-types.component.ts","ng://@geoplatform/common/search/filters/similarity/similarity.component.ts","ng://@geoplatform/common/search/filters/theme/theme.component.ts","ng://@geoplatform/common/search/filters/topic/topic.component.ts","ng://@geoplatform/common/search/filters/type/type.component.ts","ng://@geoplatform/common/search/filters/modified/modified.component.ts","ng://@geoplatform/common/tracking.factory.ts","ng://@geoplatform/common/module.ts","ng://@geoplatform/common/public_api.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\nimport { Config } from '@geoplatform/client';\n\nconst LEVELS = [\n    \"error\",\n    \"warn\",\n    \"info\",\n    \"debug\"\n];\n\nclass Logger {\n\n    private level : string = 'error';\n\n    constructor() {\n        this.setLevel(Config.logLevel || Config.LOG_LEVEL);\n    }\n\n    setLevel(level : string) {\n        if( level && LEVELS.indexOf(level) >= 0 ) {\n            this.level = level;\n        }\n        this.info(\"Log Level : \" + this.level);\n    }\n\n    isVisible(level : string) : boolean {\n        return LEVELS.indexOf(this.level) >= LEVELS.indexOf(level);\n    }\n\n    log(arg, ...addl) {\n        let msg = this.toStr(arg);\n        msg += addl.map( a => this.toStr(a) ).join('');\n        console.log(msg);\n    }\n\n    debug(arg, ...addl) {\n        if(!this.isVisible('debug')) return;\n        let msg = \"[DEBUG] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    info(arg, ...addl) {\n        if(!this.isVisible('info')) return;\n        let msg = \"[INFO] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    warn(arg, ...addl) {\n        if(!this.isVisible('warn')) return;\n        let msg = \"[WARN] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    error(arg, ...addl) {\n        let msg = \"[ERROR] \" + this.toStr(arg);\n        this.log(msg, ...addl);\n    }\n\n    toStr(arg) {\n        if(null === arg || typeof(arg) === 'undefined') return '';\n        if(typeof(arg) ===  'string') return arg;\n        return JSON.stringify(arg);\n    }\n}\n\nconst logger = new Logger();\n\nexport {\n    logger as default,\n    logger\n};\n","import { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { AuthService, GeoPlatformUser } from '@geoplatform/oauth-ng/angular';\n\nimport { AppAuthService } from './auth.service';\nimport { logger } from '../logger';\n\nconst EDIT_ROLE = 'gp_editor';\n\n\n/**\n * Base class that can be used to hook authentication notifications into\n * Angular @Component instances.\n */\nexport abstract class AuthenticatedComponent {\n\n    public user : GeoPlatformUser;\n    private gpAuthSubscription : Subscription;\n\n    constructor(protected authService : AppAuthService) {\n    }\n\n    //facade methods to mimic @Component lifecycle methods in case sub-classes\n    // want to use consistent names\n    ngOnInit() { this.init(); }\n    ngOnDestroy() { this.destroy(); }\n\n    /**\n     * Sub-classes must invoke this method in order to register listeners\n     * for authentication events\n     */\n    init() {\n\n        let obs : Observer<GeoPlatformUser> = {\n            next : (value: GeoPlatformUser) => {\n                logger.debug(\"AuthenticatedComponent : User changed to \" + (value ? value.username : 'null'));\n                this.user = value;\n                this.onUserChange(this.user);\n            },\n            error : (err: any) => {\n                logger.error(\"Unable to get authenticated user info: \" +\n                    (err as Error).message);\n            },\n            complete : () => { }\n        };\n\n        this.gpAuthSubscription = this.authService.subscribe( obs );\n\n        //for components that initialize AFTER a user has changed auth state,\n        // we need to fetch the current user details\n        this.user = this.authService.getUser();\n        this.onUserChange(this.user);\n    }\n\n    /**\n     * Sub-classes must invoke this method in order to de-register listeners\n     * for authentication events and clean up internals\n     */\n    destroy() {\n        if(this.gpAuthSubscription) {\n            this.gpAuthSubscription.unsubscribe();\n            this.gpAuthSubscription = null;\n        }\n        this.user = null;\n        this.authService = null;\n    }\n\n    /** @return {boolean} */\n    public isAuthenticated() : boolean { return !!this.user; }\n\n    /** @return {GeoPlatformUser} */\n    public getUser() : GeoPlatformUser { return this.user; }\n\n    /** @return {string} JWT token associated with the current user or null */\n    public getAuthToken() : string { return this.authService.getToken(); }\n\n    /** @return Promise containing current user or null */\n    public checkAuth() : Promise<GeoPlatformUser> { return this.authService.check(); }\n\n    /**\n     * @param item - optional object the user may be able to edit\n     * @return boolean indicating whether user can edit the requested item or is an editor if no item was specified\n     */\n    public canUserEdit(item ?: any) : boolean {\n        if(!this.user) return false;\n        if(this.user.isAuthorized(EDIT_ROLE)) return true;\n        return this.isAuthorOf(item);\n    }\n\n    /**\n     * @param item - object the user may be the owner of\n     * @return boolean indicating if the user is the associated creator/owner of the item\n     */\n    public isAuthorOf(item ?: any) : boolean {\n        if(!this.user || !item) return false;\n        return item.createdBy && item.createdBy === this.user.username;\n    }\n\n    /**\n     * @param {GeoPlatformUser} user - authenticated user object or null if not authed\n     */\n    protected onUserChange(user : GeoPlatformUser) { /* implement in sub-classes */ }\n\n\n}\n","import { ngGpoauthFactory, AuthService } from '@geoplatform/oauth-ng/angular';\n\nimport { logger } from \"../logger\";\n\n\n//should be exported by gp-ngoauth but isn't so we are declaring it here...\ninterface AuthConfig {\n    AUTH_TYPE?: 'grant' | 'token'\n    IDP_BASE_URL?: string\n    APP_BASE_URL?: string\n    ALLOW_SSO_LOGIN?: boolean\n    APP_ID?: boolean\n    ALLOW_IFRAME_LOGIN?: boolean\n    FORCE_LOGIN?: boolean\n    CALLBACK?: string\n    LOGIN_URL?: string\n    LOGOUT_URL?: string\n    ALLOW_DEV_EDITS?: boolean\n};\nconst AUTH_KEYS = [\n    'AUTH_TYPE', 'IDP_BASE_URL', 'APP_BASE_URL', 'ALLOW_SSO_LOGIN',\n    'APP_ID', 'ALLOW_IFRAME_LOGIN', 'FORCE_LOGIN', 'CALLBACK',\n    'LOGIN_URL', 'LOGOUT_URL', 'ALLOW_DEV_EDITS'\n];\n\n\n\n\nvar authService : AuthService = null;\n\n\nexport function authServiceFactory( environment : any ) {\n\n    //once service has been built, keep using it\n    if(authService) return authService;\n\n    //\n    //but the first time it's requested, it has to be built using env settings\n    let authSettings : AuthConfig = {};\n\n    let gpGlobal = (<any>window).GeoPlatform;\n    if(gpGlobal && gpGlobal.config && gpGlobal.config.auth) {\n        //auth library settings made available through WP via 'GeoPlatform' global\n        //https://geoplatform.atlassian.net/browse/DT-2307\n        authSettings = gpGlobal.config.auth;\n    } else {\n        authSettings.APP_BASE_URL = environment.wpUrl || '';\n        AUTH_KEYS.forEach( key => {\n            let v = environment[key];\n            if(typeof(v) !== 'undefined') {\n                if(~key.indexOf('ALLOW') || ~key.indexOf('FORCE')) {\n                    v = (v === true || v === 'true');\n                }\n                authSettings[key] = v;\n            }\n        });\n    }\n\n    logger.info(\"Configuring OAuth using: \");\n    logger.info(authSettings);\n\n    authService = ngGpoauthFactory(authSettings);\n    return authService;\n};\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { Config } from '@geoplatform/client';\nimport { RPMService } from '@geoplatform/rpm/src/iRPMService'\n\nimport {\n    ngGpoauthFactory, AuthService, GeoPlatformUser\n} from '@geoplatform/oauth-ng/angular';\n\nimport { authServiceFactory } from './auth.factory';\nimport { logger } from \"../logger\";\n\n\n\n@Injectable({providedIn: 'root'})\nexport class AppAuthService {\n\n    private user : GeoPlatformUser;\n    private user$ : Subject<GeoPlatformUser>;\n    private observers : { [key:string]: Observer<GeoPlatformUser> } =\n        {} as { [key:string]: Observer<GeoPlatformUser> };\n    private gpAuthSubscription : Subscription;\n    private authService : AuthService;\n    private rpm: RPMService;\n\n\n\n    constructor( @Inject(RPMService) rpm : RPMService ) {\n        this.authService = authServiceFactory(Config);\n        this.rpm = rpm;\n        this.init();\n    }\n\n\n    init() {\n\n        this.user$ = new Subject<GeoPlatformUser>();\n\n        if(!this.authService) return;\n\n        const sub = this.authService.getMessenger().raw();\n        this.gpAuthSubscription = sub.subscribe(msg => {\n            logger.debug(\"Received Auth Message: \" + msg.name);\n            switch(msg.name){\n                case 'userAuthenticated': this.onUserChange(msg.user); break;\n                case 'userSignOut': this.onUserChange(null); break;\n            }\n        });\n\n        this.authService.getUser().then( user => { this.onUserChange(user); });\n\n    }\n\n    onUserChange(user : GeoPlatformUser) {\n        logger.debug(\"AuthService.onUserChange() : User is \" + (user ? user.username : 'N/A'));\n        this.user = user;\n        // this.rpm.setUserId( user ? user.id : null);\n        this.user$.next(user);\n    }\n\n    /**\n     *\n     */\n    getMessenger() : Subject<any>{\n        return this.authService ? this.authService.getMessenger().raw() : null;\n    }\n\n\n    isAuthenticated() : boolean {\n        return !!this.user;\n    }\n\n    getUser() : GeoPlatformUser {\n        return this.user;\n    }\n\n    getToken() : string {\n        return this.authService ? this.authService.getJWT() : null;\n    }\n\n    /**\n     * Check the underlying authentication mechanism endpoint to validate the\n     * current JWT token (if one exists) is not expired or revoked.\n     * @return GeoPlatformUser or null\n     */\n    check() : Promise<GeoPlatformUser> {\n        if(!this.authService) return Promise.resolve(null);\n        return this.authService.checkWithClient()\n        .then( token => this.authService.getUser() )\n        .then( user => {\n            setTimeout( () => { this.onUserChange(user); },100 );\n            return user;\n        });\n    }\n\n    login() {\n        this.authService.login();\n    }\n\n    logout() {\n        this.authService.logout();\n    }\n\n    /**\n     *\n     */\n    subscribe( callback : Observer<GeoPlatformUser> ) : Subscription {\n        return this.user$.subscribe( callback );\n    }\n\n\n    dispose() {\n        if(this.gpAuthSubscription) {\n            this.gpAuthSubscription.unsubscribe();\n            this.gpAuthSubscription = null;\n        }\n        this.user = null;\n        this.user$ = null;\n        this.observers = null;\n        this.authService = null;\n    }\n}\n","\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Config } from '@geoplatform/client';\nimport { AuthService, GeoPlatformUser } from '@geoplatform/oauth-ng/angular';\n\nimport { AuthenticatedComponent } from './authenticated.component';\nimport { AppAuthService } from './auth.service';\nimport { logger } from '../logger';\n\n\n@Component({\n    selector: 'gp-login-button',\n    styles: [\n        `\n        .btn-login.btn-link {\n            padding: .375em .75em;\n            border-right: none;\n            margin: 0 0.5em;\n            font-weight: 700;\n        }\n        .btn-login.btn-link:hover {\n            background-color: #fff;\n            text-decoration: none;\n            color: #333;\n        }\n        .o-account-details {\n            display: flex;\n            justify-content: space-between;\n            align-items: stretch;\n            margin-top: -0.5em;\n            padding: 1em;\n            background: #185b8a;\n            color: #fff;\n        }\n        .o-account-details__avatar {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 6em;\n            margin-right: 0.25em;\n            padding-top: 10px;\n            width: 100px;\n            height: 100px;\n            overflow: hidden;\n            background: #fff;\n            color: #777;\n            border-radius: 100%;\n        }\n        .dropdown-menu .btn.btn-link {\n            display: inline-block;\n            padding: 0.375rem 0.75rem;\n            border-right: none;\n        }\n        .dropdown-menu .btn.btn-link:after {\n            content: '';\n        }\n        .btn.btn-logout {\n            padding: 0.375rem 0.75rem;\n            margin-bottom: -0.5em;\n        }\n        `\n    ],\n    template:\n    `\n    <div class=\"btn-account btn-group\">\n        <!-- not logged in yet -->\n        <a class=\"btn-login btn btn-link\" (click)=\"login()\" *ngIf=\"!user\">Sign In</a>\n\n        <!-- logged in -->\n        <button type=\"button\" class=\"btn-login btn btn-link dropdown-toggle\" data-toggle=\"dropdown\"\n            aria-expanded=\"false\" *ngIf=\"user\">\n            <span class=\"fas fa-user\"></span>\n            <span class=\"d-xs-none\">{{user?.name}}</span>\n            <span class=\"caret\"></span>\n        </button>\n        <div class=\"dropdown-menu dropdown-menu-right\" role=\"menu\" *ngIf=\"user\">\n            <div class=\"o-account-details\">\n                <div class=\"o-account-details__avatar\">\n                    <span class=\"fas fa-user\"></span>\n                </div>\n                <div class=\"flex-1\">\n                    <div class=\"a-heading\">\n                        {{user?.name}}\n                        <small><em>({{user?.username}})</em></small>\n                    </div>\n                    <div class=\"u-text--sm\">{{user?.email}}</div>\n                    <div class=\"u-text--sm\">{{user?.org}}</div>\n                </div>\n            </div>\n            <div class=\"d-flex flex-justify-around u-mg-top--sm\">\n                <a class=\"btn btn-sm btn-link\" target=\"_blank\" href=\"{{idpBaseUrl}}/profile\">\n                    <span class=\"fas fa-pencil-alt\"></span> Edit Profile\n                </a>\n                <a class=\"btn btn-sm btn-link\" target=\"_blank\" href=\"{{idpBaseUrl}}/updatepw\">\n                    <span class=\"fas fa-key\"></span> Change Password\n                </a>\n            </div>\n            <div class=\"u-mg-top--sm\">\n                <a class=\"btn-logout btn btn-light btn-block\" (click)=\"logout()\">\n                    <span class=\"fas fa-power-off\"></span> Sign Out\n                </a>\n            </div>\n        </div>\n    </div>\n    `\n\n})\nexport class LoginButtonComponent extends AuthenticatedComponent implements OnInit {\n\n    public idpBaseUrl : string = Config.IDP_BASE_URL || 'https://accounts.geoplatform.gov';\n    public user : GeoPlatformUser =  null;\n\n    constructor( authService : AppAuthService ) {\n        super(authService);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n\n        // this.authService.check();\n    }\n\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n\n    onUserChange(user : GeoPlatformUser) {\n        super.onUserChange(user);\n        logger.debug(\"LoginButton.onUserChange() : User is \" + (user ? user.username : 'null'));\n        this.user = user;\n    }\n\n    login() {\n        this.authService.login();\n    }\n\n    logout() {\n        this.authService.logout();\n    }\n\n}\n\n\n\n\n\n\n\n\n\n@Component({\n    selector: 'gp-login-modal',\n    styles: [\n    `\n        .gpLoginCover {\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            background: rgba(0,0,0,0.6);\n            z-index: 5000;\n            width: 100vw;\n            height: 100vh;\n        }\n\n        .gpLoginCancelIframe {\n          z-index: 5001;\n          position: absolute;\n          right: 0px;\n        }\n\n        .gpLoginWindow {\n          top: 100px;\n          height: 60%;\n          width: 75%;\n          margin: 0 auto;\n          position: relative;\n          z-index: 5001;\n        \tborder: 5px solid #cccccc;\n          border-radius: 10px;\n        }\n\n        .gpLoginWindow iframe {\n          width: 100%;\n          height: 100%\n        }\n\n        .gpLoginWindow .btn-cancel {\n          color: white;\n          background-color: red;\n        }\n\n        .gpLoginWindow .btn {\n          display: inline-block;\n          padding: 6px 12px;\n          margin-bottom: 0;\n          font-size: 14px;\n          font-weight: 400;\n          line-height: 1.42857143;\n          text-align: center;\n          white-space: nowrap;\n          vertical-align: middle;\n          -ms-touch-action: manipulation;\n          touch-action: manipulation;\n          cursor: pointer;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          background-image: none;\n          border: 1px solid transparent;\n          border-radius: 4px;\n        }\n    `\n    ],\n    templateUrl: './login.html',\n\n})\nexport class LoginModalComponent implements OnInit, OnDestroy {\n\n    public showLoginModal : boolean = false;\n    public forceLogin : boolean = Config.FORCE_LOGIN;\n\n    constructor(private authService : AppAuthService) {\n\n    }\n\n    ngOnInit() {\n        if(!this.authService) return;\n\n        this.authService.getMessenger().subscribe(msg => {\n            logger.debug(\"LoginModal received auth message: \" + msg.name);\n            switch(msg.name){\n                case 'auth:requireLogin':\n                    this.showLoginModal = true;   //show the modal\n                    break;\n\n                case 'userAuthenticated':\n                case 'iframe:userAuthenticated':\n                    this.showLoginModal = false;  //hide the modal\n                    this.authService.onUserChange(msg.user);\n                    break;\n            }\n        });\n    }\n\n    ngOnDestroy() {\n        this.showLoginModal = false;\n    }\n\n    cancel() {\n        //hide the modal\n        this.showLoginModal = false;\n    }\n\n}\n","import { Inject, Component } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\nimport { Item, ItemService, Query, SearchResults } from \"@geoplatform/client\";\n\n\n\n\nexport interface ListSelectDialogData {\n    selected    : Item[];       //array of pre-selected values\n    service     : ItemService;  //service to query for new values\n    query       : Query;        //query defining how to search for new values\n    subHeading ?: string;       //optional data to display under title\n}\n\n\n\n\n@Component({\n  selector: 'gp-list-select-dialog',\n  templateUrl: 'list-select.html',\n  styleUrls: ['./list-select.less']\n})\nexport class ListSelectDialog {\n\n    public  suggested : any[];\n    public  termQuery : string;\n    public  isLoading : boolean;\n\n    //pagination\n    public  currentPage    : number = 0;\n    public  totalSuggested : number = 0;\n\n    private query     : Query;\n    private subject   : Subject<string> = new Subject<string>();\n\n\n    constructor (\n        public dialogRef: MatDialogRef<ListSelectDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: ListSelectDialogData\n    ) {\n        this.query = data.query.clone().page(this.currentPage);\n\n        this.subject.pipe(\n            debounceTime(300),\n            distinctUntilChanged()\n        )\n        .subscribe( term => {\n            this.filterValues(term);\n        });\n    }\n\n    onNoClick () : void {\n        this.dialogRef.close();\n    }\n\n    onTermChange( term : string, immediate ?: boolean) {\n        if(true === immediate) {        //if needing to update without debounce\n            this.filterValues(term);\n        } else {                        //otherwise, debounce change\n            this.subject.next(term);\n        }\n    }\n\n    /**\n     * @param {string} value - user input to filter options with\n     * @return {Promise} resolving array of string options\n     */\n    filterValues ( value: string ) : void {\n\n        this.termQuery = value;\n\n        if(!value) {    //require user to provide input before searching\n            this.suggested = [];\n            this.totalSuggested = 0;\n            return;\n        }\n\n        this.query.q(value);\n\n        this.isLoading = true;\n\n        this.data.service.search(this.query)\n        .then( ( response : SearchResults ) => {\n            let hits = response.results;\n            this.suggested = hits;\n            this.totalSuggested = response.totalResults;\n        })\n        .catch(e => {\n            //display error message indicating an issue searching...\n        }).finally( () => {\n            this.isLoading = false;\n        });\n    }\n\n    addValue ( arg : Item) : void {\n        if(this.isSelected(arg)) {  //if already selected, remove it\n            this.removeValue(arg);  //...\n            return;                 //...\n        }\n        this.data.selected.push( arg );\n    }\n\n    removeValue ( value: Item ) : void {\n        let index = -1;\n        this.data.selected.forEach( (p,i) => { if(p.id === value.id) { index = i; } });\n        if (index >= 0) {\n            this.data.selected.splice(index, 1);\n        }\n    }\n\n    isSelected ( arg : Item ) : boolean {\n        return this.data.selected.length > 0 &&\n            !!this.data.selected.find( (s) => s.id === arg.id);\n    }\n\n\n    /**\n     * @param pageNo - new page number being requested\n     */\n    onPageChange( pageNo : number ) {\n        if(this.currentPage !== pageNo-1 ) {\n            this.query.page( pageNo-1 );\n            this.filterValues( this.termQuery );\n        }\n    }\n\n    getSubHeading(item : Item) : string {\n        let property = this.data.subHeading;\n        let value = item[property];\n        return this.getLabelFrom(value);\n    }\n\n    getLabelFrom( value : any ) : string {\n        if(value === null || typeof(value) === 'undefined') return '';\n        if(Array.isArray(value)) {\n            return (value as []).map( v => this.getLabelFrom(v) ).join(', ');\n        }\n        if(typeof(value) === 'object' && (value.label || value.title || value.prefLabel)) {\n            return value.label || value.title || value.prefLabel;\n        }\n        return '';\n    }\n}\n","import { Inject, Component, HostBinding } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged } from 'rxjs/operators';\n\n\n\n\nexport interface MessageDialogData {\n    type     : 'error' | 'warn' | 'info';\n    label   ?: string;\n    message  : string;\n}\n\n\n\n\n@Component({\n  selector: 'gp-message-dialog',\n  templateUrl: 'message.html',\n  styleUrls: ['./message.less'],\n\n})\nexport class MessageDialog {\n\n    @HostBinding('class') className;\n\n    constructor (\n        public dialogRef: MatDialogRef<MessageDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: MessageDialogData\n    ) {\n\n        switch(data.type) {\n            case 'error' : this.className = 'danger'; break;\n            case 'warn' : this.className = 'warning'; break;\n            case 'info' : this.className = 'info'; break;\n        }\n\n    }\n\n    close () : void {\n        this.dialogRef.close();\n    }\n\n    getIconClass() : string {\n        switch(this.data.type) {\n            case 'error' : return \"fas fa-exclamation-circle\";\n            case 'warn'  : return \"fas fa-exclamation-triangle\";\n            case 'info'  : return 'fas fa-info-circle'\n        }\n        return '';\n    }\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n\n@Directive({\n  selector: '[gpIcon]'\n})\nexport class GeoPlatformIconDirective {\n\n    @Input() item : Item;\n    @Input() themed : boolean = true;\n\n    constructor(private el: ElementRef) {\n\n    }\n\n    ngOnInit() {\n        if(!this.item) return;\n        let className = this.item.type.toLowerCase().replace(/^[a-z]+\\:/,'');\n        className = 'icon-' + className;\n        if(this.themed) {\n            className += \" is-themed\";\n        }\n        this.el.nativeElement.className = className;\n    }\n}\n","import { Component, Input, HostBinding } from '@angular/core';\nimport { Config } from '@geoplatform/client';\n\n@Component({\n    selector: 'gp-app-header',\n    templateUrl: './header.component.html',\n    styleUrls: ['./header.component.less']\n})\nexport class HeaderComponent {\n\n    @Input() appName : string = \"Application\";\n    @HostBinding('class') class = 'o-header'\n\n    public portalUrl : string = Config.portalUrl || 'https://www.geoplatform.gov';\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Config, ItemTypes } from \"@geoplatform/client\";\n\nconst ASSETS = [\n    ItemTypes.DATASET, ItemTypes.SERVICE,   ItemTypes.LAYER,       ItemTypes.MAP,\n    ItemTypes.GALLERY, ItemTypes.COMMUNITY, ItemTypes.APPLICATION, ItemTypes.TOPIC,\n    ItemTypes.WEBSITE\n];\n\n@Injectable()\nexport class ItemHelper {\n\n    constructor() { }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {boolean}\n     */\n    static isAsset(item : any) {\n        if(!item) return false;\n        let type = null;\n        if(typeof(item) === 'string')  type = item as string;\n        else if(item.type) type = item.type;\n        return type && ASSETS.indexOf(type) >= 0;\n    }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} url of icon for the type\n     */\n    static getIcon(item : any) :string {\n        let type = \"dataset\";\n        switch(item.type) {\n            case ItemTypes.CONTACT:         type =  'vcard'; break;\n            default: type = item.type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        }\n        return 'icon-' + type;\n    }\n\n    /**\n     * @param {any} item - either GP item\n     * @return {string} label for the item\n     */\n    static getLabel(item : any) {\n        if(!item || !item.type) return 'Unknown type';\n\n        let type = item.type;\n        switch(type) {\n\n            case ItemTypes.ORGANIZATION :\n            // case ItemTypes.PERSON :\n                return item.label || item.name || \"Un-titled resource\";\n\n            case ItemTypes.CONCEPT :\n            case ItemTypes.CONCEPT_SCHEME :\n                return item.label || item.prefLabel || \"Un-titled resource\";\n\n            case ItemTypes.CONTACT :\n                let fn = item.fullName || '';\n                let pt = item.positionTitle || '';\n                let on = item.orgName || '';\n                let label = fn + (fn.length?' - ':'') + pt + (pt.length?' - ':'') + on;\n                //if none of those fields have been provided, default to email or placeholder\n                if(!label.length) label = item.email || 'Untitled Contact';\n                return label;\n\n            default: return item.label || item.title || \"Un-titled resource\";\n        }\n    }\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} label for the item's type\n     */\n    static getTypeLabel(item:any) {\n        if(!item) return 'Unknown Resource Type';\n\n        let type : string = null;\n        if(typeof(item) === 'string') type = item as string;\n        else if(item.type) type = item.type;\n        else return null;\n\n        switch(type) {\n            case ItemTypes.DATASET :\n            case ItemTypes.SERVICE :\n            // case ItemTypes.PERSON :\n            case ItemTypes.ORGANIZATION :\n            case ItemTypes.CONCEPT :\n                return type.replace(/^[a-z]+\\:/i, '');\n            case ItemTypes.CONCEPT_SCHEME : return \"Concept Scheme\";\n            case ItemTypes.WEBSITE : return \"Website\";\n            case ItemTypes.CONTACT : return \"Contact\";\n            default: return type;   //remainder are unprefixed\n        }\n    }\n\n\n    /**\n     * @param {any} item - either GP item or string type\n     * @return {string} key (plural) for the item's type\n     */\n    static getTypeKey(item:any) {\n        if(!item) return null;\n\n        let type : string = null;\n        if(typeof(item) === 'string') type = item as string;\n        else if(item.type) type = item.type;\n        else return null;\n\n        switch(type) {\n            //special plurality\n            case ItemTypes.GALLERY : return 'galleries';\n            case ItemTypes.COMMUNITY : return 'communities';\n            //different name\n            case ItemTypes.CONTACT : return 'contacts'; //instead of \"vcards\"\n            //remainder\n            default: return type.replace(/^[a-z]+\\:/i, '').toLowerCase() + 's';\n\n        }\n    }\n\n\n    /**\n     * @param {string} type - item type\n     * @return {string} string path to the type's icon\n     */\n    static determineIconType(type : string) {\n        let name = type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        return `/assets/icons/${name}.svg`;\n    }\n\n    static getItemDetailsUrl(item : any) {\n        if(!item || !item.type || !item.id) return null;\n\n        return Config.portalUrl + '/resources/' + this.getTypeKey(item) + '/' + item.id;\n    }\n\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Config, ItemTypes } from \"@geoplatform/client\";\n\nimport { ItemHelper } from '../../item-helper';\n\n@Component({\n  selector: 'gp-resource-link',\n  templateUrl: './link.component.html',\n  styleUrls: ['./link.component.less']\n})\nexport class ResourceLinkComponent implements OnInit {\n\n    @Input() item : any;\n    // @Input() icon : any;\n    @Input() external : boolean = false;    //open link in new window/tab\n    @Input() label : string;\n    @Input() showIcon : boolean = true;\n\n    public portalUrl : string;\n\n\n    constructor() { }\n\n    ngOnInit() {\n        if(Config.portalUrl) this.portalUrl= Config.portalUrl;\n        else {\n            this.portalUrl = Config.ualUrl.replace(\"sit-ual\",'sit')\n                .replace(\"stg-ual\",\"stg\").replace(\"ual\",\"www\");\n        }\n    }\n\n    hasIcon() : boolean {\n        return this.showIcon;\n    }\n\n    getIcon() : string {\n        return ItemHelper.getIcon(this.item);\n    }\n\n    getLabel() : string {\n        return this.label || ItemHelper.getLabel(this.item);\n    }\n\n    getType() : string {\n        return ItemHelper.getTypeKey(this.item);\n    }\n\n    getIconClass() : string {\n        let type = ItemHelper.getTypeLabel(this.item);\n        if(\"Contact\" === type) type = 'vcard';\n        if(\"Product\" === type) type = 'imageproduct';\n        return 'icon-' + type.toLowerCase();\n    }\n\n}\n","\n/**\n *\n */\nexport const EventTypes = {\n    CLOSE       : Symbol( \"Close\"      ),   //\n    OPEN        : Symbol( \"Open\"       ),   //\n    RESET       : Symbol( \"Reset\"      ),   // clearing query filters\n    SELECT      : Symbol( \"Select\"     ),   // selecting item(s)\n    SELECT_NONE : Symbol( \"SelectNone\" ),   // clearing selections\n    QUERY       : Symbol( \"Query\"      ),   // change to query\n    ADDED       : Symbol( \"Added\"      ),   //\n    REMOVED     : Symbol( \"Removed\"    ),   //\n    CHANGED     : Symbol( \"Changed\"    ),   //\n    ERROR       : Symbol( \"Error\"      )    //\n};\n\n\n\n/**\n * Search Event\n *\n */\nexport class SearchEvent {\n\n    private type : Symbol;\n    private options : { [key:string] : any } = {} as { [key:string] : any };\n\n    constructor(type : Symbol,options ?: { [key:string] :any }) {\n        this.type = type;\n        if(options) {\n            Object.assign(this.options, options);\n        }\n    }\n    getType() : Symbol { return this.type; }\n    getOptions() : { [key:string] : any } { return this.options; }\n\n}\n","import {\n    Component, OnInit, OnChanges, TemplateRef,\n    Input, Output, EventEmitter, SimpleChanges\n} from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\nimport { SearchEvent, EventTypes } from '../../event';\n\n@Component({\n  selector: 'gp-selected-items',\n  templateUrl: './selected.component.html',\n  styleUrls: ['./selected.component.less']\n})\nexport class SelectedItemsComponent implements OnInit {\n\n    @Input() public selected : Item[];\n    @Input() public itemTemplate: TemplateRef<any>;\n    @Output() onEvent : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    ngOnChanges( changes : SimpleChanges ) {\n\n    }\n\n    clear() {\n        let event = new SearchEvent(EventTypes.SELECT_NONE);\n        this.onEvent.emit(event);\n    }\n\n    remove( item : Item ) {\n        let event = new SearchEvent(EventTypes.SELECT, {value: item});\n        this.onEvent.emit(event);\n    }\n}\n","import {\n    Component, OnInit, Input, Directive, HostBinding\n} from '@angular/core';\nimport {\n    DomSanitizer, SafeResourceUrl, SafeUrl\n} from '@angular/platform-browser';\n\nimport { Config, ItemTypes, Item } from \"@geoplatform/client\";\n\n\n\n\n\ninterface Thumbnail {\n    url ?: string;\n    contentData ?: string;\n    width ?: number;\n    height ?: number;\n    mediaType ?: string;\n}\n\n\n\n@Directive({\n    selector: 'img[fallback]',\n    host: {\n        '(error)':'onImgError()',\n        '(load)': 'onImgLoad()',\n        '[src]':'src'\n     }\n})\nexport class ImageFallbackDirective {\n    @Input() src : string;\n    @Input() fallback : string = `/assets/img-404.png`;\n    @HostBinding('class') className\n    onImgError() { this.src = this.fallback; }\n    onImgLoad() { this.className = 'is-image-loaded'; }\n}\n\n\n\n@Component({\n  selector: 'gp-item-thumbnail',\n  templateUrl: './thumbnail.component.html',\n  styleUrls: ['./thumbnail.component.less']\n})\nexport class ThumbnailComponent implements OnInit {\n\n    @Input() item : Item;\n\n    constructor(private sanitizer: DomSanitizer) { }\n\n    ngOnInit() {\n    }\n\n    getThumbnailUrl() {\n        if(this.item.thumbnail && this.item.thumbnail.url)\n            return this.item.thumbnail.url;\n        return Config.ualUrl + '/api/items/' + this.item.id + '/thumbnail';\n    }\n\n    getBackgroundImage() {\n        if(!this.item || !this.item.thumbnail) {\n            return this.getFallbackBackgroundImage();\n        }\n\n        let thumbnail = this.item.thumbnail;\n        let type = thumbnail.mediaType || 'image/png';\n\n        if(thumbnail.contentData) {\n            let content = thumbnail.contentData;\n            return this.sanitizer.bypassSecurityTrustStyle(`url(data:${type};base64,${content})`);\n        }\n    }\n\n    getFallbackBackgroundImage() {\n        let url = this.getFallbackUrl();\n        return `url(${url})`;\n    }\n\n    isEmpty() {\n        return !this.item || !this.item.thumbnail ||\n            ( !this.item.thumbnail.url && !this.item.thumbnail.contentData );\n    }\n\n    hasURL() {\n        return this.item.thumbnail && !!this.item.thumbnail.url;\n    }\n\n    hasContentData() {\n        return this.item.thumbnail && !!this.item.thumbnail.contentData && !this.item.thumbnail.url;\n    }\n\n    getFallbackUrl() {\n        return Config.ualUrl + '/api/items/' + this.item.id + '/thumbnail';\n    }\n}\n","\nimport { Item } from \"@geoplatform/client\";\n\n/**\n *\n */\nexport class GeoPlatformError extends Error {\n\n    private _label: string;\n    private _code: number;\n    private _item : Item;\n\n    public get label() { return this._label; }\n    public set label(value: string) { this._label = value; }\n\n    public get code() { return this._code; }\n    public set code(value: number) { this._code = value; }\n\n    public get item() { return this._item; }\n    public set item(value : Item) { this._item = value; }\n\n\n    constructor(\n        message: string,\n        label ?: string,\n        code ?: number,\n        item ?: Item\n    ) {\n        super(message);\n        this.label = label;\n        this.code  = code;\n        this.item  = item;\n    }\n\n    static from(error : Error) : GeoPlatformError {\n        if(error instanceof GeoPlatformError)\n            return error as GeoPlatformError;\n\n        let gpe = new GeoPlatformError(error.message);\n        gpe.label = \"An error occurred\";\n        gpe.code = 500;\n        return gpe;\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, BehaviorSubject } from 'rxjs';\n\nimport { GeoPlatformError } from './error';\n\n@Injectable()\nexport class GeoPlatformErrorService {\n\n    private updateSubject: BehaviorSubject<GeoPlatformError> = new BehaviorSubject<GeoPlatformError>(null);\n\n    error$: Observable<GeoPlatformError> = this.updateSubject.asObservable();\n\n    setError(error: Error) {\n        let gpe = GeoPlatformError.from(error);\n        this.updateSubject.next(gpe);\n    }\n}\n","\n\nimport {\n    Item, Asset,\n    Map, Layer, Service, Dataset, Gallery, Community, Concept,\n    ConceptScheme, Organization, Contact,\n    ItemTypes\n} from '@geoplatform/client';\n\nimport { ItemHelper } from './item-helper';\n\n\nconst Visibilities : any = {\n    PUBLIC : 'public',\n    PRIVATE : 'private'\n};\n\nconst Statuses : any = {\n    SUBMITTED : 'submitted'\n};\n\n\n\nfunction createItem(type, opts ?: {[key:string]:any}) : any {\n    return Object.assign({\n        type:           type,\n        uri:            null,\n        label:          \"New Item\",\n        description:    \"This item needs a description\",\n        resourceTypes:  [],\n        createdBy:      null,\n        lastModifiedBy: null\n    }, opts||{});\n}\n\nfunction createAsset(type, opts ?: {[key:string]:any}) : any {\n    let options : {[key:string]:string} = Object.assign({\n        keywords        : [],\n        alternateTitles : [],\n        purpose         : null,\n        themes          : [],\n        contacts        : [],\n        publishers      : [],\n        contributors    : [],\n        distributions   : [],\n        classifiers     : {},\n        landingPage     : null,\n        status          : Statuses.SUBMITTED,\n        visibility      : Visibilities.PUBLIC,\n        identifiers     : [] as string[],\n        extent          : { minx: -179, miny: -89, maxx: 179, maxy: 89 },\n        temporal        : { startDate: null, endDate: null },\n        statistics      : { numViews: 0, numLikes: 0 },\n        usedBy          : [],\n        related         : [],\n        rights          : []\n    }, opts||{});\n    let item = createItem(type, options);\n    return item as Asset;\n}\n\n\n\nfunction createMap() : Map {\n    let obj = createAsset(ItemTypes.MAP, {\n        layers      : [],\n        baseLayer   : null,\n        annotations : {},\n        thumbnail   : {\n            label       : null,\n            url         : null,\n            contentData : null,\n            width       : 0,\n            height      : 0\n        }\n    });\n    return obj as Map;\n}\n\n\nfunction createLayer( service ?: Service ) : Map {\n    let services = service ? [service] : [];\n    let obj = createAsset(ItemTypes.LAYER, {\n        subLayers   : [],\n        parentLayer : null,\n        services    : services,\n        layerName   : null,\n        layerType   : null,\n        legend      : null\n    });\n    return obj as Map;\n}\n\nfunction createService() : Service {\n    let obj = createAsset(ItemTypes.SERVICE, {\n        datasets    : [],\n        serviceType : null,\n        href        : null\n    });\n    return obj as Service;\n}\n\nfunction createDataset() : Dataset {\n    let obj = createAsset(ItemTypes.DATASET, { services : [] });\n    return obj as Dataset;\n}\n\nfunction createGallery() : Gallery {\n    let obj = createAsset(ItemTypes.GALLERY, { items : [] });\n    return obj as Gallery;\n}\n\nfunction createCommunity() : Community {\n    let obj = createAsset(ItemTypes.COMMUNITY);\n    return obj as Community;\n}\n\nfunction createConcept() : Concept {\n    let obj = createItem(ItemTypes.CONCEPT, { scheme : null });\n    return obj as Concept;\n}\n\nfunction createConceptScheme() : ConceptScheme {\n    let obj = createItem(ItemTypes.CONCEPT_SCHEME);\n    return obj as ConceptScheme;\n}\n\n\nfunction createOrg() : Organization {\n    let obj = createItem(ItemTypes.ORGANIZATION, { subOrgOf : null });\n    return obj as Organization;\n}\n\nfunction createContact() : Contact {\n    let obj = createItem(ItemTypes.CONTACT, {\n        fullName : null,\n        email    : null,\n        tel      : null,\n        fax      : null,\n        address  : {\n            street1: null,\n            street2: null,\n            city:    null,\n            state:   null,\n            zip:     null\n        }\n    });\n    return obj as Contact;\n}\n\n\n\n\n\n\nfunction defaultArrayValue(item, property) {\n    if(!item || !property) return;\n    if( item[property] === null || item[property] === undefined ||\n        typeof(item[property]) === 'undefined' )\n        item[property] = [];\n}\n\nfunction defaultToNullValue(item, property) {\n    if(!item || !property) return;\n    if( typeof(item[property]) === 'undefined' )\n        item[property] = null;\n}\n\n\n\nexport class ItemFactory {\n\n    static create(type) {\n        switch(type) {\n            case ItemTypes.MAP : return createMap();\n            case ItemTypes.LAYER : return createLayer();\n            case ItemTypes.SERVICE : return createService();\n            case ItemTypes.DATASET : return createDataset();\n            case ItemTypes.GALLERY : return createGallery();\n            case ItemTypes.COMMUNITY: return createCommunity();\n            case ItemTypes.CONCEPT : return createConcept();\n            case ItemTypes.CONCEPT_SCHEME: return createConceptScheme();\n            case ItemTypes.ORGANIZATION: return createOrg();\n            case ItemTypes.CONTACT: return createContact();\n            default: return null;\n        }\n    }\n\n    static fix(item) {\n\n        defaultArrayValue(item, 'resourceTypes');\n\n        if(ItemHelper.isAsset(item)) {\n            defaultArrayValue(item, 'keywords');\n            defaultArrayValue(item, 'alternateTitles');\n            defaultArrayValue(item, 'themes');\n            defaultArrayValue(item, 'contacts');\n            defaultArrayValue(item, 'publishers');\n            defaultArrayValue(item, 'contributors');\n            defaultArrayValue(item, 'distributions');\n            defaultArrayValue(item, 'identifiers');\n            defaultArrayValue(item, 'usedBy');\n            defaultArrayValue(item, 'related');\n            defaultArrayValue(item, 'accessRights');\n\n            defaultToNullValue(item, 'purpose');\n            defaultToNullValue(item, 'landingPage');\n            defaultToNullValue(item, 'status');\n            defaultToNullValue(item, 'visibility');\n\n            if(!item.temporal) {\n                item.temporal = {startDate: null, endDate: null};\n            }\n            if(!item.extent) {\n                item.extent = { minx: -179, miny: -89, maxx: 179, maxy: 89 };\n            }\n        }\n    }\n\n}\n","export const MapTypes = {\n    GeoPlatform : { label: \"GeoPlatform Map\", uri: 'http://www.geoplatform.gov/ont/openmap/GeoplatformMap' },\n    AGOL        : { label: \"AGOL Web Map\",    uri: 'http://www.geoplatform.gov/ont/openmap/AGOLMap'        },\n    WMS         : { label: \"WMS Map\",         uri: \"http://www.geoplatform.gov/ont/openmap/WMSMap\"         },\n    MapBox      : { label: \"Map Box Map\",     uri: 'http://www.geoplatform.gov/ont/openmap/MapBoxMap'      }\n};\n","\nimport { NgModule, Pipe, PipeTransform } from '@angular/core';\nimport { Item } from \"@geoplatform/client\";\n\n\n\n@Pipe({name: 'arrayedItems'})\nexport class ArrayedItemsPipe implements PipeTransform {\n    transform(value: Item[], property:string, num?: number): string {\n        let max = isNaN(num) || num > value.length ? value.length : num;\n        return value.slice(0, max).map( v => v[property] ).join(' ');\n    }\n}\n\n\n/*\n * Limits an array of entries to a maximum number\n * Usage:\n *   array | limitTo:num\n * Example:\n *   {{ ['one','two','three'] | limitTo:2 }}\n */\n@Pipe({name: 'limitTo'})\nexport class LimitToPipe implements PipeTransform {\n    transform(value: any[], num: number, start ?: number): any[] {\n        if(value && value.length > num) {\n            let st = isNaN(start) ? 0 : start;\n            if(st > 0) num += st;\n            return value.slice( st, num);\n        }\n        return value;\n    }\n}\n\n\n\n/*\n *\n * Usage:\n *   array | sortBy : property\n * Example:\n *   {{ ['one','two','three'] | limitTo:2 }}\n */\n@Pipe({name: 'sortBy'})\nexport class SortByPipe implements PipeTransform {\n    transform(value: any[], property: string): any[] {\n        return value.sort( (a,b) => {\n            return a[property] > b[property] ? -1 : 1;\n        });\n    }\n}\n\n\n\n/*\n * Formats a GeoPlatform Item's type to a friendly label\n * Usage:\n *   type | friendlyType\n * Example:\n *   {{ \"dcat:Dataset\" | friendlyType }}\n *   formats to: \"Dataset\"\n*/\n@Pipe({name: 'friendlyType'})\nexport class FriendlyTypePipe implements PipeTransform {\n    transform(value: string): string {\n        if(!value || typeof(value) !== 'string' || value.length === 0) return value;\n        let name = value;\n        let idx = value.indexOf(\":\");\n        if(~idx) name = value.substring(idx+1);\n        if('VCard' === name) name = 'Contact';\n        return name;\n    }\n}\n\n\n\n\n\n/*\n * Replaces underscores between words with spaces\n * Usage:\n *   type | fixLabel\n * Example:\n *   {{ \"One_Two_Three\" | fixLabel }}\n *   formats to: \"One Two Three\"\n*/\n@Pipe({name: 'fixLabel'})\nexport class FixLabelPipe implements PipeTransform {\n    transform(value: string): string {\n        if(!value || typeof(value) !== 'string' || !value.length) return 'Untitled';\n        let result = value.replace(/([a-z])([A-Z])/g, \"$1 $2\").replace(/_/g, \" \").trim();\n        return result.charAt(0).toUpperCase() + result.slice(1);\n    }\n}\n","import { Injectable, Inject } from '@angular/core';\nimport {\n    Router, ActivatedRouteSnapshot, RouterStateSnapshot, Resolve\n} from '@angular/router';\nimport { Observable, of, empty } from 'rxjs';\nimport {\n    Item, ItemService,\n    TrackingService, TrackingTypes, TrackingEventFactory\n} from '@geoplatform/client';\nimport { ItemFactory }       from './item-factory';\nimport { GeoPlatformError }           from './error';\n\n@Injectable(/*{ providedIn: 'root' }*/)\nexport class ItemResolver implements Resolve<Item> {\n\n    constructor(\n        @Inject(ItemService) private service : ItemService,\n        @Inject(TrackingService) private trackingService : TrackingService\n    ) {\n    }\n\n    resolve(\n        route: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<any>|Promise<any>|any {\n\n        let id = route.paramMap.get('id');\n        let opts : any = {};\n        let version = route.paramMap.get(\"version\");\n        if(version) opts.version = version;\n        return this.service.get(id, opts)\n        .then( item => {\n            if(this.trackingService) {\n                let event = TrackingEventFactory(TrackingTypes.VIEWED, item);\n                this.trackingService.logEvent(event);\n            }\n            return item;\n        })\n        .catch( (e : Error) => of( e ) );\n    }\n}\n\n\n@Injectable(/*{ providedIn: 'root' }*/)\nexport class VersionResolver implements Resolve<string> {\n\n    constructor() { }\n\n    resolve(\n        route: ActivatedRouteSnapshot,\n        state: RouterStateSnapshot\n    ): Observable<any>|Promise<any>|any {\n        let version = route.paramMap.get(\"version\");\n        return Promise.resolve(version||null);\n    }\n}\n\n\n\n@Injectable()\nexport class NewItemResolver implements Resolve<Item> {\n\n    constructor(\n        private router: Router,\n        // private errorService: ErrorService\n    ) {\n\n    }\n\n    resolve( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ): Observable<Item> {\n        let type = route.params.type;\n        let item = ItemFactory.create(type);\n        if(!item) {\n            let gpe = new GeoPlatformError(`Type ${type} is unsupported`, \"Unsupported Type\", 400);\n            // this.errorService.setError(gpe);\n            this.router.navigateByUrl('error', {skipLocationChange:false});\n            return empty();\n        } else {\n            return of(item);\n        }\n    }\n}\n\n\n\n@Injectable()\nexport class ErrorResolver implements Resolve<Error> {\n    constructor(private router: Router) {}\n    resolve( route: ActivatedRouteSnapshot, state: RouterStateSnapshot ): Observable<Error> {\n        let type = route.params.type;\n        let msg = \"An error has occurred\";\n        if(\"unsupported\" === type)\n            msg = `Type ${type} is not supported`;\n        else if(\"404\" === type)\n            msg = \"Item not found\";\n        let error = new Error(msg);\n        // error.error = \"Unsupported Type\";\n        return of(error);\n    }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable, Observer, Subject, Subscription } from 'rxjs';\nimport { Item, Query, SearchResults, ItemService } from '@geoplatform/client';\nimport { logger } from '../logger';\n\n\n/**\n *\n */\nexport interface SearchServiceEvent {\n    query    ?: Query;\n    results  ?: SearchResults;\n    selected ?: Item[]\n}\n\n/**\n *\n */\nexport interface SearchAwareComponent {\n    onQueryChange( query : Query ) : void;\n    onResultsChange( results : SearchResults ) : void;\n    onSelectedChange( selected : Item[] ) : void;\n}\n\n\n/**\n *\n */\n@Injectable()\nexport class SearchService {\n\n    private query    : Query;\n    private results  : SearchResults;\n    private selected : Item[] = [] as Item[];\n\n    private subject = new Subject<SearchServiceEvent>();\n    private subject$ = this.subject.asObservable();\n\n\n    constructor(\n        @Inject(ItemService) private service : ItemService\n    ) {\n\n    }\n\n    setQuery(query : Query) {\n        this.query = query ? query.clone() : new Query();\n        this.subject.next({ query : this.query.clone() });\n    }\n\n    getQuery() : Query {\n        return this.query.clone();\n    }\n\n    getResults() : SearchResults {\n        return this.results;\n    }\n\n    search(query ?: Query) {\n\n        //if a query was provided, store it and use it\n        if(query) this.setQuery(query);\n\n        this.service.search(this.query)\n        .then( (response:SearchResults) => {\n            logger.debug('SearchService.search() - ' + response.totalResults + \" results found\");\n            this.results = response;\n            this.subject.next({ results : response });\n        })\n        .catch( (error : Error) => {\n            logger.error(error.message);\n        });\n    }\n\n\n    /**\n     * @param item - item or array of item selected from search results\n     * @param asBaseLayer - boolean indicating how to select the layer\n     */\n    select( item : Item|Item[] ) {\n\n        if(Array.isArray(item)) { //multiple selections\n            item.forEach( it => this._toggleItem(it, false) );\n            this.subject.next({ selected: this.selected });\n            return;\n        }\n\n        this._toggleItem( item, true );\n    }\n\n    /**\n     *\n     */\n    _toggleItem( item : Item, fireEvent : boolean ) {\n        if(!item || !item.id) return;\n\n        let position = this.selected.findIndex( s => s.id === item.id );\n\n        if(position >= 0) { //already selected, deselect it and return\n            this.selected.splice(position, 1);\n            if(fireEvent) this.subject.next({selected: this.selected});\n            return;\n        }\n\n        //new selection\n        // logger.error(`Selecting ${item.label} as ${entry.type.toString()}`);\n\n        //fetch full object and replace placeholder in selected array\n        this.service.get(item.id)\n        .then( fullItem => {\n            this.selected.push(fullItem);\n            this.selected.sort( (a,b) => a.label > b.label ? 1 : -1 );\n            if(fireEvent) this.subject.next({selected: this.selected});\n        })\n        .catch(e => {\n            logger.error(\"SearchService.select() - \" +\n                \"Error encountered fetching selected item's details: \" + e.message);\n        });\n    }\n\n    /**\n     * @param item Item\n     * @return boolean\n     */\n    isSelected( item : Item ): boolean {\n        return this.selected.length &&\n            item && item.id &&\n            this.selected.findIndex(it=>it.id===item.id) >= 0;\n    }\n\n    /**\n     *\n     */\n    hasSelected() : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    /**\n     * @return Item[]\n     */\n    getSelected() : Item[] {\n        return this.selected;\n    }\n\n    clearSelected() {\n        this.selected = [];\n        this.subject.next({ selected: this.selected });\n    }\n\n\n    subscribe( listener : SearchAwareComponent ) : Subscription {\n\n        let obs : Observer<SearchServiceEvent> = {\n            next : (value: SearchServiceEvent) => {\n                if( typeof(value) === 'undefined' || value === null) return;\n                if(value.query)\n                    listener.onQueryChange( value.query );\n                if(value.results)\n                    listener.onResultsChange( value.results );\n                if(value.selected)\n                    listener.onSelectedChange( value.selected );\n            },\n            error : ( err: Error ) => {\n                console.log(\"[ERROR] \" + err.message);\n            },\n            complete : () => { }\n        };\n\n        let sub = this.subject$.subscribe( obs );\n\n        if(this.query) this.subject.next({ query : this.query.clone() });\n        if(this.results) this.subject.next({ results : this.results });\n        if(this.selected) this.subject.next({ selected : this.selected });\n\n        return sub;\n    }\n\n}\n","\nimport { Item,ItemTypes } from '@geoplatform/client';\n\n\nexport interface SearchResultsItemAdapter<T> {\n    getId( item : T )           : string;\n    getLabel( item : T )        : string;\n    getDescription( item : T )  : string;\n    getAuthorName( item : T )   : string;\n    getEditorName( item : T )   : string;\n    getCreatedDate( item : T )  : string;\n    getModifiedDate( item : T ) : string;\n    getIconClass( item : T )    : string;\n    getTypeLabel( item : T )    : string;\n}\n\n\n\n\nconst GP_MAP_RESOURCE_TYPE = 'http://www.geoplatform.gov/ont/openmap/GeoplatformMap';\nconst AGOL_MAP_RESOURCE_TYPE = 'http://www.geoplatform.gov/ont/openmap/AGOLMap';\n\nexport class GeoPlatformResultsItemAdapter implements SearchResultsItemAdapter<Item> {\n\n    constructor() {}\n\n    getId( item: Item ) : string { return item.id; }\n    getLabel( item: Item ) : string {\n        return item.label || item.title ||\n               item.prefLabel || \"Untitled Item\";\n    };\n    getDescription( item: Item )  : string { return item.description; };\n    getAuthorName( item: Item )   : string { return item.createdBy; };\n    getEditorName( item: Item )   : string { return item.lastModifiedBy; };\n    getCreatedDate( item: Item )  : string { return item.created; };\n    getModifiedDate( item: Item ) : string { return item.modified; };\n\n    getIconClass( item: Item ) {\n        let type = item.type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n        return 'icon-' + type;\n    }\n\n    getTypeLabel( item: Item ) {\n        if( ItemTypes.SERVICE === item.type && !!item.serviceType )\n            return item.serviceType.label || \"Service\";\n        if( ItemTypes.MAP === item.type) {\n            let resTypes = item.resourceTypes || [];\n            if( ~resTypes.indexOf(GP_MAP_RESOURCE_TYPE) ) return 'GeoPlatform Map';\n            if( ~resTypes.indexOf(AGOL_MAP_RESOURCE_TYPE) ) return 'ArcGIS Online Map';\n            return \"Map\";\n        }\n        if( ItemTypes.CONTACT === item.type) return 'Contact';\n        return item.type.replace(/^[a-z]+\\:/i, '');\n    }\n\n}\n","\nimport {\n    Component, OnInit, OnDestroy, OnChanges, SimpleChanges,\n    Input, Output, EventEmitter, TemplateRef\n} from '@angular/core';\nimport { Item, ItemTypes, QueryParameters } from '@geoplatform/client';\n\nimport { SearchEvent, EventTypes } from '../../event';\n\nimport { SearchResultsItemAdapter, GeoPlatformResultsItemAdapter } from './item-adapter';\n\n\n\nconst GP_MAP_RESOURCE_TYPE = 'http://www.geoplatform.gov/ont/openmap/GeoplatformMap';\nconst AGOL_MAP_RESOURCE_TYPE = 'http://www.geoplatform.gov/ont/openmap/AGOLMap';\n\n/**\n * Search Results Item Component\n *\n * This component is used to display search results items.\n *\n * Example:\n *   <div *ngFor=\"let item of results\">\n *     <gp-search-results-item [item]=\"item\"></gp-search-results-item>\n *   </div>\n *\n * Listen for selection or other events by passing an \"onEvent\" callback\n *\n * Example:\n *   <div *ngFor=\"let item of results\">\n *     <gp-search-results-item [item]=\"item\"\n *          (onEvent)=\"handleItemEvent($event)\">\n *     </gp-search-results-item>\n *   </div>\n *\n * Customize how the item is displayed using any of the template bindings\n *\n * Example:\n *   <div *ngFor=\"let item of results\">\n *     <gp-search-results-item [item]=\"item\"\n *          [itemHeadingTemplate]=\"myCustomHeadingTemplate\"\n *          [itemActionsTemplate]=\"myCustomActionsTemplate\">\n *     </gp-search-results-item>\n *   </div>\n *   <ng-template #myCustomHeadingTemplate let-item=\"item\">\n *     <div>My Customized {{item.label}}</div>\n *   </ng-template>\n *   <ng-template #myCustomActionsTemplate let-item=\"item\">\n *     <button type=\"button\" class=\"btn btn-link\" (click)=\"handleClick(item)\">Click Me</button>\n *   </ng-template>\n *\n */\n@Component({\n  selector: 'gp-search-results-item',\n  templateUrl: './item.component.html',\n  styleUrls: ['./item.component.less']\n})\nexport class SearchResultsItemComponent implements OnInit, OnChanges, OnDestroy {\n\n    @Input() public item       : Item;\n    @Input() public adapter : SearchResultsItemAdapter<Item>;\n    @Input() public isSelected : boolean = false;\n    @Input() public canSelect  : boolean = true;\n    @Input() public showDesc   : boolean = false;\n\n    //custom heading template\n    @Input() public itemHeadingTemplate   : TemplateRef<any>;\n    //custom thumbnail template\n    @Input() public itemThumbnailTemplate : TemplateRef<any>;\n    //custom footer (complete)\n    @Input() public itemFooterTemplate    : TemplateRef<any>;\n    //custom footer stats template\n    @Input() public itemStatsTemplate     : TemplateRef<any>;\n    //custom footer actions template\n    @Input() public itemActionsTemplate   : TemplateRef<any>;\n\n    @Output() onEvent : EventEmitter<SearchEvent> = new EventEmitter<SearchEvent>();\n\n\n    constructor() { }\n\n    ngOnInit() {\n        if(!this.adapter) {\n            this.adapter = new GeoPlatformResultsItemAdapter();\n        }\n    }\n\n    ngOnChanges( changes : SimpleChanges ) {\n        if(changes.item || changes.adapter) {\n            // let item = changes.item ? changes.item.currentValue : null;\n            // let adapter = changes.adapter ? changes.adapter.currentValue : (\n            //     this.adapter\n            //     );\n            //\n            // if(item && !adapter) {\n            //     this.adapter =\n            // }\n        }\n    }\n\n    ngOnDestroy() {\n        this.adapter = null;\n    }\n\n    /**\n     * Triggers a selection event for the item\n     */\n    select() {\n        let event = new SearchEvent(EventTypes.SELECT, { value: this.item });\n        this.onEvent.emit(event);\n    }\n\n    // getIconClass() {\n    //     let type = this.item.type.replace(/^[a-z]+\\:/i, '').toLowerCase();\n    //     return 'icon-' + type;\n    // }\n    //\n    // getTypeLabel() {\n    //     if( ItemTypes.SERVICE === this.item.type && !!this.item.serviceType )\n    //         return this.item.serviceType.label || \"Service\";\n    //     if( ItemTypes.MAP === this.item.type) {\n    //         let resTypes = this.item.resourceTypes || [];\n    //         if( ~resTypes.indexOf(GP_MAP_RESOURCE_TYPE) ) return 'GeoPlatform Map';\n    //         if( ~resTypes.indexOf(AGOL_MAP_RESOURCE_TYPE) ) return 'ArcGIS Online Map';\n    //         return \"Map\";\n    //     }\n    //     if( ItemTypes.CONTACT === this.item.type) return 'Contact';\n    //     return this.item.type.replace(/^[a-z]+\\:/i, '');\n    // }\n\n    /**\n     * Trigger a search event which constrains by creator\n     */\n    constrainToUser(username) {\n        let change = {};\n        change[QueryParameters.CREATED_BY] = username;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n\n}\n","import {\n    Inject, Component, OnInit, OnDestroy,\n    Input, Output, EventEmitter, TemplateRef\n} from '@angular/core';\nimport { PageEvent } from '@angular/material/paginator';\nimport { MatDialog, MatSelectChange } from '@angular/material';\nimport { Observer, Subscription } from 'rxjs';\nimport { Config, Query, SearchResults, Item } from \"@geoplatform/client\";\n// import { AppAuthService, AuthenticatedComponent } from \"../../auth\";\nimport { SearchEvent, EventTypes } from \"../../event\";\nimport { SearchService, SearchServiceEvent, SearchAwareComponent } from \"../search.service\";\nimport { SearchResultsItemAdapter, GeoPlatformResultsItemAdapter } from \"../item/item-adapter\";\nimport { logger } from '../../logger';\n\n\nexport interface SearchSortOption {\n    value: string;\n    label: string;\n};\n\nconst DEFAULT_SORT_OPTIONS : SearchSortOption[] = [\n    { value: \"_score,desc\",     label: \"Relevance\"  },\n    { value: \"modified,desc\",   label: \"Most Recently Modified\"  },\n    { value: \"modified,asc\",    label: \"Least Recently Modified\" },\n    { value: \"label,asc\",       label: \"Title [A-Z]\" },\n    { value: \"label,desc\",      label: \"Title [Z-A]\" },\n    { value: \"reliability,asc\", label: \"Reliability\" }\n];\n\n\n/**\n * Search Results Component\n *\n * This component is used to display search results.\n *\n * Example:\n *   <gp-search-results [service]=\"service\">\n *   </gp-search-results>\n *\n *\n * Listen for selection or other events by passing an \"onEvent\" callback\n *\n * Example:\n *   <gp-search-results  [service]=\"service\"\n *        (onEvent)=\"handleItemEvent($event)\">\n *   </gp-search-results>\n *\n *\n * Support custom items by providing a SearchResultsItemAdapter\n *\n * Example:\n *   class CustomItemAdapter implements SearchResultsItemAdapter<Item> {\n *      constructor() {}\n *      getId( item: Item ) : string { return item.idField; }\n *      getLabel( item: Item ) : string { return item.heading; }\n *      //remaining methods...\n *   }\n *   ...\n *\n *   public myCustomItemAdapter : SearchResultsItemAdapter<Item> = new CustomItemAdapter();\n *\n *   ...\n *\n *   <gp-search-results [service]=\"service\"\n *        [adapter]=\"myCustomItemAdapter\">\n *   </gp-search-results>\n *\n *\n *\n * Customize how items are displayed using any of the template bindings\n *\n * Example:\n *   <gp-search-results [service]=\"service\"\n *        [itemHeadingTemplate]=\"myCustomItemHeadingTemplate\"\n *        [itemActionsTemplate]=\"myCustomItemActionsTemplate\">\n *   </gp-search-results>\n *   <ng-template #myCustomItemHeadingTemplate let-item=\"item\">\n *     <div>My Customized {{item.label}}</div>\n *   </ng-template>\n *   <ng-template #myCustomItemActionsTemplate let-item=\"item\">\n *     <button type=\"button\" class=\"btn btn-link\" (click)=\"handleClick(item)\">Click Me</button>\n *   </ng-template>\n *\n */\n@Component({\n  selector: 'gp-search-results',\n  templateUrl: './results.component.html',\n  styleUrls: ['./results.component.less']\n})\nexport class SearchResultsComponent implements OnInit, OnDestroy, SearchAwareComponent {\n\n    @Input()  service     : SearchService;\n    @Input()  sortOptions : SearchSortOption[] = DEFAULT_SORT_OPTIONS;\n    @Input() public showDesc   : boolean = false;\n\n    @Input() public adapter : SearchResultsItemAdapter<Item>;\n\n    //custom heading template\n    @Input() public itemHeadingTemplate   : TemplateRef<any>;\n    //custom thumbnail template\n    @Input() public itemThumbnailTemplate : TemplateRef<any>;\n    //custom footer (complete)\n    @Input() public itemFooterTemplate    : TemplateRef<any>;\n    //custom footer stats template\n    @Input() public itemStatsTemplate     : TemplateRef<any>;\n    //custom footer actions template\n    @Input() public itemActionsTemplate   : TemplateRef<any>;\n\n    @Output() onEvent     : EventEmitter<SearchEvent> = new EventEmitter<SearchEvent>();\n\n    public query : Query;\n    public results : SearchResults;\n    public selected : Item[];\n    public sortValue : string;\n    public isLoading : boolean = false;\n    public error : Error;\n\n    //listener for when SearchService fires events for change in\n    // query, results, or selected items\n    private subscription : Subscription;\n\n\n    constructor(\n        // @Inject(AppAuthService) authService : AppAuthService,\n        private dialog : MatDialog\n    ) {\n        // super(authService);\n    }\n\n    ngOnInit() {\n        // super.init();\n\n        if(!this.adapter) {\n            this.adapter = new GeoPlatformResultsItemAdapter();\n        }\n\n        this.sortValue = this.sortOptions[0].value;\n        this.subscription = this.service.subscribe(this);\n    }\n\n    ngOnDestroy() {\n        // super.destroy();\n\n        if(this.subscription) {\n            this.subscription.unsubscribe();\n            this.subscription = null;\n        }\n        this.query = null;\n        this.results = null;\n        this.selected = null;\n    }\n\n    onQueryChange( query : Query ) {\n        this.query = query;\n        this.isLoading = true;\n    }\n    onResultsChange( results : SearchResults, error ?: Error ) {\n        this.results = results;\n        this.error = (error) ? error : null;\n        this.isLoading = false;\n    }\n    onSelectedChange( selected : Item[] ) {\n        this.selected = selected;\n    }\n\n    /**\n     *\n     */\n    isSelected (item : Item) : boolean {\n        return this.service.isSelected(item);\n    }\n\n    selectAllInPage() {\n        if(this.onEvent) {\n            let event = new SearchEvent(EventTypes.SELECT, {\n                value: this.results.results\n            });\n            this.onEvent.emit(event);\n        }\n    }\n\n    deselectAll() {\n        this.service.clearSelected();\n    }\n\n\n    /**\n     *\n     */\n    onItemEvent( $event : SearchEvent ) {\n        let name = $event.getType(); //$event.name;\n        if( !name ) return;\n        switch( name ) {\n\n            case EventTypes.SELECT :\n            if(this.onEvent) this.onEvent.emit($event);\n            break;\n\n            case EventTypes.QUERY :\n            let query = this.service.getQuery();\n            query.applyParameters($event.getOptions());\n            this.service.search(query);\n            break;\n\n        }\n    }\n\n    /**\n     * @param pageNo - new page number being requested\n     */\n    onPagingEvent( event : PageEvent ) {\n        let query = this.service.getQuery();\n        let previous = query.getPage();\n        let current = event.pageIndex;\n        if(previous !== current) {\n            query.page(current);\n        }\n        query.setPageSize( event.pageSize );\n\n        if(this.onEvent) {\n            let event = new SearchEvent(EventTypes.QUERY, { value : query });\n            this.onEvent.emit(event);\n        }\n    }\n\n    onSortChange($event : MatSelectChange) {\n        let query = this.service.getQuery();\n        query.sort(this.sortValue);\n\n        if(this.onEvent) {\n            let event = new SearchEvent(EventTypes.QUERY, { value : query });\n            this.onEvent.emit(event);\n        }\n    }\n\n}\n","import { Component, OnInit, OnDestroy, Inject } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { HttpClient } from '@angular/common/http';\nimport {\n    Config, Item, ItemService, Query, QueryParameters, ItemTypes\n} from '@geoplatform/client';\n\nimport { SearchEvent, EventTypes } from '../../event';\nimport { ListSelectDialogData, ListSelectDialog } from '../../dialogs';\n\n\nexport abstract class ItemFilterComponent implements OnInit, OnDestroy {\n\n    public  filterLabel : string = \"Item\";\n    public  isCollapsed : boolean = true;\n    public  choices     : any[];\n    public  selected    : Item[];\n    public  dialog      : MatDialog;\n    protected query     : Query\n\n\n    constructor(\n        @Inject(ItemService) private service : ItemService,\n        private types              : string|string[],\n        label                     ?: string,\n        @Inject(MatDialog) dialog ?: MatDialog\n    ) {\n        this.filterLabel = label;\n        if(dialog) this.dialog = dialog;\n    }\n\n    ngOnInit() {\n        this.selected = [] as Item[];\n        this.initQuery();\n        // this.fetchResults();\n    }\n\n    ngOnDestroy() {\n        this.selected = null;\n        this.choices = null;\n        this.service = null;\n        this.query = null;\n        this.types = null;\n    }\n\n    openDialog(): void {\n        let opts = this.getDialogOptions();\n        const dialogRef = this.dialog.open(ListSelectDialog, opts);\n        dialogRef.afterClosed().subscribe( ( results : Item[] ) => {\n            if(results && results.length) {\n                this.selected = this.selected.concat(results);\n\n                let key = this.getKey();\n                let change = {};\n                change[key] = this.selected.map( s => s.id );\n                change[QueryParameters.PAGE] = 0;\n                let event = new SearchEvent(EventTypes.QUERY, change);\n                this.notify(event);\n            }\n        });\n    }\n\n    /**\n     * @return configuration options for the material dialog used to select new values\n     */\n    getDialogOptions() : any {\n        return {\n            width: '50%',\n            data: {\n                service : this.service,\n                query   : this.query,\n                selected: []\n            }\n        };\n    }\n\n    isSupported() {\n        return true;\n    }\n\n    /**\n     *\n     */\n    initQuery() {\n        this.query = new Query().fields([]).facets([]).types(this.types);\n    }\n\n\n    hasSelections() : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    isSelected( arg : Item ) : boolean {\n        // let id = this.getChoiceId(arg);\n        return arg && this.selected.findIndex( s => s.id === arg.id ) > -1;\n    }\n\n\n    /**\n     * @param arg - item or identifier\n     */\n    toggle( arg : Item ) {\n        if(!arg) return;\n        // let id = this.getChoiceId(arg);\n        // if(id === null) return;\n\n        let idx = this.selected.findIndex( s => s.id === arg.id );\n        if(idx < 0) this.selected.push( arg );\n        else        this.selected.splice( idx, 1 );\n\n        let key = this.getKey();\n        let change = {};\n        change[key] = this.selected.map( s => s.id );\n        change[QueryParameters.PAGE] = 0;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.notify(event);\n    }\n\n\n    // /**\n    //  * Update search results using current query\n    //  */\n    // fetchResults() {\n    //     this.service.search(this.query).then( (response:any) => {\n    //         this.choices = response.results as any[];\n    //     })\n    //     .catch( (e:Error) => {\n    //         this.choices = [] as any[];\n    //         //TODO display error to user\n    //     });\n    // }\n    //\n    // /**\n    //  * @param arg - item or identifier\n    //  * @return string identifier\n    //  */\n    // getChoiceId(arg : any) : string {\n    //     let id : string = null;\n    //     if('string' === typeof(arg)) {\n    //         id = arg as string;\n    //     } else if(arg && typeof(arg.id) !== 'undefined') {\n    //         id = arg.id as string;\n    //     }\n    //     if(id === null || id === 'undefined') {\n    //         let key = this.getKey();\n    //         console.log(`[WARN] Can't determine value for filter '${key}'`);\n    //         return null;\n    //     }\n    //     return id;\n    // }\n\n    clear() {\n        if(this.hasSelections()) {\n            this.selected = [];\n            let key = this.getKey();\n            let change = {};\n            change[key] = [];\n            change[QueryParameters.PAGE] = 0;\n            let event = new SearchEvent(EventTypes.QUERY, change);\n            this.notify(event);\n        } else {\n            this.isCollapsed = !this.isCollapsed;\n        }\n    }\n\n\n    protected abstract getKey() : string;\n    protected abstract notify( event : SearchEvent );\n\n}\n","import { Component, Input, Output, EventEmitter, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ItemTypes, QueryParameters, ItemService } from '@geoplatform/client';\nimport { ItemFilterComponent } from '../item-filter.component';\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n  selector: 'gp-community-filter',\n  templateUrl: '../item-filter.component.html',\n  styleUrls: ['./community.component.less']\n})\nexport class CommunityFilterComponent extends ItemFilterComponent {\n\n    @Input()  key       : string = QueryParameters.USED_BY_ID;\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(\n        @Inject(ItemService) service : ItemService,\n        dialog : MatDialog\n    ) {\n        super(service, ItemTypes.COMMUNITY, \"Communities\", dialog);\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( event : SearchEvent ) {\n        this.onEvent.emit(event);\n    }\n\n    initQuery() {\n        super.initQuery();\n        // this.query.fields(['subOrganizationOf']);\n    }\n\n    // getDialogOptions() : any {\n    //     let opts = super.getDialogOptions();\n    //     opts.data.subHeading = \"subOrganizationOf\";\n    //     return opts;\n    // }\n}\n","import {\n    Component, OnInit, OnDestroy, Input, Output, EventEmitter, Inject\n} from '@angular/core';\nimport {\n    Query, QueryParameters, QueryFacets, ItemService, SearchResults\n} from \"@geoplatform/client\";\n\nimport { SearchEvent, EventTypes } from '../../../event';\nimport { AuthenticatedComponent, AppAuthService } from '../../../auth';\n\n\ninterface Creator {\n    id   : string;\n    label: string;\n    count: number;\n};\n\n\n@Component({\n  selector: 'gp-createdby-filter',\n  templateUrl: './creator.component.html',\n  styleUrls: ['./creator.component.less']\n})\nexport class CreatedByFilterComponent extends AuthenticatedComponent implements OnInit, OnDestroy {\n\n    @Input() key            : string = QueryParameters.QUERY;\n    @Input() selected       : string;\n    @Output() onEvent       : EventEmitter<any> = new EventEmitter<any>();\n\n    public typeaheadValue   : string = null;\n    public isCollapsed      : boolean = true;\n    public pagination       : { page: number; size: number; } = { page: 0, size: 10 };\n    public values           : Creator[] = [];\n    public pagedValues      : Creator[] = [];\n    public outsideSelection : Creator;\n    public visibleAmount : number = 10;\n\n    constructor(\n        authService : AppAuthService,\n        @Inject(ItemService) private service : ItemService\n    ) {\n        super(authService);\n    }\n\n    ngOnInit() {\n        super.ngOnInit();\n        this.selected = null;\n        this.fetchValues();\n    }\n\n    ngOnDestroy() {\n        super.ngOnDestroy();\n        this.values = null;\n        this.pagedValues = null;\n        this.pagination = null;\n        this.selected = null;\n        this.outsideSelection = null;\n    }\n\n    notify( ) {\n        let key = this.key;\n        let change = {};\n        change[key] = this.selected;\n        change[QueryParameters.PAGE] = 0;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n\n    hasSelections() : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    isSelected( arg : string ) : boolean {\n        return this.hasSelections() && this.getIndexOf(arg) >= 0;\n    }\n\n    getIndexOf( arg : string ) : number {\n        if(!this.selected || !this.selected.length) return -1;\n        return this.selected.indexOf(arg);\n    }\n\n\n    /**\n     * @param arg - item or identifier\n     */\n    toggle( arg : string ) {\n        if(this.selected && this.selected === arg) this.selected = null;\n        else this.selected = arg;\n        this.notify();\n    }\n\n    clear () {\n        if(this.hasSelections()) {\n            this.selected = null;\n            this.notify();\n\n        } else if( this.isCollapsed ){\n            this.isCollapsed = false;\n        }\n    }\n\n\n    fetchValues() {\n       let query = new Query().pageSize(1)\n           .facets(QueryFacets.CREATED_BY)\n           .parameter('includeFacet._createdBy.size', 1000);   //TODO not use Registry name\n\n       this.service.search(query)\n       .then( (response : SearchResults) => {\n           let facet = response.facets.find( facet => facet.name==='createdBy');\n           if(!facet) this.values = [];\n           else {\n               this.values = (facet.buckets||[]).map( (bucket:any) => {\n                   // Awaiting DT-1092 resolution\n                   return {\n                       id   : bucket.label,\n                       label: bucket.label,\n                       count: bucket.count\n                   };\n               });\n           }\n       })\n       .catch(e => { this.values = []; })\n       .finally ( () => {\n           this.updatePagedValues();\n       });\n    }\n\n    /**\n     *\n     */\n    nextPage() {\n        let numPages = Math.ceil(this.values.length / this.pagination.size);\n        this.pagination.page = Math.min( numPages-1, this.pagination.page+1);\n        this.updatePagedValues();\n    }\n\n    /**\n     *\n     */\n    prevPage() {\n        this.pagination.page = Math.max(0, this.pagination.page-1);\n        this.updatePagedValues();\n    }\n\n    /**\n     * @param resetStart boolean indicating to reset pagination start\n     */\n    updatePagedValues( resetStart ?: boolean ) {\n\n        if(resetStart) this.pagination.page = 0;\n\n        let values = this.values;\n        if(this.typeaheadValue && this.typeaheadValue.length) {\n            values = values.filter( v => v.label.indexOf(this.typeaheadValue) >=0 );\n        }\n\n        if(values.length < this.pagination.size) {\n            this.pagination.page = 0;   //reset current page\n            this.pagedValues = values;\n            console.log(\"Paged Values: \" + JSON.stringify(this.pagedValues));\n        }\n        let start = this.pagination.page*this.pagination.size;\n        let end = Math.min(start + this.pagination.size, values.length);\n        this.pagedValues = values.slice(start, end);\n\n        this.checkForOutsideSelections();\n    }\n\n    /**\n     *\n     */\n    checkForOutsideSelections() {\n        let selected = this.getSelection();\n        if( selected && !this.pagedValues.find(v => v.id === selected) ) {\n            this.outsideSelection = selected;\n        } else {\n            this.outsideSelection = null;\n        }\n    }\n\n    /**\n     *\n     */\n    clearTypeAhead() {\n        this.typeaheadValue = null;\n        this.updatePagedValues();\n    }\n\n    /**\n     *\n     */\n    toggleCurrentUser() {\n        let username = this.getCurrentUserName();\n        if(username) this.toggle( username );\n        else { console.log(\"No user to use to filter\"); }\n    }\n\n    getCurrentUserName() {\n        if(!this.isAuthenticated()) return null;\n        let user = this.getUser();\n        return user ? user.username : null;\n    }\n\n    getSelection() {\n       // let value = this.service.getCreatedBy();\n       // if(Array.isArray(value)) return value.length ? value[0] : null;\n       // return value;\n       return null;\n   }\n}\n","import {\n    Component, OnInit, Input, Output, EventEmitter\n} from '@angular/core';\nimport { QueryParameters } from \"@geoplatform/client\";\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n  selector: 'gp-keywords-filter',\n  templateUrl: './keyword.component.html',\n  styleUrls: ['./keyword.component.less']\n})\nexport class KeywordFilterComponent implements OnInit {\n\n    @Input() key            : string = QueryParameters.QUERY;\n    @Input() searchString   : string;\n    @Input() placeholder    : string = \"Search GeoPlatform\";\n    @Output() onEvent       : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor() { }\n\n    ngOnInit() { }\n\n    onKeyUp($event) {\n        let text = $event.target.value;\n        this.onValueChange(text);\n    }\n\n    onValueChange( value ) {\n        let change = {};\n        change[this.key] = value && value.length ? value : null;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n\n    clear() {\n        this.searchString=null;\n        this.onValueChange(null);\n    }\n}\n","import { Component, Input, Output, EventEmitter, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ItemTypes, QueryParameters, ItemService } from '@geoplatform/client';\nimport { ItemFilterComponent } from '../item-filter.component';\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n  selector: 'gp-publisher-filter',\n  templateUrl: '../item-filter.component.html',\n  styleUrls: ['./publisher.component.less']\n})\nexport class PublisherFilterComponent extends ItemFilterComponent {\n\n    @Input()  key       : string = QueryParameters.PUBLISHERS_ID;\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(\n        @Inject(ItemService) service : ItemService,\n        dialog : MatDialog\n    ) {\n        super(service, ItemTypes.ORGANIZATION, \"Publishers\", dialog);\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( event : SearchEvent ) {\n        this.onEvent.emit(event);\n    }\n\n    initQuery() {\n        super.initQuery();\n        this.query.fields(['subOrganizationOf']);\n    }\n\n    getDialogOptions() : any {\n        let opts = super.getDialogOptions();\n        opts.data.subHeading = \"subOrganizationOf\";\n        return opts;\n    }\n}\n","import { Component, Input, Output, EventEmitter, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Query, ItemTypes, QueryParameters, ItemService } from '@geoplatform/client';\nimport { ItemFilterComponent } from '../item-filter.component';\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n  selector: 'gp-scheme-filter',\n  templateUrl: '../item-filter.component.html',\n  styleUrls: ['./scheme.component.less']\n})\nexport class SchemeFilterComponent extends ItemFilterComponent {\n\n    //the key associated with this filter's selections\n    @Input()  key       : string = QueryParameters.SCHEMES_ID;\n    //the current set of values\n    @Input()  selected  : string[] = [];\n    //the query being affected by this filter's selections\n    // used to determine if this filter should be shown or not\n    @Input()  query     : Query;\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(\n        @Inject(ItemService) service : ItemService,\n        dialog : MatDialog\n    ) {\n        super(service, ItemTypes.CONCEPT_SCHEME, \"Scheme\", dialog);\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( event : SearchEvent ) {\n        this.onEvent.emit(event);\n    }\n\n    isSupported() : boolean {\n        if(this.query) {\n            let types = this.query.getTypes();\n            return types && types.length && types.indexOf(ItemTypes.CONCEPT)>=0;\n        }\n        return false;\n    }\n\n}\n","import {\n    Inject, Component, OnInit, OnChanges, OnDestroy\n} from '@angular/core';\nimport {\n    MatDialog, MatDialogRef, MAT_DIALOG_DATA\n} from '@angular/material/dialog';\nimport {\n    Item, KGService, KGQuery, SearchResults\n} from \"@geoplatform/client\";\n\n\n\n\nexport interface SemanticDialogData {\n    selected : Item[];\n    service  : KGService;\n}\n\n\n@Component({\n  selector: 'gp-semantic-filter-dialog',\n  templateUrl: 'semantic.dialog.html',\n  styleUrls: ['./semantic.dialog.less']\n})\nexport class SemanticFilterDialog {\n\n    public  suggested : any[];\n    public  termQuery : string;\n    private kgQuery   : KGQuery;\n\n    //pagination\n    public  currentPage    : number = 0;\n    public  totalSuggested : number = 0;\n\n    constructor (\n        public dialogRef: MatDialogRef<SemanticFilterDialog>,\n        @Inject(MAT_DIALOG_DATA) public data: SemanticDialogData\n    ) {\n        this.kgQuery = new KGQuery().page(this.currentPage).pageSize(12);\n    }\n\n    onNoClick () : void {\n        this.dialogRef.close();\n    }\n\n\n    /**\n     * @param {string} value - user input to filter options with\n     * @return {Promise} resolving array of string options\n     */\n    filterValues ( value: string ) : void {\n\n        if(!value) {    //require user to provide input before searching\n            this.suggested = [];\n            this.totalSuggested = 0;\n            return;\n        }\n\n        this.kgQuery.q(value);\n\n        this.data.service.suggest(this.kgQuery)\n        .then( ( response : SearchResults ) => {\n            let hits = response.results;\n            // if(current && current.length) {\n            //     hits = hits.filter(o => { return current.indexOf(o.uri)<0; });\n            // }\n            this.suggested = hits;\n            this.totalSuggested = response.totalResults;\n        })\n        .catch(e => {\n            //display error message indicating an issue searching...\n        });\n    }\n\n    addValue ( arg : Item) : void {\n        this.data.selected.push( arg );\n    }\n\n    removeValue ( value: Item ) : void {\n        let index = -1;\n        this.data.selected.forEach( (p,i) => { if(p.uri === value.uri) { index = i; } });\n        if (index >= 0) {\n            this.data.selected.splice(index, 1);\n        }\n    }\n\n    isSelected ( arg : Item ) : boolean {\n        return this.data.selected.length > 0 &&\n            !!this.data.selected.find( (s) => s.uri === arg.uri);\n    }\n\n\n    /**\n     * @param pageNo - new page number being requested\n     */\n    onPageChange( pageNo : number ) {\n        if(this.currentPage !== pageNo-1 ) {\n            this.kgQuery.page( pageNo-1 );\n            this.filterValues( this.termQuery );\n        }\n    }\n}\n","\nimport {\n    Component, OnInit, OnDestroy, Input, Output, EventEmitter, Inject\n} from '@angular/core';\nimport { HttpClient } from \"@angular/common/http\";\nimport { MatDialog } from '@angular/material/dialog';\nimport { Observable, Subject, of, from } from 'rxjs';\nimport { map, flatMap, startWith } from 'rxjs/operators';\nimport { Item, Config, QueryParameters, KGService } from \"@geoplatform/client\";\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\nimport { SemanticDialogData, SemanticFilterDialog } from \"./semantic.dialog\";\n\n\n\n@Component({\n  selector: 'gp-semantic-filter',\n  templateUrl: './semantic.component.html',\n  styleUrls: ['./semantic.component.less']\n})\nexport class SemanticFilterComponent implements OnInit {\n\n    @Input()  key       : string;\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    public isCollapsed : boolean = true;\n    public selected  : Item[];\n    public visibleAmount : number = 10;\n\n    constructor(\n        @Inject(KGService) private service : KGService,\n        @Inject(MatDialog) public dialog: MatDialog\n    ) {\n\n    }\n\n    ngOnInit() {\n        this.selected = [];\n    }\n\n    openDialog(): void {\n\n        const dialogRef = this.dialog.open(SemanticFilterDialog, {\n            width: '50%',\n            data: { service : this.service, selected: [] }\n        });\n\n        dialogRef.afterClosed().subscribe( ( result : Item[] ) => {\n            if(result && result.length) {\n                this.selected = this.selected.concat(result);\n                this.notify();\n            }\n        });\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( ) {\n        let key = this.key;\n        let change = {};\n        change[key] = this.selected.map(s=>s.uri);\n        change[QueryParameters.PAGE] = 0;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n\n    hasSelections() : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    isSelected( arg : Item ) : boolean {\n        return this.hasSelections() && this.getIndexOf(arg) >= 0;\n    }\n\n    getIndexOf( arg : Item ) : number {\n        if(!this.selected || !this.selected.length) return -1;\n        return this.selected.findIndex( s=> s.uri === arg.uri );\n    }\n\n\n    /**\n     * @param arg - item or identifier\n     */\n    toggle( arg : Item ) {\n        let idx = this.getIndexOf(arg);\n        if( idx >= 0 ) this.selected.splice(idx, 1);    //found, remove it\n        else this.selected.push(arg);                   //not found, add it\n        this.notify();\n    }\n\n    clear () {\n        if(this.hasSelections()) {\n            this.selected = [];\n            this.notify();\n\n        } else if( this.isCollapsed ){\n            this.isCollapsed = false;\n        }\n    }\n\n}\n","import { Component, Input, Output, EventEmitter, OnInit, OnDestroy, Inject } from '@angular/core';\nimport {\n    Query, QueryParameters, ItemTypes, Item, ItemService, SearchResults\n} from '@geoplatform/client';\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n    selector: 'gp-service-type-filter',\n    templateUrl: './service-types.component.html',\n    styleUrls: ['./service-types.component.scss']\n})\nexport class ServiceTypeFilterComponent implements OnInit, OnDestroy {\n\n    //the key associated with this filter's selections\n    @Input()  key       : string = QueryParameters.SERVICE_TYPES;\n    //the current set of values\n    @Input()  selected  : string[] = [];\n    //the query being affected by this filter's selections\n    // used to determine if this filter should be shown or not\n    @Input()  query     : Query;\n    @Output() onEvent   : EventEmitter<SearchEvent> = new EventEmitter<SearchEvent>();\n\n    public  isCollapsed : boolean = true;\n    public  types       : Item[] = [];\n\n    constructor(\n        @Inject(ItemService) private service : ItemService\n    ) { }\n\n    ngOnInit() {\n        let query = new Query({\n            type:           'dct:Standard',\n            resourceType:   'ServiceType',\n            fields:         \"availableVersions\",\n            size:           50,\n            sort:           'label,asc'\n        });\n        this.service.search(query)\n        .then( (response : SearchResults) => {\n            this.types = response.results;\n        })\n        .catch( (error : Error) => {\n            console.log(\"Error loading supported service types\");\n        });\n    }\n\n    ngOnDestroy () {\n        this.types = null;\n        // this.svcQuery = null;\n        // this.serviceSvc = null;\n        // this.serviceTypes = null;\n        // this.serviceTypesError = null;\n        // this.byType = null;\n    }\n\n    hasSelections () : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    isSelected (value : any) : boolean {\n        return this.hasSelections() && this.selected.indexOf(value) >= 0;\n    }\n\n    getIndexOf(value : any) : number {\n        return this.hasSelections() ? this.selected.indexOf(value) : -1;\n    }\n\n    isSupported() : boolean {\n        if(this.query) {\n            let types = this.query.getTypes();\n            return types && types.length && types.indexOf(ItemTypes.SERVICE)>=0;\n        }\n        return false;\n    }\n\n    toggle (value : any) {\n        let result = this.selected.slice(0);\n        let idx = this.getIndexOf(value);\n        if(idx >= 0) {\n            result = result.splice(idx, 1);\n        } else {\n            result.push(value);\n        }\n\n        let change = {};\n        change[this.key] = result;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n\n    clear () {\n        if(!this.hasSelections())\n            this.isCollapsed = !this.isCollapsed; //toggle collapsed state\n        else {\n            let change = {};\n            change[this.key] = null;\n            let event = new SearchEvent(EventTypes.QUERY, change);\n            this.onEvent.emit(event);\n        }\n    }\n\n    getCount (value : any) : number {\n        // var facet = this.service.getFacet(\"serviceTypes\");\n        // if(!facet) return '';\n        // var valObj = facet.buckets.find(function(v) { return v.label===value; });\n        // if(!valObj) return '';\n        // return valObj.count;\n        return 0;\n    }\n\n\n\n\n/*\n    // isSupported () {\n    //     let objTypes = this.service.getTypes();\n    //     return objTypes && (\n    //         ~objTypes.indexOf( APIClient.ItemTypes.DATASET ) ||\n    //         ~objTypes.indexOf( APIClient.ItemTypes.LAYER )\n    //     );\n    // }\n\n    getValue() : any {\n        // return this.service.getService();\n        return null;\n    }\n\n    setValue( value : any ) {\n        // this.service.setService(value);\n        // this.svcInstValue = value;\n        //\n        // if(!this.hasSelections())\n        // this.values = [];\n    }\n\n    hasSelections () : boolean {\n        // return !!this.getValue();\n        return false;\n    }\n\n    isSelected ( value : any ) {\n        // let current = this.getValue();\n        // if(!current) return false;\n        // return current === value.id;\n        return false;\n    }\n\n    toggle ( value : any ) {\n        // let val = value;\n        // if(this.isSelected(value)) {\n        //     val = null;\n        // }\n        // this.setValue(val);\n    }\n\n    clear () {\n        if(!this.hasSelections()) {\n            this.isCollapsed = !this.isCollapsed;\n        } else {\n            this.setValue(null);\n        }\n    }\n\n    getCount ( value : any ) : number {\n        return 0;\n    }\n\n\n    updateValues (query : Query) {\n\n        // if(!query || !query.length) {\n        //     this.values = this.values.filter( v => this.isSelected(v) );\n        //     return;\n        // }\n        //\n        // this.svcQuery.q(query);\n        //\n        // return this.serviceSvc.search(this.svcQuery)\n        // .then( (response) => {\n        //     this.$timeout( () => {\n        //         let newValues = response.results;\n        //         if(this.hasSelections() && this.values && this.values.length) {\n        //             let existing = this.values.filter( v => {\n        //                 //find existing values that are selected\n        //                 return this.isSelected(v) &&\n        //                 // but not in new set of values\n        //                 !newValues.filter( nv => nv.id === v.id).length;\n        //             });\n        //             newValues = existing.concat(newValues);\n        //         }\n        //         this.values = newValues;\n        //     });\n        // })\n        // .catch( (error) => {\n        //     let err = (error && error.message) ? error :\n        //     (error && error.data) ? error.data : {\n        //         message: \"something unexpected came back from GeoPlatform API\"\n        //     };\n        //     console.log(\"An error occurred searching Services...\");\n        //     console.log(err.message);\n        // });\n    }\n*/\n}\n","import {\n    Component, OnInit, OnChanges, SimpleChanges,\n    Input, Output, EventEmitter, Inject\n} from '@angular/core';\nimport { Item, QueryParameters, ItemService } from \"@geoplatform/client\";\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n\n@Component({\n  selector: 'gp-similarity-filter',\n  templateUrl: './similarity.component.html',\n  styleUrls: ['./similarity.component.less']\n})\nexport class SimilarityFilterComponent implements OnInit, OnChanges {\n\n    @Input()  key     : string = QueryParameters.SIMILAR_TO;\n    @Input()  selected: string;\n    @Output() onEvent : EventEmitter<SearchEvent> = new EventEmitter<SearchEvent>();\n\n    public  isCollapsed : boolean = true;\n    public    item : Item;\n\n    constructor( @Inject(ItemService) private service : ItemService ) { }\n\n    ngOnInit() { }\n\n    ngOnChanges( changes : SimpleChanges ) {\n        if(changes.selected) {\n            let id = changes.selected.currentValue;\n            if(!id) this.item = null;\n            else {\n                this.service.get(id)\n                .then( (result : Item) => { this.item = result; })\n                .catch( (err : Error) => {\n                    console.log(\"SimilarityFilter.OnChange('selected') : \", err);\n                });\n            }\n        }\n    }\n\n\n    clear() {\n        let change = {};\n        change[this.key] = null;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n}\n","import { Component, Input, Output, EventEmitter, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ItemTypes, QueryParameters, ItemService } from '@geoplatform/client';\nimport { ItemFilterComponent } from '../item-filter.component';\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n  selector: 'gp-theme-filter',\n  templateUrl: '../item-filter.component.html',\n  styleUrls: ['./theme.component.less']\n})\nexport class ThemeFilterComponent extends ItemFilterComponent {\n\n    @Input()  key       : string = QueryParameters.THEMES_ID;\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(\n        @Inject(ItemService) service : ItemService,\n        dialog : MatDialog\n    ) {\n        super(service, ItemTypes.CONCEPT, \"Themes\", dialog);\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( event : SearchEvent ) {\n        this.onEvent.emit(event);\n    }\n\n    initQuery() {\n        super.initQuery();\n        this.query.fields(['scheme']);\n    }\n\n    getDialogOptions() : any {\n        let opts = super.getDialogOptions();\n        opts.data.subHeading = \"scheme\";\n        return opts;\n    }\n\n}\n","import { Component, Input, Output, EventEmitter, Inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ItemTypes, QueryParameters, ItemService } from '@geoplatform/client';\nimport { ItemFilterComponent } from '../item-filter.component';\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n@Component({\n  selector: 'gp-topic-filter',\n  templateUrl: '../item-filter.component.html',\n  styleUrls: ['./topic.component.less']\n})\nexport class TopicFilterComponent extends ItemFilterComponent {\n\n    @Input()  key       : string = QueryParameters.TOPIC_ID;\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(\n        @Inject(ItemService) service : ItemService,\n        dialog : MatDialog\n    ) {\n        super(service, ItemTypes.TOPIC, \"Topics\", dialog);\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( event : SearchEvent ) {\n        this.onEvent.emit(event);\n    }\n\n}\n","import {\n    Component, OnInit, OnChanges,\n    Input, Output, EventEmitter, SimpleChanges\n} from '@angular/core';\nimport { ItemTypes, ItemTypeLabels, QueryParameters } from '@geoplatform/client';\nimport { SearchEvent, EventTypes } from '../../../event';\n\n\n\n@Component({\n  selector: 'gp-type-filter',\n  templateUrl: './type.component.html',\n  styleUrls: ['./type.component.less']\n})\nexport class TypeFilterComponent implements OnInit {\n\n    @Input()  key       : string = QueryParameters.TYPES;\n    @Input()  facets    : any[];\n    @Input()  selected  : string[] = [];\n    @Output() onEvent   : EventEmitter<any> = new EventEmitter<any>();\n\n    public isCollapsed : boolean = true;\n    public choices : any[];\n    public visibleAmount : number = 10;\n\n    constructor() {\n\n    }\n\n    ngOnInit() {\n        this.choices = Object.keys(ItemTypes).map(key=>{\n            let type = ItemTypes[key];\n            if( ItemTypes.STANDARD === type || ItemTypes.RIGHTS_STATEMENT === type) return null;\n            return { label: ItemTypeLabels[type], value: type };\n        }).filter(v=>!!v);\n        // console.log(\"TypeFilter.onInit() \" + JSON.stringify(this.selected));\n    }\n\n    ngOnChanges( changes : SimpleChanges ) {\n        if(changes.selected) {\n            let value = changes.selected.currentValue;\n\n            console.log(\"TypeFilter.onChanges() \" + JSON.stringify(value));\n\n            //if a selected value wasn't provided, ensure it's 'null' and not undefined\n            if(value === undefined) {\n                this.selected = [];\n            } else if(typeof(value) === 'string') {\n                this.selected = [value];\n            }\n        }\n    }\n\n    getKey() : string {\n        return this.key;\n    }\n\n    notify( event : SearchEvent ) {\n        this.onEvent.emit(event);\n    }\n\n\n    hasSelections() : boolean {\n        return this.selected && this.selected.length > 0;\n    }\n\n    isSelected( arg : any ) : boolean {\n        return this.getIndexOf(arg) >= 0;\n    }\n\n    getIndexOf( arg: any ) : number {\n        return this.selected ? this.selected.indexOf(arg) : -1;\n    }\n\n\n    /**\n     * @param arg - item or identifier\n     */\n    toggle( arg : any ) {\n\n        let idx = this.getIndexOf(arg);\n        if(idx >= 0) {\n            this.selected.splice(idx, 1);\n        } else {\n            this.selected.push(arg);\n        }\n\n\n        let key = this.getKey();\n        let value = this.selected.length ? this.selected : null;\n        let change = {};\n        change[key] = value;\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.notify(event);\n    }\n\n    clear () {\n        if(this.hasSelections()) {\n            this.selected = [];\n            let key = this.getKey();\n            let change = {};\n            change[key] = null;\n            let event = new SearchEvent(EventTypes.QUERY, change);\n            this.notify(event);\n\n        } else if( this.isCollapsed ){\n            this.isCollapsed = false;\n        }\n    }\n\n\n    getCount( value : any ) : string|number {\n        let facet = (this.facets||[]).find( (facet) => facet.name === this.key );\n        if(!facet || !facet.buckets || !facet.buckets.length) {\n            // console.log(\"No facet for \" + this.key);\n            return '';\n        }\n        let valObj = facet.buckets.find( (v) => v.label === value );\n        if(!valObj) {\n            // console.log(\"No bucket for \" + value);\n            return '';\n        }\n        return valObj.count;\n    }\n\n}\n","import {\n    Component, OnInit, Input, Output, EventEmitter, ViewChild\n} from '@angular/core';\nimport {\n    MatDatepicker, MatDatepickerInputEvent,\n    DateAdapter, NativeDateAdapter, MAT_DATE_FORMATS\n} from '@angular/material';\nimport { QueryParameters } from \"@geoplatform/client\";\n\nimport { SearchEvent, EventTypes } from '../../../event';\n\n\nconst BEFORE = \"Before\";\nconst AFTER  = \"After\";\n\n\n@Component({\n  selector: 'gp-modified-filter',\n  templateUrl: './modified.component.html',\n  styleUrls: ['./modified.component.less']\n})\nexport class ModifiedFilterComponent implements OnInit {\n\n    @Input() key            : string = QueryParameters.MODIFIED;\n    @Input() value          : number;\n    @Output() onEvent       : EventEmitter<any> = new EventEmitter<any>();\n    @ViewChild(MatDatepicker, {static:false}) datepicker: MatDatepicker<Date>;\n\n    public isCollapsed         : boolean = true;\n    public format              : string = 'MM/DD/YYYY' //'MMM dd yyyy';\n    public debouncePromise     : any = null;\n    public lastModifiedOptions : string[] = [BEFORE, AFTER];\n    public lastModifiedDir     : string = BEFORE;\n\n    constructor() { }\n\n    ngOnInit() {\n        // console.log(\"Modified.init() : \" + this.lastModifiedDir);\n    }\n\n    // onKeyUp($event) {\n    //     let text = $event.target.value;\n    //     this.onValueChange(text);\n    // }\n\n    onDateChanged( event: MatDatepickerInputEvent<Date> ) {\n        this.value = event && event.value ? event.value.getTime() : null;\n        this.onValueChange( this.value );\n    }\n\n    onValueChange( value ) {\n        let change = {};\n\n        if(BEFORE === this.lastModifiedDir) {\n            change[QueryParameters.MODIFIED_BEFORE] = value;\n            change[QueryParameters.MODIFIED_AFTER] = null;\n        } else {\n            change[QueryParameters.MODIFIED_AFTER] = value;\n            change[QueryParameters.MODIFIED_BEFORE] = null;\n        }\n\n        let event = new SearchEvent(EventTypes.QUERY, change);\n        this.onEvent.emit(event);\n    }\n\n    onDirChange() {\n        // console.log(\"Modified.onDirChange() : \" + this.lastModifiedDir);\n        if(this.value) {\n            this.onValueChange(this.value);\n        }\n    }\n\n    clear() {\n        if(this.value) {\n            this.value = null;\n            this.onValueChange(this.value);\n        } else {\n            this.isCollapsed = true;\n        }\n    }\n}\n","\nimport { TrackingService } from '@geoplatform/client';\nimport { RPMService      } from '@geoplatform/rpm/src/iRPMService'\n\n\nlet trackingServiceInst : TrackingService;\n\nexport function TrackingServiceFactory ( rpm : RPMService ) {\n    if(!trackingServiceInst) {\n        trackingServiceInst = new TrackingService({ provider: rpm });\n    }\n    return trackingServiceInst;\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n    MatButtonModule, MatIconModule, MatInputModule, MatSelectModule,\n    MatDialogModule, MatProgressBarModule, MatTabsModule, MatPaginatorModule,\n    MatDatepickerModule, MatNativeDateModule, NativeDateModule\n} from '@angular/material';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\n\n\n// Adds window.RPMService to global namespace\nimport { RPMServiceFactory } from '@geoplatform/rpm/dist/js/geoplatform.rpm.browser.js';\nimport { RPMService }        from '@geoplatform/rpm/src/iRPMService'\n// import { RPMStatsService }   from './rpm/rpmstats.service';\n// let RPMStatsServiceFactory = (http: HttpClient) => {\n//     return new RPMStatsService(environment.rpmUrl, environment.rpmToken, http)\n// }\n\n\n// import { GeoPlatformClientModule } from '@geoplatform/client/angular';\n\nimport { TrackingService } from '@geoplatform/client';\nimport { TrackingServiceFactory } from './tracking.factory';\n\n\nimport { AppAuthService, LoginButtonComponent, LoginModalComponent } from './auth';\nimport { ListSelectDialog, MessageDialog } from './dialogs/';\n\n\nimport {\n    SearchService,\n    SearchResultsComponent,\n    SearchResultsItemComponent,\n\n    CommunityFilterComponent,\n    CreatedByFilterComponent,\n    KeywordFilterComponent,\n    PublisherFilterComponent,\n    SchemeFilterComponent,\n    SemanticFilterComponent, SemanticFilterDialog,\n    ServiceTypeFilterComponent,\n    SimilarityFilterComponent,\n    ThemeFilterComponent,\n    TopicFilterComponent,\n    TypeFilterComponent,\n    ModifiedFilterComponent\n} from './search';\n\n\nimport {\n    ImageFallbackDirective,\n    ThumbnailComponent,\n    ResourceLinkComponent,\n    SelectedItemsComponent,\n    HeaderComponent\n} from './components';\n\nimport {\n    ArrayedItemsPipe,\n    LimitToPipe,\n    SortByPipe,\n    FriendlyTypePipe,\n    FixLabelPipe\n} from './pipes';\nimport { GeoPlatformIconDirective } from './directives/icon';\nimport {\n    ItemResolver, NewItemResolver, ErrorResolver, VersionResolver\n} from './resolvers';\nimport { GeoPlatformErrorService  } from './error.service';\nimport { ItemHelper               } from './item-helper';\n\n\n\n\n@NgModule({\n    imports: [\n        RouterModule,\n        CommonModule,\n        FormsModule,\n        MatButtonModule, MatIconModule, MatInputModule, MatSelectModule,\n        MatDialogModule, MatProgressBarModule, MatTabsModule, MatPaginatorModule,\n        MatDatepickerModule, MatNativeDateModule, NativeDateModule,\n        NgbModule,\n        // GeoPlatformClientModule\n    ],\n    exports: [\n        ListSelectDialog,\n        MessageDialog,\n        ImageFallbackDirective, ThumbnailComponent,\n        SelectedItemsComponent,\n        ResourceLinkComponent,\n        LoginButtonComponent, LoginModalComponent,\n        HeaderComponent,\n\n        ArrayedItemsPipe,\n        LimitToPipe,\n        SortByPipe,\n        FriendlyTypePipe,\n        FixLabelPipe,\n\n        GeoPlatformIconDirective,\n\n        SearchResultsComponent,\n        SearchResultsItemComponent,\n\n        CommunityFilterComponent,\n        CreatedByFilterComponent,\n        KeywordFilterComponent,\n        PublisherFilterComponent,\n        SchemeFilterComponent,\n        SemanticFilterComponent, SemanticFilterDialog,\n        ServiceTypeFilterComponent,\n        SimilarityFilterComponent,\n        ThemeFilterComponent,\n        TopicFilterComponent,\n        TypeFilterComponent,\n        ModifiedFilterComponent\n    ],\n    declarations: [\n        ListSelectDialog,\n        MessageDialog,\n        ImageFallbackDirective, ThumbnailComponent,\n        SelectedItemsComponent,\n        ResourceLinkComponent,\n        LoginButtonComponent, LoginModalComponent,\n        HeaderComponent,\n\n        ArrayedItemsPipe,\n        LimitToPipe,\n        SortByPipe,\n        FriendlyTypePipe,\n        FixLabelPipe,\n\n        GeoPlatformIconDirective,\n\n        SearchResultsComponent,\n        SearchResultsItemComponent,\n\n        CommunityFilterComponent,\n        CreatedByFilterComponent,\n        KeywordFilterComponent,\n        PublisherFilterComponent,\n        SchemeFilterComponent,\n        SemanticFilterComponent, SemanticFilterDialog,\n        ServiceTypeFilterComponent,\n        SimilarityFilterComponent,\n        ThemeFilterComponent,\n        TopicFilterComponent,\n        TypeFilterComponent,\n        ModifiedFilterComponent\n    ],\n    providers: [\n        AppAuthService,\n        ErrorResolver,\n        ItemResolver,\n        NewItemResolver,\n        VersionResolver,\n        GeoPlatformErrorService,\n        ItemHelper,\n        SearchService,\n        // {\n        //     provide: RPMStatsService,\n        //     useFactory: RPMStatsServiceFactory,\n        //     deps: [ HttpClient ]\n        // },\n        {\n            provide: RPMService,\n            useValue: RPMServiceFactory()\n        },\n        {\n            provide: TrackingService,\n            useFactory: TrackingServiceFactory,\n            deps: [ RPMService]\n        }\n    ],\n    entryComponents: [\n        ListSelectDialog,\n        MessageDialog\n    ]\n})\nexport class GeoPlatformCommonModule {}\n","\n/*\n    Version of the library exposed to consumers.\n    Long-term this value should be auto-set to be whatever is set in package.json\n */\nexport const GeoPlatformCommonVersion = \"1.0.0\";\n\n// import Polyfills from \"./shared/polyfills\";\n// Polyfills();\n\nexport const DefaultSortOptions = [\n    { value: \"_score,desc\",     label: \"Relevance\"  },\n    { value: \"modified,desc\",   label: \"Most Recently Modified\"  },\n    { value: \"modified,asc\",    label: \"Least Recently Modified\" },\n    { value: \"label,asc\",       label: \"Title [A-Z]\" },\n    { value: \"label,desc\",      label: \"Title [Z-A]\" },\n    { value: \"reliability,asc\", label: \"Reliability\" }\n];\n\nexport * from './auth';\nexport * from './dialogs';\nexport * from './directives';\nexport * from './components';\nexport * from './logger';\nexport * from './error.service';\nexport * from './error';\nexport * from './event';\nexport * from './item-factory';\nexport * from './item-helper';\nexport * from './map-types';\nexport * from './pipes';\nexport * from './resolvers';\nexport * from './search';\nexport * from './module';\nexport * from './tracking.factory';\n"],"names":["Config","ngGpoauthFactory","Subject","Inject","RPMService","Injectable","tslib_1.__param","tslib_1.__extends","Component","debounceTime","distinctUntilChanged","MatDialogRef","MAT_DIALOG_DATA","tslib_1.__decorate","HostBinding","ElementRef","Input","Directive","ItemTypes","EventEmitter","Output","DomSanitizer","BehaviorSubject","Pipe","TrackingEventFactory","TrackingTypes","of","ItemService","TrackingService","empty","Router","Query","GP_MAP_RESOURCE_TYPE","AGOL_MAP_RESOURCE_TYPE","QueryParameters","MatDialog","QueryFacets","KGQuery","KGService","ItemTypeLabels","ViewChild","MatDatepicker","RPMServiceFactory","NgModule","RouterModule","CommonModule","FormsModule","MatButtonModule","MatIconModule","MatInputModule","MatSelectModule","MatDialogModule","MatProgressBarModule","MatTabsModule","MatPaginatorModule","MatDatepickerModule","MatNativeDateModule","NativeDateModule","NgbModule"],"mappings":"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"}