!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@geoplatform/client"),require("@angular/core"),require("rxjs"),require("@geoplatform/rpm/src/iRPMService"),require("@geoplatform/oauth-ng/angular"),require("@angular/material/dialog"),require("rxjs/operators"),require("@angular/platform-browser"),require("@angular/router"),require("@angular/common"),require("@angular/forms"),require("@angular/material"),require("@ng-bootstrap/ng-bootstrap"),require("@geoplatform/rpm/dist/js/geoplatform.rpm.browser.js")):"function"==typeof define&&define.amd?define("@geoplatform/common",["exports","@geoplatform/client","@angular/core","rxjs","@geoplatform/rpm/src/iRPMService","@geoplatform/oauth-ng/angular","@angular/material/dialog","rxjs/operators","@angular/platform-browser","@angular/router","@angular/common","@angular/forms","@angular/material","@ng-bootstrap/ng-bootstrap","@geoplatform/rpm/dist/js/geoplatform.rpm.browser.js"],t):t(((e=e||self).geoplatform=e.geoplatform||{},e.geoplatform.common={}),e.geoplatform.client,e.ng.core,e.rxjs,e.RPMService,e.geoplatform["oauth-ng"],e.ng.material.dialog,e.rxjs.operators,e.ng.platformBrowser,e.ng.router,e.ng.common,e.ng.forms,e.ng.material,e.ngBootstrap,e.geoplatform.rpm)}(this,(function(e,t,n,s,i,a,o,r,l,c,u,p,d,f,g){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function m(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function y(e,t,n,s){var i,a=arguments.length,o=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,s);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}function v(e,t){return function(n,s){t(n,s,e)}}function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=a.next()).done;)o.push(s.value)}catch(e){i={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function I(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}var C=["error","warn","info","debug"],S=new(function(){function e(){this.level="error",this.setLevel(t.Config.logLevel||t.Config.LOG_LEVEL)}return e.prototype.setLevel=function(e){e&&C.indexOf(e)>=0&&(this.level=e),this.info("Log Level : "+this.level)},e.prototype.isVisible=function(e){return C.indexOf(this.level)>=C.indexOf(e)},e.prototype.log=function(e){for(var t=this,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];var i=this.toStr(e);i+=n.map((function(e){return t.toStr(e)})).join(""),console.log(i)},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.isVisible("debug")){var s="[DEBUG] "+this.toStr(e);this.log.apply(this,I([s],t))}},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.isVisible("info")){var s="[INFO] "+this.toStr(e);this.log.apply(this,I([s],t))}},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.isVisible("warn")){var s="[WARN] "+this.toStr(e);this.log.apply(this,I([s],t))}},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s="[ERROR] "+this.toStr(e);this.log.apply(this,I([s],t))},e.prototype.toStr=function(e){return null==e?"":"string"==typeof e?e:JSON.stringify(e)},e}()),k=function(){function e(e){this.authService=e}return e.prototype.ngOnInit=function(){this.init()},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.init=function(){var e=this,t={next:function(t){S.debug("AuthenticatedComponent : User changed to "+(t?t.username:"null")),e.user=t,e.onUserChange(e.user)},error:function(e){S.error("Unable to get authenticated user info: "+e.message)},complete:function(){}};this.gpAuthSubscription=this.authService.subscribe(t),this.user=this.authService.getUser(),this.onUserChange(this.user)},e.prototype.destroy=function(){this.gpAuthSubscription&&(this.gpAuthSubscription.unsubscribe(),this.gpAuthSubscription=null),this.user=null,this.authService=null},e.prototype.isAuthenticated=function(){return!!this.user},e.prototype.getUser=function(){return this.user},e.prototype.getAuthToken=function(){return this.authService.getToken()},e.prototype.checkAuth=function(){return this.authService.check()},e.prototype.canUserEdit=function(e){return!!this.user&&(!!this.user.isAuthorized("gp_editor")||this.isAuthorOf(e))},e.prototype.isAuthorOf=function(e){return!(!this.user||!e)&&(e.createdBy&&e.createdBy===this.user.username)},e.prototype.onUserChange=function(e){},e}(),E=["AUTH_TYPE","IDP_BASE_URL","APP_BASE_URL","ALLOW_SSO_LOGIN","APP_ID","ALLOW_IFRAME_LOGIN","FORCE_LOGIN","CALLBACK","LOGIN_URL","LOGOUT_URL","ALLOW_DEV_EDITS"],x=null;function T(e){if(x)return x;var t={},n=window.GeoPlatform;return n&&n.config&&n.config.auth?t=n.config.auth:(t.APP_BASE_URL=e.wpUrl||"",E.forEach((function(n){var s=e[n];void 0!==s&&((~n.indexOf("ALLOW")||~n.indexOf("FORCE"))&&(s=!0===s||"true"===s),t[n]=s)}))),S.info("Configuring OAuth using: "),S.info(t),x=a.ngGpoauthFactory(t)}var O=function(){function e(e){this.observers={},this.authService=T(t.Config),this.rpm=e,this.init()}return e.prototype.init=function(){var e=this;if(this.user$=new s.Subject,this.authService){var t=this.authService.getMessenger().raw();this.gpAuthSubscription=t.subscribe((function(t){switch(S.debug("Received Auth Message: "+t.name),t.name){case"userAuthenticated":e.onUserChange(t.user);break;case"userSignOut":e.onUserChange(null)}})),this.authService.getUser().then((function(t){e.onUserChange(t)}))}},e.prototype.onUserChange=function(e){S.debug("AuthService.onUserChange() : User is "+(e?e.username:"N/A")),this.user=e,this.user$.next(e)},e.prototype.getMessenger=function(){return this.authService?this.authService.getMessenger().raw():null},e.prototype.isAuthenticated=function(){return!!this.user},e.prototype.getUser=function(){return this.user},e.prototype.getToken=function(){return this.authService?this.authService.getJWT():null},e.prototype.check=function(){var e=this;return this.authService?this.authService.checkWithClient().then((function(t){return e.authService.getUser()})).then((function(t){return setTimeout((function(){e.onUserChange(t)}),100),t})):Promise.resolve(null)},e.prototype.login=function(){this.authService.login()},e.prototype.logout=function(){this.authService.logout()},e.prototype.subscribe=function(e){return this.user$.subscribe(e)},e.prototype.dispose=function(){this.gpAuthSubscription&&(this.gpAuthSubscription.unsubscribe(),this.gpAuthSubscription=null),this.user=null,this.user$=null,this.observers=null,this.authService=null},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[i.RPMService]}]}]},e.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new e(n.ɵɵinject(i.RPMService))},token:e,providedIn:"root"}),e=y([n.Injectable({providedIn:"root"}),v(0,n.Inject(i.RPMService))],e)}(),w=function(e){function s(n){var s=e.call(this,n)||this;return s.idpBaseUrl=t.Config.IDP_BASE_URL||"https://accounts.geoplatform.gov",s.user=null,s}return m(s,e),s.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},s.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},s.prototype.onUserChange=function(t){e.prototype.onUserChange.call(this,t),S.debug("LoginButton.onUserChange() : User is "+(t?t.username:"null")),this.user=t},s.prototype.login=function(){this.authService.login()},s.prototype.logout=function(){this.authService.logout()},s.ctorParameters=function(){return[{type:O}]},s=y([n.Component({selector:"gp-login-button",template:'\n    <div class="btn-account btn-group">\n        \x3c!-- not logged in yet --\x3e\n        <a class="btn-login btn btn-link" (click)="login()" *ngIf="!user">Sign In</a>\n\n        \x3c!-- logged in --\x3e\n        <button type="button" class="btn-login btn btn-link dropdown-toggle" data-toggle="dropdown"\n            aria-expanded="false" *ngIf="user">\n            <span class="fas fa-user"></span>\n            <span class="d-xs-none">{{user?.name}}</span>\n            <span class="caret"></span>\n        </button>\n        <div class="dropdown-menu dropdown-menu-right" role="menu" *ngIf="user">\n            <div class="o-account-details">\n                <div class="o-account-details__avatar">\n                    <span class="fas fa-user"></span>\n                </div>\n                <div class="flex-1">\n                    <div class="a-heading">\n                        {{user?.name}}\n                        <small><em>({{user?.username}})</em></small>\n                    </div>\n                    <div class="u-text--sm">{{user?.email}}</div>\n                    <div class="u-text--sm">{{user?.org}}</div>\n                </div>\n            </div>\n            <div class="d-flex flex-justify-around u-mg-top--sm">\n                <a class="btn btn-sm btn-link" target="_blank" href="{{idpBaseUrl}}/profile">\n                    <span class="fas fa-pencil-alt"></span> Edit Profile\n                </a>\n                <a class="btn btn-sm btn-link" target="_blank" href="{{idpBaseUrl}}/updatepw">\n                    <span class="fas fa-key"></span> Change Password\n                </a>\n            </div>\n            <div class="u-mg-top--sm">\n                <a class="btn-logout btn btn-light btn-block" (click)="logout()">\n                    <span class="fas fa-power-off"></span> Sign Out\n                </a>\n            </div>\n        </div>\n    </div>\n    ',styles:["\n        .btn-login.btn-link {\n            padding: .375em .75em;\n            border-right: none;\n            margin: 0 0.5em;\n            font-weight: 700;\n        }\n        .btn-login.btn-link:hover {\n            background-color: #fff;\n            text-decoration: none;\n            color: #333;\n        }\n        .o-account-details {\n            display: flex;\n            justify-content: space-between;\n            align-items: stretch;\n            margin-top: -0.5em;\n            padding: 1em;\n            background: #185b8a;\n            color: #fff;\n        }\n        .o-account-details__avatar {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            font-size: 6em;\n            margin-right: 0.25em;\n            padding-top: 10px;\n            width: 100px;\n            height: 100px;\n            overflow: hidden;\n            background: #fff;\n            color: #777;\n            border-radius: 100%;\n        }\n        .dropdown-menu .btn.btn-link {\n            display: inline-block;\n            padding: 0.375rem 0.75rem;\n            border-right: none;\n        }\n        .dropdown-menu .btn.btn-link:after {\n            content: '';\n        }\n        .btn.btn-logout {\n            padding: 0.375rem 0.75rem;\n            margin-bottom: -0.5em;\n        }\n        "]})],s)}(k),A=function(){function e(e){this.authService=e,this.showLoginModal=!1,this.forceLogin=t.Config.FORCE_LOGIN}return e.prototype.ngOnInit=function(){var e=this;this.authService&&this.authService.getMessenger().subscribe((function(t){switch(S.debug("LoginModal received auth message: "+t.name),t.name){case"auth:requireLogin":e.showLoginModal=!0;break;case"userAuthenticated":case"iframe:userAuthenticated":e.showLoginModal=!1,e.authService.onUserChange(t.user)}}))},e.prototype.ngOnDestroy=function(){this.showLoginModal=!1},e.prototype.cancel=function(){this.showLoginModal=!1},e.ctorParameters=function(){return[{type:O}]},e=y([n.Component({selector:"gp-login-modal",template:'<div class="gpLoginCover" *ngIf="showLoginModal">\n    <button class="btn btn-danger gpLoginCancelIframe pull-right" *ngIf="!forceLogin" (click)="cancel()">\n        <span class="fas fa-times-circle"></span> Cancel\n    </button>\n    <div class="gpLoginWindow" *ngIf="showLoginModal">\n        <iframe id="gpLoginIFrame" src="/login?redirect_url=${encodeURIComponent(`${window.location.origin}/auth/loading?cachebuster=${(new Date()).getTime()}`)}&cachebuster=${(new Date()).getTime()}"></iframe>\n    </div>\n</div>\n',styles:["\n        .gpLoginCover {\n            position: absolute;\n            top: 0;\n            left: 0;\n            bottom: 0;\n            right: 0;\n            background: rgba(0,0,0,0.6);\n            z-index: 5000;\n            width: 100vw;\n            height: 100vh;\n        }\n\n        .gpLoginCancelIframe {\n          z-index: 5001;\n          position: absolute;\n          right: 0px;\n        }\n\n        .gpLoginWindow {\n          top: 100px;\n          height: 60%;\n          width: 75%;\n          margin: 0 auto;\n          position: relative;\n          z-index: 5001;\n        \tborder: 5px solid #cccccc;\n          border-radius: 10px;\n        }\n\n        .gpLoginWindow iframe {\n          width: 100%;\n          height: 100%\n        }\n\n        .gpLoginWindow .btn-cancel {\n          color: white;\n          background-color: red;\n        }\n\n        .gpLoginWindow .btn {\n          display: inline-block;\n          padding: 6px 12px;\n          margin-bottom: 0;\n          font-size: 14px;\n          font-weight: 400;\n          line-height: 1.42857143;\n          text-align: center;\n          white-space: nowrap;\n          vertical-align: middle;\n          -ms-touch-action: manipulation;\n          touch-action: manipulation;\n          cursor: pointer;\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          background-image: none;\n          border: 1px solid transparent;\n          border-radius: 4px;\n        }\n    "]})],e)}(),P=function(){function e(e,t){var n=this;this.dialogRef=e,this.data=t,this.currentPage=0,this.totalSuggested=0,this.subject=new s.Subject,this.query=t.query.clone().page(this.currentPage),this.subject.pipe(r.debounceTime(300),r.distinctUntilChanged()).subscribe((function(e){n.filterValues(e)}))}return e.prototype.onNoClick=function(){this.dialogRef.close()},e.prototype.onTermChange=function(e,t){!0===t?this.filterValues(e):this.subject.next(e)},e.prototype.filterValues=function(e){var t=this;if(this.termQuery=e,!e)return this.suggested=[],void(this.totalSuggested=0);this.query.q(e),this.isLoading=!0,this.data.service.search(this.query).then((function(e){var n=e.results;t.suggested=n,t.totalSuggested=e.totalResults})).catch((function(e){})).finally((function(){t.isLoading=!1}))},e.prototype.addValue=function(e){this.isSelected(e)?this.removeValue(e):this.data.selected.push(e)},e.prototype.removeValue=function(e){var t=-1;this.data.selected.forEach((function(n,s){n.id===e.id&&(t=s)})),t>=0&&this.data.selected.splice(t,1)},e.prototype.isSelected=function(e){return this.data.selected.length>0&&!!this.data.selected.find((function(t){return t.id===e.id}))},e.prototype.onPageChange=function(e){this.currentPage!==e-1&&(this.query.page(e-1),this.filterValues(this.termQuery))},e.prototype.getSubHeading=function(e){var t=e[this.data.subHeading];return this.getLabelFrom(t)},e.prototype.getLabelFrom=function(e){var t=this;return null==e?"":Array.isArray(e)?e.map((function(e){return t.getLabelFrom(e)})).join(", "):"object"==typeof e&&(e.label||e.title||e.prefLabel)?e.label||e.title||e.prefLabel:""},e.ctorParameters=function(){return[{type:o.MatDialogRef},{type:void 0,decorators:[{type:n.Inject,args:[o.MAT_DIALOG_DATA]}]}]},e=y([n.Component({selector:"gp-list-select-dialog",template:'<h5 mat-dialog-title>Find Items to Select</h5>\n<div mat-dialog-content>\n    <mat-form-field appearance="outline">\n        <mat-label>\n            <mat-icon><span class="fas fa-search"></span></mat-icon>\n            Search\n        </mat-label>\n        <input matInput\n            [(ngModel)]="termQuery" (ngModelChange)="onTermChange($event)"\n            placeholder="Enter keywords to find recommended values">\n        <span matSuffix *ngIf="termQuery?.length" (click)="onTermChange(null, true)"\n            class="fas fa-times t-fg--gray-md">\n        </span>\n    </mat-form-field>\n\n    <div class="d-flex flex-justify-between flex-align-stretch">\n\n        <div style="flex: 1 0 49%; margin-right: 1%;">\n            <div class="a-heading">\n                Recommendations ({{totalSuggested||0}})\n                <span *ngIf="isLoading" class="fas fa-spinner fa-spin"></span>\n            </div>\n            <div class="m-list-section">\n                <div class="list-group">\n                    <em *ngIf="!suggested?.length">Enter keywords above to receive suggested values to use.</em>\n                    <div *ngFor="let item of suggested" class="list-group-item"\n                        (click)="addValue(item)" [ngClass]="{\'active\':isSelected(item)}">\n                        <a>\n                            <span gpIcon [item]="item"></span>\n                            {{item.label||item.title||item.prefLabel}}\n                        </a>\n                        <div *ngIf="data.subHeading" class="u-text--sm t-fg--gray-md">\n                            {{getSubHeading(item)}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="u-text--sm  u-mg-top--md" *ngIf="totalSuggested>0">\n                <ngb-pagination [collectionSize]="totalSuggested"\n                    [pageSize]="12" [maxSize]="2" [size]="\'sm\'"\n                    [rotate]="true" [(page)]="currentPage"\n                    (pageChange)="onPageChange($event)">\n                </ngb-pagination>\n            </div>\n        </div>\n        <div style="flex: 1 0 50%">\n            <div class="a-heading">Selected ({{data?.selected?.length||0}})</div>\n            <div class="m-list-section">\n                <div class="list-group">\n                    <em *ngIf="!data.selected?.length">No values selected.</em>\n                    <div *ngFor="let item of data?.selected" class="list-group-item">\n                        <span class="fas fa-times t-fg--danger" (click)="removeValue(item)"></span>&nbsp;\n                        <a>\n                            <span gpIcon [item]="item"></span>\n                            {{item.label||item.title||item.prefLabel||"Untitled Item"}}\n                        </a>\n                        <div *ngIf="data.subHeading" class="u-text--sm t-fg--gray-md">\n                            {{getSubHeading(item)}}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>\n<div mat-dialog-actions class="d-flex flex-justify-end flex-align-center">\n    <button type="button" mat-flat-button (click)="onNoClick()">Cancel</button>\n    <button type="button" mat-flat-button color="primary" [mat-dialog-close]="data.selected">Ok</button>\n</div>\n',styles:[":host .mat-form-field{width:100%}"]}),v(1,n.Inject(o.MAT_DIALOG_DATA))],e)}(),L=function(){function e(e,t){switch(this.dialogRef=e,this.data=t,t.type){case"error":this.className="danger";break;case"warn":this.className="warning";break;case"info":this.className="info"}}return e.prototype.close=function(){this.dialogRef.close()},e.prototype.getIconClass=function(){switch(this.data.type){case"error":return"fas fa-exclamation-circle";case"warn":return"fas fa-exclamation-triangle";case"info":return"fas fa-info-circle"}return""},e.ctorParameters=function(){return[{type:o.MatDialogRef},{type:void 0,decorators:[{type:n.Inject,args:[o.MAT_DIALOG_DATA]}]}]},y([n.HostBinding("class")],e.prototype,"className",void 0),e=y([n.Component({selector:"gp-message-dialog",template:'<div class="a-heading" mat-dialog-title>\n    <span [attr.class]="getIconClass()"></span>\n    {{data.label || "Message"}}\n</div>\n<div mat-dialog-content>\n    {{data.message}}\n</div>\n<div mat-dialog-actions class="d-flex flex-justify-end flex-align-center">\n    <button type="button" mat-flat-button (click)="close()">Dismiss</button>\n</div>\n',styles:[":host.danger .mat-dialog-title{color:#d53c37}:host.warning .mat-dialog-title{color:#b35d29}:host.info .mat-dialog-title{color:#007fa4}"]}),v(1,n.Inject(o.MAT_DIALOG_DATA))],e)}(),M=function(){function e(e){this.el=e,this.themed=!0}return e.prototype.ngOnInit=function(){if(this.item){var e=this.item.type.toLowerCase().replace(/^[a-z]+\:/,"");e="icon-"+e,this.themed&&(e+=" is-themed"),this.el.nativeElement.className=e}},e.ctorParameters=function(){return[{type:n.ElementRef}]},y([n.Input()],e.prototype,"item",void 0),y([n.Input()],e.prototype,"themed",void 0),e=y([n.Directive({selector:"[gpIcon]"})],e)}(),_=function(){function e(){this.appName="Application",this.class="o-header",this.portalUrl=t.Config.portalUrl||"https://www.geoplatform.gov"}return y([n.Input()],e.prototype,"appName",void 0),y([n.HostBinding("class")],e.prototype,"class",void 0),e=y([n.Component({selector:"gp-app-header",template:'<div class="o-header__primary" role="banner">\n    <h1 class="a-brand">\n        <a href="{{portalUrl}}">\n            <img src="/assets/favicon.png" style="vertical-align:top;">\n            GeoPlatform.gov\n        </a>\n        &nbsp;\n        {{appName}}\n    </h1>\n    <nav class="a-nav" role="navigation" aria-label="top-level navigation links">\n        <ng-content select="[menu]"></ng-content>\n        <gp-login-button role="menuitem">Sign In</gp-login-button>\n    </nav>\n</div>\n',styles:[".o-header .o-header__primary{padding:1em 1.5em}.o-header .o-header__primary .a-nav a{font-weight:700;border-right:none;padding:.375em .75em}.o-header .o-header__primary .a-nav a.active{border-bottom:1px solid #185b8a}"]})],e)}(),D=[t.ItemTypes.DATASET,t.ItemTypes.SERVICE,t.ItemTypes.LAYER,t.ItemTypes.MAP,t.ItemTypes.GALLERY,t.ItemTypes.COMMUNITY,t.ItemTypes.APPLICATION,t.ItemTypes.TOPIC,t.ItemTypes.WEBSITE],R=function(){function e(){}return e.isAsset=function(e){if(!e)return!1;var t=null;return"string"==typeof e?t=e:e.type&&(t=e.type),t&&D.indexOf(t)>=0},e.getIcon=function(e){var n="dataset";switch(e.type){case t.ItemTypes.CONTACT:n="vcard";break;default:n=e.type.replace(/^[a-z]+\:/i,"").toLowerCase()}return"icon-"+n},e.getLabel=function(e){if(!e||!e.type)return"Unknown type";switch(e.type){case t.ItemTypes.ORGANIZATION:return e.label||e.name||"Un-titled resource";case t.ItemTypes.CONCEPT:case t.ItemTypes.CONCEPT_SCHEME:return e.label||e.prefLabel||"Un-titled resource";case t.ItemTypes.CONTACT:var n=e.fullName||"",s=e.positionTitle||"",i=e.orgName||"",a=n+(n.length?" - ":"")+s+(s.length?" - ":"")+i;return a.length||(a=e.email||"Untitled Contact"),a;default:return e.label||e.title||"Un-titled resource"}},e.getTypeLabel=function(e){if(!e)return"Unknown Resource Type";var n=null;if("string"==typeof e)n=e;else{if(!e.type)return null;n=e.type}switch(n){case t.ItemTypes.DATASET:case t.ItemTypes.SERVICE:case t.ItemTypes.ORGANIZATION:case t.ItemTypes.CONCEPT:return n.replace(/^[a-z]+\:/i,"");case t.ItemTypes.CONCEPT_SCHEME:return"Concept Scheme";case t.ItemTypes.WEBSITE:return"Website";case t.ItemTypes.CONTACT:return"Contact";default:return n}},e.getTypeKey=function(e){if(!e)return null;var n=null;if("string"==typeof e)n=e;else{if(!e.type)return null;n=e.type}switch(n){case t.ItemTypes.GALLERY:return"galleries";case t.ItemTypes.COMMUNITY:return"communities";case t.ItemTypes.CONTACT:return"contacts";default:return n.replace(/^[a-z]+\:/i,"").toLowerCase()+"s"}},e.determineIconType=function(e){return"/assets/icons/"+e.replace(/^[a-z]+\:/i,"").toLowerCase()+".svg"},e.getItemDetailsUrl=function(e){return e&&e.type&&e.id?t.Config.portalUrl+"/resources/"+this.getTypeKey(e)+"/"+e.id:null},e=y([n.Injectable()],e)}(),j=function(){function e(){this.external=!1}return e.prototype.ngOnInit=function(){},e.prototype.hasIcon=function(){return!0},e.prototype.getIcon=function(){return R.getIcon(this.item)},e.prototype.getLabel=function(){return R.getLabel(this.item)},e.prototype.getType=function(){return R.getTypeKey(this.item)},e.prototype.getIconClass=function(){var e=R.getTypeLabel(this.item);return"Contact"===e&&(e="vcard"),"Product"===e&&(e="imageproduct"),"icon-"+e.toLowerCase()},y([n.Input()],e.prototype,"item",void 0),y([n.Input()],e.prototype,"icon",void 0),y([n.Input()],e.prototype,"external",void 0),e=y([n.Component({selector:"gp-resource-link",template:'<a routerLink="/view/{{item?.id}}">\n    <span *ngIf="hasIcon()" class="a-icon {{getIconClass()}}"></span>\n    {{getLabel()}}\n</a>\n',styles:[""]})],e)}(),U=function(){function e(){this.onEvent=new n.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){},e.prototype.clear=function(){this.onEvent.emit({name:"selected:clear"})},e.prototype.remove=function(e){},y([n.Input()],e.prototype,"selected",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-selected-items",template:'<div class="o-selected-items">\n\n    <div class="list-group list-group-sm u-text--sm">\n\n        <div *ngIf="!selected || !selected.length" class="list-group-item">\n            <div class="t-fg--gray-md t-text--italic">Nothing selected</div>\n        </div>\n\n        <div *ngFor="let item of selected"\n            class="list-group-item d-flex flex-justify-between flex-align-center">\n            <div class="flex-1">\n                <span class="icon-{{item.type.toLowerCase()}} is-themed"></span>\n                {{item.label}}\n            </div>\n            <button type="button" class="btn btn-link u-mg-left--sm" (click)="remove(item)">\n                <span class="fas fa-times-circle t-fg--danger"></span>\n            </button>\n        </div>\n\n    </div>\n\n    <div class="list-group list-group-sm u-text--sm u-mg-top--md">\n\n        <ng-content select="[actions]"></ng-content>\n\n        <div class="list-group-item d-flex flex-justify-between flex-align-center"\n            [ngClass]="{\'is-faded\':!selected?.length}"\n            (click)="clear()">\n            <div class="flex-1">Clear Selections</div>\n            <button type="button" class="btn btn-link">\n                <span class="fas fa-times-circle t-fg--danger"></span>\n            </button>\n        </div>\n    </div>\n\n</div>\n',styles:[".o-selected-items{padding:1em}"]})],e)}(),N=function(){function e(){this.fallback="/assets/img-404.png"}return e.prototype.onImgError=function(){this.src=this.fallback},e.prototype.onImgLoad=function(){this.className="is-image-loaded"},y([n.Input()],e.prototype,"src",void 0),y([n.Input()],e.prototype,"fallback",void 0),y([n.HostBinding("class")],e.prototype,"className",void 0),e=y([n.Directive({selector:"img[fallback]",host:{"(error)":"onImgError()","(load)":"onImgLoad()","[src]":"src"}})],e)}(),q=function(){function e(e){this.sanitizer=e}return e.prototype.ngOnInit=function(){},e.prototype.getThumbnailUrl=function(){return this.item.thumbnail&&this.item.thumbnail.url?this.item.thumbnail.url:t.Config.ualUrl+"/api/items/"+this.item.id+"/thumbnail"},e.prototype.getBackgroundImage=function(){if(!this.item||!this.item.thumbnail)return this.getFallbackBackgroundImage();var e=this.item.thumbnail,t=e.mediaType||"image/png";if(e.contentData){var n=e.contentData;return this.sanitizer.bypassSecurityTrustStyle("url(data:"+t+";base64,"+n+")")}},e.prototype.getFallbackBackgroundImage=function(){return"url("+this.getFallbackUrl()+")"},e.prototype.isEmpty=function(){return!this.item||!this.item.thumbnail||!this.item.thumbnail.url&&!this.item.thumbnail.contentData},e.prototype.hasURL=function(){return this.item.thumbnail&&!!this.item.thumbnail.url},e.prototype.hasContentData=function(){return this.item.thumbnail&&!!this.item.thumbnail.contentData&&!this.item.thumbnail.url},e.prototype.getFallbackUrl=function(){return t.Config.ualUrl+"/api/items/"+this.item.id+"/thumbnail"},e.ctorParameters=function(){return[{type:l.DomSanitizer}]},y([n.Input()],e.prototype,"item",void 0),e=y([n.Component({selector:"gp-item-thumbnail",template:'<div class="m-thumbnail" style="position:relative">\n\n    \x3c!-- fallback is to use SVG for item type as its thumbnail --\x3e\n    <div *ngIf="isEmpty()" class="is-16x9 is-fallback">\n        <div\n            [style.background-size]="\'contain\'"\n            [style.background-repeat]="\'no-repeat\'"\n            [style.background-position]="\'50% 0\'"\n            [style.background-image]="getFallbackBackgroundImage()">\n        </div>\n    </div>\n\n    \x3c!-- if there is a thumbnail with URL --\x3e\n    <img *ngIf="hasURL()" src="{{item.thumbnail.url}}" fallback="{{getFallbackUrl()}}">\n\n    \x3c!-- if there is a thumbnail with base64 data --\x3e\n    <div *ngIf="hasContentData()" class="is-16x9">\n        <img\n            [style.background-size]="\'contain\'"\n            [style.background-repeat]="\'no-repeat\'"\n            [style.background-image]="getBackgroundImage()">\n    </div>\n\n</div>\n',styles:[".m-thumbnail img{max-width:100%}"]})],e)}(),F=function(e){function t(t,n,s,i){var a=e.call(this,t)||this;return a.label=n,a.code=s,a.item=i,a}return m(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this._code},set:function(e){this._code=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this._item},set:function(e){this._item=e},enumerable:!0,configurable:!0}),t.from=function(e){if(e instanceof t)return e;var n=new t(e.message);return n.label="An error occurred",n.code=500,n},t}(Error),V=function(){function e(){this.updateSubject=new s.BehaviorSubject(null),this.error$=this.updateSubject.asObservable()}return e.prototype.setError=function(e){var t=F.from(e);this.updateSubject.next(t)},e=y([n.Injectable()],e)}(),Q={CLOSE:Symbol("Close"),OPEN:Symbol("Open"),RESET:Symbol("Reset"),SELECT:Symbol("Select"),SELECT_NONE:Symbol("SelectNone"),QUERY:Symbol("Query"),ADDED:Symbol("Added"),REMOVED:Symbol("Removed"),CHANGED:Symbol("Changed"),ERROR:Symbol("Error")},B=function(){function e(e,t){this.options={},this.type=e,t&&Object.assign(this.options,t)}return e.prototype.getType=function(){return this.type},e.prototype.getOptions=function(){return this.options},e}(),G={PUBLIC:"public",PRIVATE:"private"},z={SUBMITTED:"submitted"};function Y(e,t){return Object.assign({type:e,uri:null,label:"New Item",description:"This item needs a description",resourceTypes:[],createdBy:null,lastModifiedBy:null},t||{})}function $(e,t){return Y(e,Object.assign({keywords:[],alternateTitles:[],purpose:null,themes:[],contacts:[],publishers:[],contributors:[],distributions:[],classifiers:{},landingPage:null,status:z.SUBMITTED,visibility:G.PUBLIC,identifiers:[],extent:{minx:-179,miny:-89,maxx:179,maxy:89},temporal:{startDate:null,endDate:null},statistics:{numViews:0,numLikes:0},usedBy:[],related:[],rights:[]},t||{}))}function H(e,t){e&&t&&(null!==e[t]&&void 0!==e[t]&&void 0!==e[t]||(e[t]=[]))}function K(e,t){e&&t&&void 0===e[t]&&(e[t]=null)}var W,Z=function(){function e(){}return e.create=function(e){switch(e){case t.ItemTypes.MAP:return $(t.ItemTypes.MAP,{layers:[],baseLayer:null,annotations:{},thumbnail:{label:null,url:null,contentData:null,width:0,height:0}});case t.ItemTypes.LAYER:return s=n?[n]:[],$(t.ItemTypes.LAYER,{subLayers:[],parentLayer:null,services:s,layerName:null,layerType:null,legend:null});case t.ItemTypes.SERVICE:return $(t.ItemTypes.SERVICE,{datasets:[],serviceType:null,href:null});case t.ItemTypes.DATASET:return $(t.ItemTypes.DATASET,{services:[]});case t.ItemTypes.GALLERY:return $(t.ItemTypes.GALLERY,{items:[]});case t.ItemTypes.COMMUNITY:return $(t.ItemTypes.COMMUNITY);case t.ItemTypes.CONCEPT:return Y(t.ItemTypes.CONCEPT,{scheme:null});case t.ItemTypes.CONCEPT_SCHEME:return Y(t.ItemTypes.CONCEPT_SCHEME);case t.ItemTypes.ORGANIZATION:return Y(t.ItemTypes.ORGANIZATION,{subOrgOf:null});case t.ItemTypes.CONTACT:return Y(t.ItemTypes.CONTACT,{fullName:null,email:null,tel:null,fax:null,address:{street1:null,street2:null,city:null,state:null,zip:null}});default:return null}var n,s},e.fix=function(e){H(e,"resourceTypes"),R.isAsset(e)&&(H(e,"keywords"),H(e,"alternateTitles"),H(e,"themes"),H(e,"contacts"),H(e,"publishers"),H(e,"contributors"),H(e,"distributions"),H(e,"identifiers"),H(e,"usedBy"),H(e,"related"),H(e,"accessRights"),K(e,"purpose"),K(e,"landingPage"),K(e,"status"),K(e,"visibility"),e.temporal||(e.temporal={startDate:null,endDate:null}),e.extent||(e.extent={minx:-179,miny:-89,maxx:179,maxy:89}))},e}(),J=function(){function e(){}return e.prototype.transform=function(e,t,n){var s=isNaN(n)||n>e.length?e.length:n;return e.slice(0,s).map((function(e){return e[t]})).join(" ")},e=y([n.Pipe({name:"arrayedItems"})],e)}(),X=function(){function e(){}return e.prototype.transform=function(e,t,n){if(e&&e.length>t){var s=isNaN(n)?0:n;return s>0&&(t+=s),e.slice(s,t)}return e},e=y([n.Pipe({name:"limitTo"})],e)}(),ee=function(){function e(){}return e.prototype.transform=function(e,t){return e.sort((function(e,n){return e[t]>n[t]?-1:1}))},e=y([n.Pipe({name:"sortBy"})],e)}(),te=function(){function e(){}return e.prototype.transform=function(e){if(!e||"string"!=typeof e||0===e.length)return e;var t=e,n=e.indexOf(":");return~n&&(t=e.substring(n+1)),"VCard"===t&&(t="Contact"),t},e=y([n.Pipe({name:"friendlyType"})],e)}(),ne=function(){function e(){}return e.prototype.transform=function(e){if(!e||"string"!=typeof e||!e.length)return"Untitled";var t=e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)},e=y([n.Pipe({name:"fixLabel"})],e)}(),se=function(){function e(e,t){this.service=e,this.trackingService=t}return e.prototype.resolve=function(e,n){var i=this,a=e.paramMap.get("id"),o={},r=e.paramMap.get("version");return r&&(o.version=r),this.service.get(a,o).then((function(e){if(i.trackingService){var n=t.TrackingEventFactory(t.TrackingTypes.VIEWED,e);i.trackingService.logEvent(n)}return e})).catch((function(e){return s.of(e)}))},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]},{type:void 0,decorators:[{type:n.Inject,args:[t.TrackingService]}]}]},e=y([n.Injectable(),v(0,n.Inject(t.ItemService)),v(1,n.Inject(t.TrackingService))],e)}(),ie=function(){function e(){}return e.prototype.resolve=function(e,t){var n=e.paramMap.get("version");return Promise.resolve(n||null)},e=y([n.Injectable()],e)}(),ae=function(){function e(e){this.router=e}return e.prototype.resolve=function(e,t){var n=e.params.type,i=Z.create(n);if(i)return s.of(i);new F("Type "+n+" is unsupported","Unsupported Type",400);return this.router.navigateByUrl("error",{skipLocationChange:!1}),s.empty()},e.ctorParameters=function(){return[{type:c.Router}]},e=y([n.Injectable()],e)}(),oe=function(){function e(e){this.router=e}return e.prototype.resolve=function(e,t){var n=e.params.type,i="An error has occurred";"unsupported"===n?i="Type "+n+" is not supported":"404"===n&&(i="Item not found");var a=new Error(i);return s.of(a)},e.ctorParameters=function(){return[{type:c.Router}]},e=y([n.Injectable()],e)}(),re=function(){function e(e){this.service=e,this.selected=[],this.subject=new s.Subject,this.subject$=this.subject.asObservable()}return e.prototype.setQuery=function(e){this.query=e?e.clone():new t.Query,this.subject.next({query:this.query.clone()})},e.prototype.getQuery=function(){return this.query.clone()},e.prototype.getResults=function(){return this.results},e.prototype.search=function(e){var t=this;e&&this.setQuery(e),this.service.search(this.query).then((function(e){S.debug("SearchService.search() - "+e.totalResults+" results found"),t.results=e,t.subject.next({results:e})})).catch((function(e){S.error(e.message)}))},e.prototype.select=function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t._toggleItem(e,!1)})),void this.subject.next({selected:this.selected});this._toggleItem(e,!0)},e.prototype._toggleItem=function(e,t){var n=this;if(e&&e.id){var s=this.selected.findIndex((function(t){return t.id===e.id}));if(s>=0)return this.selected.splice(s,1),void(t&&this.subject.next({selected:this.selected}));this.service.get(e.id).then((function(e){n.selected.push(e),n.selected.sort((function(e,t){return e.label>t.label?1:-1})),t&&n.subject.next({selected:n.selected})})).catch((function(e){S.error("SearchService.select() - Error encountered fetching selected item's details: "+e.message)}))}},e.prototype.isSelected=function(e){return this.selected.length&&e&&e.id&&this.selected.findIndex((function(t){return t.id===e.id}))>=0},e.prototype.hasSelected=function(){return this.selected&&this.selected.length>0},e.prototype.getSelected=function(){return this.selected},e.prototype.clearSelected=function(){this.selected=[],this.subject.next({selected:this.selected})},e.prototype.subscribe=function(e){var t={next:function(t){null!=t&&(t.query&&e.onQueryChange(t.query),t.results&&e.onResultsChange(t.results),t.selected&&e.onSelectedChange(t.selected))},error:function(e){console.log("[ERROR] "+e.message)},complete:function(){}},n=this.subject$.subscribe(t);return this.query&&this.subject.next({query:this.query.clone()}),this.results&&this.subject.next({results:this.results}),this.selected&&this.subject.next({selected:this.selected}),n},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]}]},e=y([n.Injectable(),v(0,n.Inject(t.ItemService))],e)}(),le=function(){function e(e,t,n,s){this.service=e,this.types=t,this.filterLabel="Item",this.isCollapsed=!0,this.filterLabel=n,s&&(this.dialog=s)}return e.prototype.ngOnInit=function(){this.selected=[],this.initQuery()},e.prototype.ngOnDestroy=function(){this.selected=null,this.choices=null,this.service=null,this.query=null,this.types=null},e.prototype.openDialog=function(){var e=this,n=this.getDialogOptions();this.dialog.open(P,n).afterClosed().subscribe((function(n){if(n&&n.length){e.selected=e.selected.concat(n);var s={};s[e.getKey()]=e.selected.map((function(e){return e.id})),s[t.QueryParameters.PAGE]=0;var i=new B(Q.QUERY,s);e.notify(i)}}))},e.prototype.getDialogOptions=function(){return{width:"50%",data:{service:this.service,query:this.query,selected:[]}}},e.prototype.isSupported=function(){return!0},e.prototype.initQuery=function(){this.query=(new t.Query).fields([]).facets([]).types(this.types)},e.prototype.hasSelections=function(){return this.selected&&this.selected.length>0},e.prototype.isSelected=function(e){return e&&this.selected.findIndex((function(t){return t.id===e.id}))>-1},e.prototype.toggle=function(e){if(e){var n=this.selected.findIndex((function(t){return t.id===e.id}));n<0?this.selected.push(e):this.selected.splice(n,1);var s={};s[this.getKey()]=this.selected.map((function(e){return e.id})),s[t.QueryParameters.PAGE]=0;var i=new B(Q.QUERY,s);this.notify(i)}},e.prototype.clear=function(){if(this.hasSelections()){this.selected=[];var e={};e[this.getKey()]=[],e[t.QueryParameters.PAGE]=0;var n=new B(Q.QUERY,e);this.notify(n)}else this.isCollapsed=!this.isCollapsed},e=y([v(0,n.Inject(t.ItemService)),v(3,n.Inject(o.MatDialog))],e)}(),ce=function(e){function s(s,i){var a=e.call(this,s,t.ItemTypes.COMMUNITY,"Communities",i)||this;return a.key=t.QueryParameters.USED_BY_ID,a.onEvent=new n.EventEmitter,a}return m(s,e),s.prototype.getKey=function(){return this.key},s.prototype.notify=function(e){this.onEvent.emit(e)},s.prototype.initQuery=function(){e.prototype.initQuery.call(this)},s.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]},{type:o.MatDialog}]},y([n.Input()],s.prototype,"key",void 0),y([n.Output()],s.prototype,"onEvent",void 0),s=y([n.Component({selector:"gp-community-filter",template:'<div class="m-article o-query-filter" *ngIf="isSupported()">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by {{filterLabel}}\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a *ngIf="dialog" class="m-facet is-linkless" (click)="openDialog()">\n            <span class="fas fa-search"></span> Find {{filterLabel}}...\n        </a>\n        <a class="m-facet active" (click)="clear()" *ngIf="!hasSelections()">No values selected</a>\n        <a class="m-facet" (click)="clear()" *ngIf="hasSelections()">Clear selected</a>\n        <div class="m-facet active" *ngFor="let item of selected" (click)="toggle(item)">\n            <span class="fas fa-check"></span>&nbsp;\n            <span gpIcon [item]="item"></span>\n            {{item.label||"Untitled option"}}\n        </div>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.ItemService))],s)}(le),ue=function(e){function s(s,i){var a=e.call(this,s)||this;return a.service=i,a.key=t.QueryParameters.QUERY,a.onEvent=new n.EventEmitter,a.typeaheadValue=null,a.isCollapsed=!0,a.pagination={page:0,size:10},a.values=[],a.pagedValues=[],a.visibleAmount=10,a}return m(s,e),s.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.selected=null,this.fetchValues()},s.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.values=null,this.pagedValues=null,this.pagination=null,this.selected=null,this.outsideSelection=null},s.prototype.notify=function(){var e={};e[this.key]=this.selected,e[t.QueryParameters.PAGE]=0;var n=new B(Q.QUERY,e);this.onEvent.emit(n)},s.prototype.hasSelections=function(){return this.selected&&this.selected.length>0},s.prototype.isSelected=function(e){return this.hasSelections()&&this.getIndexOf(e)>=0},s.prototype.getIndexOf=function(e){return this.selected&&this.selected.length?this.selected.indexOf(e):-1},s.prototype.toggle=function(e){this.selected&&this.selected===e?this.selected=null:this.selected=e,this.notify()},s.prototype.clear=function(){this.hasSelections()?(this.selected=null,this.notify()):this.isCollapsed&&(this.isCollapsed=!1)},s.prototype.fetchValues=function(){var e=this,n=(new t.Query).pageSize(1).facets(t.QueryFacets.CREATED_BY).parameter("includeFacet._createdBy.size",1e3);this.service.search(n).then((function(t){var n=t.facets.find((function(e){return"createdBy"===e.name}));e.values=n?(n.buckets||[]).map((function(e){return{id:e.label,label:e.label,count:e.count}})):[]})).catch((function(t){e.values=[]})).finally((function(){e.updatePagedValues()}))},s.prototype.nextPage=function(){var e=Math.ceil(this.values.length/this.pagination.size);this.pagination.page=Math.min(e-1,this.pagination.page+1),this.updatePagedValues()},s.prototype.prevPage=function(){this.pagination.page=Math.max(0,this.pagination.page-1),this.updatePagedValues()},s.prototype.updatePagedValues=function(e){var t=this;e&&(this.pagination.page=0);var n=this.values;this.typeaheadValue&&this.typeaheadValue.length&&(n=n.filter((function(e){return e.label.indexOf(t.typeaheadValue)>=0}))),n.length<this.pagination.size&&(this.pagination.page=0,this.pagedValues=n,console.log("Paged Values: "+JSON.stringify(this.pagedValues)));var s=this.pagination.page*this.pagination.size,i=Math.min(s+this.pagination.size,n.length);this.pagedValues=n.slice(s,i),this.checkForOutsideSelections()},s.prototype.checkForOutsideSelections=function(){var e=this.getSelection();e&&!this.pagedValues.find((function(t){return t.id===e}))?this.outsideSelection=e:this.outsideSelection=null},s.prototype.clearTypeAhead=function(){this.typeaheadValue=null,this.updatePagedValues()},s.prototype.toggleCurrentUser=function(){var e=this.getCurrentUserName();e?this.toggle(e):console.log("No user to use to filter")},s.prototype.getCurrentUserName=function(){if(!this.isAuthenticated())return null;var e=this.getUser();return e?e.username:null},s.prototype.getSelection=function(){return null},s.ctorParameters=function(){return[{type:O},{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]}]},y([n.Input()],s.prototype,"key",void 0),y([n.Input()],s.prototype,"selected",void 0),y([n.Output()],s.prototype,"onEvent",void 0),s=y([n.Component({selector:"gp-createdby-filter",template:'<div class="m-article o-query-filter">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by Creator\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n\n        <a class="m-facet" (click)="clear()" [ngClass]="{active:!hasSelections()}">\n            <span class="u-mg-right--sm far"\n                [ngClass]="{\'fa-check-square\': !hasSelections(), \'fa-square\': hasSelections()}"></span>\n            <span *ngIf="!hasSelections()">Any creator</span>\n            <span *ngIf="hasSelections()">Clear Selections</span>\n        </a>\n\n        <a class="m-facet"\n            *ngIf="isAuthenticated() && !isSelected( getCurrentUserName() )"\n            (click)="toggle( getCurrentUserName() )">\n            <span class="fas fa-square t-fg--gray-lt"></span>\n            Me ({{getCurrentUserName()||""}})\n        </a>\n\n        <div class="m-facet" *ngIf="values.length">\n            <div class="input-group-slick">\n                <span class="fas fa-search"></span>\n                <input type="text" class="form-control" placeholder="Find creator by name"\n                    ([ngModel])="typeaheadValue" (change)="updatePagedValues(true)">\n                <span class="fas fa-times" *ngIf="typeaheadValue?.length" (click)="clearTypeAhead()"></span>\n            </div>\n        </div>\n\n        <div class="m-facet d-flex flex-justify-between flex-align-center" *ngIf="values?.length">\n            <button type="button" class="btn btn-xs btn-light" (click)="prevPage()">\n                <span class="fas fa-backward"></span>\n            </button>\n            <div>\n                showing {{pagedValues?.length||\'0\'}}\n                <span *ngIf="typeaheadValue?.length">matches</span>\n                of {{values?.length||\'0\'}} results\n            </div>\n            <button type="button" class="btn btn-xs btn-light" (click)="nextPage()">\n                <span class="fas fa-forward"></span>\n            </button>\n        </div>\n        <div *ngFor="let value of pagedValues; let $index = index" class="m-facet">\n            <a  *ngIf="!isAuthenticated() || (value.id !== getCurrentUserName())"\n                (click)="toggle(value.id)"\n                [ngClass]="{active:isSelected(value.id),\'is-hidden\':$index>visibleAmount}">\n                <span class="u-mg-right--sm far"\n                    [ngClass]="{\'fa-check-square\': isSelected(value.id), \'fa-square\': !isSelected(value.id)}"></span>\n                <span class="u-mg-right--xs far fa-user"></span>\n                <span>{{value.label}}</span>\n                <span class="badge badge-secondary">{{value.count}}</span>\n            </a>\n        </div>\n        \x3c!-- show selections that are not in the filtered values above --\x3e\n        <hr *ngIf="!isCollapsed && outsideSelection">\n        <a  *ngIf="outsideSelection" class="m-facet"\n            (click)="toggle(outsideSelection.id)">\n            <span class="fas fa-check-square"></span>\n            <span class="badge u-text--md t-fg--gray-md"\n                title="This item is selected but not in the filtered values above">\n                <span class="fas fa-info-circle"></span>\n            </span>\n            <span class="u-mg-right--xs far fa-user"></span>\n            {{outsideSelection}}\n        </a>\n    </div>\n</div>\n',styles:[""]}),v(1,n.Inject(t.ItemService))],s)}(k),pe=function(){function e(){this.key=t.QueryParameters.QUERY,this.placeholder="Search GeoPlatform",this.onEvent=new n.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.onKeyUp=function(e){var t=e.target.value;this.onValueChange(t)},e.prototype.onValueChange=function(e){var t={};t[this.key]=e&&e.length?e:null;var n=new B(Q.QUERY,t);this.onEvent.emit(n)},y([n.Input()],e.prototype,"key",void 0),y([n.Input()],e.prototype,"searchString",void 0),y([n.Input()],e.prototype,"placeholder",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-keywords-filter",template:'\n<div class="input-group-slick flex-1">\n    <span class="fas fa-search"></span>\n    <input type="text" class="form-control"\n        placeholder="{{placeholder}}"\n        [(ngModel)]="searchString" (keyup.enter)="onKeyUp($event)">\n    <button type="button" class="btn btn-light" title="Clear keywords"\n        *ngIf="searchString?.length" (click)="searchString=null">\n        <span class="fas fa-times"></span>\n    </button>\n</div>\n\n<button type="button" class="btn btn-secondary"\n    [disabled]="!searchString||!searchString.length"\n    (click)="onValueChange(searchString)"\n    title="Search the GeoPlatform">\n    Search\n</button>\n',styles:[":host{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between}:host>:last-child{margin-left:1em}"]})],e)}(),de=function(e){function s(s,i){var a=e.call(this,s,t.ItemTypes.ORGANIZATION,"Publishers",i)||this;return a.key=t.QueryParameters.PUBLISHERS_ID,a.onEvent=new n.EventEmitter,a}return m(s,e),s.prototype.getKey=function(){return this.key},s.prototype.notify=function(e){this.onEvent.emit(e)},s.prototype.initQuery=function(){e.prototype.initQuery.call(this),this.query.fields(["subOrganizationOf"])},s.prototype.getDialogOptions=function(){var t=e.prototype.getDialogOptions.call(this);return t.data.subHeading="subOrganizationOf",t},s.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]},{type:o.MatDialog}]},y([n.Input()],s.prototype,"key",void 0),y([n.Output()],s.prototype,"onEvent",void 0),s=y([n.Component({selector:"gp-publisher-filter",template:'<div class="m-article o-query-filter" *ngIf="isSupported()">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by {{filterLabel}}\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a *ngIf="dialog" class="m-facet is-linkless" (click)="openDialog()">\n            <span class="fas fa-search"></span> Find {{filterLabel}}...\n        </a>\n        <a class="m-facet active" (click)="clear()" *ngIf="!hasSelections()">No values selected</a>\n        <a class="m-facet" (click)="clear()" *ngIf="hasSelections()">Clear selected</a>\n        <div class="m-facet active" *ngFor="let item of selected" (click)="toggle(item)">\n            <span class="fas fa-check"></span>&nbsp;\n            <span gpIcon [item]="item"></span>\n            {{item.label||"Untitled option"}}\n        </div>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.ItemService))],s)}(le),fe=function(e){function s(s,i){var a=e.call(this,s,t.ItemTypes.CONCEPT_SCHEME,"Scheme",i)||this;return a.key=t.QueryParameters.SCHEMES_ID,a.selected=[],a.onEvent=new n.EventEmitter,a}return m(s,e),s.prototype.getKey=function(){return this.key},s.prototype.notify=function(e){this.onEvent.emit(e)},s.prototype.isSupported=function(){if(this.query){var e=this.query.getTypes();return e&&e.length&&e.indexOf(t.ItemTypes.CONCEPT)>=0}return!1},s.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]},{type:o.MatDialog}]},y([n.Input()],s.prototype,"key",void 0),y([n.Input()],s.prototype,"selected",void 0),y([n.Input()],s.prototype,"query",void 0),y([n.Output()],s.prototype,"onEvent",void 0),s=y([n.Component({selector:"gp-scheme-filter",template:'<div class="m-article o-query-filter" *ngIf="isSupported()">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by {{filterLabel}}\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a *ngIf="dialog" class="m-facet is-linkless" (click)="openDialog()">\n            <span class="fas fa-search"></span> Find {{filterLabel}}...\n        </a>\n        <a class="m-facet active" (click)="clear()" *ngIf="!hasSelections()">No values selected</a>\n        <a class="m-facet" (click)="clear()" *ngIf="hasSelections()">Clear selected</a>\n        <div class="m-facet active" *ngFor="let item of selected" (click)="toggle(item)">\n            <span class="fas fa-check"></span>&nbsp;\n            <span gpIcon [item]="item"></span>\n            {{item.label||"Untitled option"}}\n        </div>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.ItemService))],s)}(le),ge=function(){function e(e,n){this.dialogRef=e,this.data=n,this.currentPage=0,this.totalSuggested=0,this.kgQuery=(new t.KGQuery).page(this.currentPage).pageSize(12)}return e.prototype.onNoClick=function(){this.dialogRef.close()},e.prototype.filterValues=function(e){var t=this;if(!e)return this.suggested=[],void(this.totalSuggested=0);this.kgQuery.q(e),this.data.service.suggest(this.kgQuery).then((function(e){var n=e.results;t.suggested=n,t.totalSuggested=e.totalResults})).catch((function(e){}))},e.prototype.addValue=function(e){this.data.selected.push(e)},e.prototype.removeValue=function(e){var t=-1;this.data.selected.forEach((function(n,s){n.uri===e.uri&&(t=s)})),t>=0&&this.data.selected.splice(t,1)},e.prototype.isSelected=function(e){return this.data.selected.length>0&&!!this.data.selected.find((function(t){return t.uri===e.uri}))},e.prototype.onPageChange=function(e){this.currentPage!==e-1&&(this.kgQuery.page(e-1),this.filterValues(this.termQuery))},e.ctorParameters=function(){return[{type:o.MatDialogRef},{type:void 0,decorators:[{type:n.Inject,args:[o.MAT_DIALOG_DATA]}]}]},e=y([n.Component({selector:"gp-semantic-filter-dialog",template:'<h5 mat-dialog-title>Search for Concepts to Constraining Search Results</h5>\n<div mat-dialog-content>\n    <mat-form-field appearance="outline">\n        <mat-label>\n            <mat-icon><span class="fas fa-search"></span></mat-icon>\n            Search\n        </mat-label>\n        <input matInput [(ngModel)]="termQuery" (ngModelChange)="filterValues($event)"\n            placeholder="Enter keywords to find recommended concepts">\n        <span matSuffix *ngIf="termQuery?.length" (click)="termQuery=null"\n            class="fas fa-times t-fg--gray-md">\n        </span>\n    </mat-form-field>\n\n    <div class="a-heading d-flex flex-justify-between flex-align-center u-mg-bottom--md">\n        Recommendations ({{totalSuggested||0}})\n        <div class="u-text--sm" *ngIf="totalSuggested>0">\n            <ngb-pagination [collectionSize]="totalSuggested"\n                [pageSize]="12" [maxSize]="2" [size]="\'sm\'"\n                [rotate]="true" [(page)]="currentPage"\n                (pageChange)="onPageChange($event)">\n            </ngb-pagination>\n        </div>\n    </div>\n\n    <div class="m-list-section">\n        <div class="list-group">\n            <em *ngIf="!suggested?.length">Enter keywords above to receive suggested concepts to use.</em>\n            <div *ngFor="let concept of suggested" class="list-group-item"\n                (click)="addValue(concept)" [ngClass]="{\'active\':isSelected(concept)}">\n                <div><a class="is-linkless">{{concept.prefLabel||concept.label}}</a></div>\n                <small class="t-fg--gray-md">{{concept.uri}}</small>\n            </div>\n        </div>\n    </div>\n    <hr>\n    <div class="a-heading">Selected ({{data?.selected?.length||0}})</div>\n    <div class="m-list-section">\n        <div class="list-group">\n            <em *ngIf="!data.selected?.length">No concepts selected.</em>\n            <div *ngFor="let concept of data?.selected" class="list-group-item">\n                <div>\n                    <span class="fas fa-times t-fg--danger" (click)="removeValue(concept)"></span>\n                    {{concept.prefLabel||concept.label}}\n                </div>\n                <small class="t-fg--gray-md">{{concept.uri}}</small>\n            </div>\n        </div>\n    </div>\n\n</div>\n<div mat-dialog-actions class="d-flex flex-justify-end flex-align-center">\n    <button type="button" mat-flat-button (click)="onNoClick()">Cancel</button>\n    <button type="button" mat-flat-button color="primary" [mat-dialog-close]="data.selected" cdkFocusInitial>Ok</button>\n</div>\n',styles:[":host .mat-form-field{width:100%}"]}),v(1,n.Inject(o.MAT_DIALOG_DATA))],e)}(),he=function(){function e(e,t){this.service=e,this.dialog=t,this.onEvent=new n.EventEmitter,this.isCollapsed=!0,this.visibleAmount=10}return e.prototype.ngOnInit=function(){this.selected=[]},e.prototype.openDialog=function(){var e=this;this.dialog.open(ge,{width:"50%",data:{service:this.service,selected:[]}}).afterClosed().subscribe((function(t){t&&t.length&&(e.selected=e.selected.concat(t),e.notify())}))},e.prototype.getKey=function(){return this.key},e.prototype.notify=function(){var e={};e[this.key]=this.selected.map((function(e){return e.uri})),e[t.QueryParameters.PAGE]=0;var n=new B(Q.QUERY,e);this.onEvent.emit(n)},e.prototype.hasSelections=function(){return this.selected&&this.selected.length>0},e.prototype.isSelected=function(e){return this.hasSelections()&&this.getIndexOf(e)>=0},e.prototype.getIndexOf=function(e){return this.selected&&this.selected.length?this.selected.findIndex((function(t){return t.uri===e.uri})):-1},e.prototype.toggle=function(e){var t=this.getIndexOf(e);t>=0?this.selected.splice(t,1):this.selected.push(e),this.notify()},e.prototype.clear=function(){this.hasSelections()?(this.selected=[],this.notify()):this.isCollapsed&&(this.isCollapsed=!1)},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.KGService]}]},{type:o.MatDialog,decorators:[{type:n.Inject,args:[o.MatDialog]}]}]},y([n.Input()],e.prototype,"key",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-semantic-filter",template:'\n<div class="m-article o-query-filter">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by Semantic Concepts\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n\n        <a class="m-facet is-linkless" (click)="openDialog()">\n            <span class="fas fa-search"></span> Find Concepts...\n        </a>\n\n        <a class="m-facet" (click)="clear()" [ngClass]="{active:!hasSelections()}">\n            <span *ngIf="!hasSelections()">No concepts selected</span>\n            <span *ngIf="hasSelections()">Clear Selections</span>\n        </a>\n\n        <div class="m-facet" *ngFor="let concept of selected; let $index = index" (click)="toggle(concept)"\n            [ngClass]="{active:isSelected(concept),\'is-hidden\':$index>visibleAmount}">\n            <span class="fas fa-check" *ngIf="isSelected(concept)"></span>\n            <span class="fas fa-square t-fg--gray-xlt" *ngIf="!isSelected(concept)"></span>\n            {{concept.prefLabel}}\n            <div class="u-break--all u-text--sm">{{concept.uri}}</div>\n        </div>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.KGService)),v(1,n.Inject(o.MatDialog))],e)}(),me=function(){function e(e){this.service=e,this.key=t.QueryParameters.SERVICE_TYPES,this.selected=[],this.onEvent=new n.EventEmitter,this.isCollapsed=!0,this.types=[]}return e.prototype.ngOnInit=function(){var e=this,n=new t.Query({type:"dct:Standard",resourceType:"ServiceType",fields:"availableVersions",size:50,sort:"label,asc"});this.service.search(n).then((function(t){e.types=t.results})).catch((function(e){console.log("Error loading supported service types")}))},e.prototype.ngOnDestroy=function(){this.types=null},e.prototype.hasSelections=function(){return this.selected&&this.selected.length>0},e.prototype.isSelected=function(e){return this.hasSelections()&&this.selected.indexOf(e)>=0},e.prototype.getIndexOf=function(e){return this.hasSelections()?this.selected.indexOf(e):-1},e.prototype.isSupported=function(){if(this.query){var e=this.query.getTypes();return e&&e.length&&e.indexOf(t.ItemTypes.SERVICE)>=0}return!1},e.prototype.toggle=function(e){var t=this.selected.slice(0),n=this.getIndexOf(e);n>=0?t=t.splice(n,1):t.push(e);var s={};s[this.key]=t;var i=new B(Q.QUERY,s);this.onEvent.emit(i)},e.prototype.clear=function(){if(this.hasSelections()){var e={};e[this.key]=null;var t=new B(Q.QUERY,e);this.onEvent.emit(t)}else this.isCollapsed=!this.isCollapsed},e.prototype.getCount=function(e){return 0},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]}]},y([n.Input()],e.prototype,"key",void 0),y([n.Input()],e.prototype,"selected",void 0),y([n.Input()],e.prototype,"query",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-service-type-filter",template:'<div class="card o-query-filter" *ngIf="isSupported()">\n    <div class="a-heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas" [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}"></span>\n        </button>\n        Filter by Service Types\n    </div>\n    <div class="o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n\n        <a class="m-facet active" (click)="clear()" *ngIf="!hasSelections()">\n            <span *ngIf="isCollapsed">No values selected</span>\n            <span *ngIf="!isCollapsed">Any Service Type</span>\n        </a>\n        <a class="m-facet" (click)="clear()" *ngIf="hasSelections()">Clear selections</a>\n        <a *ngFor="let type of types" class="m-facet"\n            (click)="toggle(type.id)" [ngClass]="{active:isSelected(type.id)}">\n            <span class="fas fa-check" *ngIf="isSelected(type.id)"></span>\n            <span class="fas fa-square t-fg--gray-lt" *ngIf="!isSelected(type.id)"></span>\n            <span class="badge badge-secondary">{{getCount(type.id)}}</span>\n            {{type.label}}\n        </a>\n    </div>\n</div>\n\n\n\x3c!-- <div class="o-query-filter card">\n    <div class="a-heading l-flex-container flex-justify-between flex-align-center">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas" [ngClass]="{\'fa-minus\':!isCollapsed,\'fa-plus\':isCollapsed}"></span>\n        </button>\n        <span class="flex-1">Filter by Service</span>\n    </div>\n    <div class="card-content">\n        <div class="o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n            <div class="m-facet">\n                <div class="input-group-slick">\n                    <input name="scheme-typeahead" type="text" class="form-control"\n                        ng-model="typeaheadValue"\n                        ng-change="updateValues(typeaheadValue)"\n                        ng-model-options="{debounce:200}"\n                        placeholder="Search Services">\n                    <span class="fas fa-times"\n                        title="Clear query"\n                        ng-if="typeaheadValue.length"\n                        (click)="updateValues(typeaheadValue=null)">\n                    </span>\n                </div>\n            </div>\n            <a class="m-facet" (click)="clear()"\n                [ngClass]="{active:!hasSelections()}">\n                <span class="fas"\n                    [ngClass]="{\'fa-check\':!hasSelections(), \'fa-square t-fg--gray-lt\':hasSelections()}">\n                </span>\n                Any Service\n            </a>\n            <a  *ngFor="let value of values"\n                class="m-facet"\n                (click)="toggle(value)"\n                [ngClass]="{active:isSelected(value)}">\n                <span class="fas"\n                    [ngClass]="{\'fa-check\':isSelected(value),\'fa-square t-fg--gray-lt\':!isSelected(value)}"></span>\n                {{value.label}}\n            </a>\n        </div>\n    </div>\n</div> --\x3e\n',styles:[""]}),v(0,n.Inject(t.ItemService))],e)}(),ye=function(){function e(e){this.service=e,this.key=t.QueryParameters.SIMILAR_TO,this.onEvent=new n.EventEmitter,this.isCollapsed=!0}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(e){var t=this;if(e.selected){var n=e.selected.currentValue;n?this.service.get(n).then((function(e){t.item=e})).catch((function(e){console.log("SimilarityFilter.OnChange('selected') : ",e)})):this.item=null}},e.prototype.clear=function(){var e={};e[this.key]=null;var t=new B(Q.QUERY,e);this.onEvent.emit(t)},e.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]}]},y([n.Input()],e.prototype,"key",void 0),y([n.Input()],e.prototype,"selected",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-similarity-filter",template:'<div class="m-article o-query-filter" *ngIf="item">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Find Similar\n    </div>\n    <div class="u-text--sm" *ngIf="!isCollapsed">\n        Searching for items similar to:\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a  class="m-facet active" (click)="clear()">\n            <span class="fas fa-times-circle t-fg--danger"></span>&nbsp;\n            <span gpIcon [item]="item"></span> {{item.label}}\n        </a>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.ItemService))],e)}(),ve=function(e){function s(s,i){var a=e.call(this,s,t.ItemTypes.CONCEPT,"Themes",i)||this;return a.key=t.QueryParameters.THEMES_ID,a.onEvent=new n.EventEmitter,a}return m(s,e),s.prototype.getKey=function(){return this.key},s.prototype.notify=function(e){this.onEvent.emit(e)},s.prototype.initQuery=function(){e.prototype.initQuery.call(this),this.query.fields(["scheme"])},s.prototype.getDialogOptions=function(){var t=e.prototype.getDialogOptions.call(this);return t.data.subHeading="scheme",t},s.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]},{type:o.MatDialog}]},y([n.Input()],s.prototype,"key",void 0),y([n.Output()],s.prototype,"onEvent",void 0),s=y([n.Component({selector:"gp-theme-filter",template:'<div class="m-article o-query-filter" *ngIf="isSupported()">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by {{filterLabel}}\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a *ngIf="dialog" class="m-facet is-linkless" (click)="openDialog()">\n            <span class="fas fa-search"></span> Find {{filterLabel}}...\n        </a>\n        <a class="m-facet active" (click)="clear()" *ngIf="!hasSelections()">No values selected</a>\n        <a class="m-facet" (click)="clear()" *ngIf="hasSelections()">Clear selected</a>\n        <div class="m-facet active" *ngFor="let item of selected" (click)="toggle(item)">\n            <span class="fas fa-check"></span>&nbsp;\n            <span gpIcon [item]="item"></span>\n            {{item.label||"Untitled option"}}\n        </div>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.ItemService))],s)}(le),be=function(e){function s(s,i){var a=e.call(this,s,t.ItemTypes.TOPIC,"Topics",i)||this;return a.key=t.QueryParameters.TOPIC_ID,a.onEvent=new n.EventEmitter,a}return m(s,e),s.prototype.getKey=function(){return this.key},s.prototype.notify=function(e){this.onEvent.emit(e)},s.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.ItemService]}]},{type:o.MatDialog}]},y([n.Input()],s.prototype,"key",void 0),y([n.Output()],s.prototype,"onEvent",void 0),s=y([n.Component({selector:"gp-topic-filter",template:'<div class="m-article o-query-filter" *ngIf="isSupported()">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by {{filterLabel}}\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a *ngIf="dialog" class="m-facet is-linkless" (click)="openDialog()">\n            <span class="fas fa-search"></span> Find {{filterLabel}}...\n        </a>\n        <a class="m-facet active" (click)="clear()" *ngIf="!hasSelections()">No values selected</a>\n        <a class="m-facet" (click)="clear()" *ngIf="hasSelections()">Clear selected</a>\n        <div class="m-facet active" *ngFor="let item of selected" (click)="toggle(item)">\n            <span class="fas fa-check"></span>&nbsp;\n            <span gpIcon [item]="item"></span>\n            {{item.label||"Untitled option"}}\n        </div>\n    </div>\n</div>\n',styles:[""]}),v(0,n.Inject(t.ItemService))],s)}(le),Ie=function(){function e(){this.key=t.QueryParameters.TYPES,this.selected=[],this.onEvent=new n.EventEmitter,this.isCollapsed=!0,this.visibleAmount=10}return e.prototype.ngOnInit=function(){this.choices=Object.keys(t.ItemTypes).map((function(e){var n=t.ItemTypes[e];return t.ItemTypes.STANDARD===n||t.ItemTypes.RIGHTS_STATEMENT===n?null:{label:t.ItemTypeLabels[n],value:n}})).filter((function(e){return!!e}))},e.prototype.ngOnChanges=function(e){if(e.selected){var t=e.selected.currentValue;console.log("TypeFilter.onChanges() "+JSON.stringify(t)),void 0===t?this.selected=[]:"string"==typeof t&&(this.selected=[t])}},e.prototype.getKey=function(){return this.key},e.prototype.notify=function(e){this.onEvent.emit(e)},e.prototype.hasSelections=function(){return this.selected&&this.selected.length>0},e.prototype.isSelected=function(e){return this.getIndexOf(e)>=0},e.prototype.getIndexOf=function(e){return this.selected?this.selected.indexOf(e):-1},e.prototype.toggle=function(e){var t=this.getIndexOf(e);t>=0?this.selected.splice(t,1):this.selected.push(e);var n=this.getKey(),s=this.selected.length?this.selected:null,i={};i[n]=s;var a=new B(Q.QUERY,i);this.notify(a)},e.prototype.clear=function(){if(this.hasSelections()){this.selected=[];var e={};e[this.getKey()]=null;var t=new B(Q.QUERY,e);this.notify(t)}else this.isCollapsed&&(this.isCollapsed=!1)},e.prototype.getCount=function(e){var t=this,n=(this.facets||[]).find((function(e){return e.name===t.key}));if(!n||!n.buckets||!n.buckets.length)return"";var s=n.buckets.find((function(t){return t.label===e}));return s?s.count:""},y([n.Input()],e.prototype,"key",void 0),y([n.Input()],e.prototype,"facets",void 0),y([n.Input()],e.prototype,"selected",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-type-filter",template:'<div class="m-article o-query-filter">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by Type\n    </div>\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n        <a class="m-facet" (click)="clear()" [ngClass]="{active:!hasSelections()}">\n            <span class="u-mg-right--sm far"\n                [ngClass]="{\'fa-check-square\':!hasSelections(), \'fa-square t-fg--gray-xlt\':hasSelections()}">\n            </span>\n            Any Type\n        </a>\n        <div class="m-facet" *ngFor="let option of choices; let $index=index"\n            (click)="toggle(option.value)"\n            [ngClass]="{active:isSelected(option.value),\'is-hidden\':$index>visibleAmount}">\n            <span class="u-mg-right--sm far"\n                [ngClass]="{\'fa-check-square\':isSelected(option.value),\'fa-square\':!isSelected(option.value)}">\n            </span>\n            <span class="icon-{{option.label.toLowerCase().replace(\' \',\'\')}} is-themed"></span>\n            {{option.label}}\n            <span class="badge badge-secondary">{{getCount(option.value)}}</span>\n        </div>\n    </div>\n</div>\n',styles:[""]})],e)}(),Ce=function(){function e(){this.key=t.QueryParameters.MODIFIED,this.onEvent=new n.EventEmitter,this.isCollapsed=!0,this.format="MMM dd yyyy",this.debouncePromise=null,this.lastModifiedOptions=[{value:"Before",before:!0},{value:"After",before:!1}],this.lastModifiedDir=this.lastModifiedOptions[1]}return e.prototype.ngOnInit=function(){},e.prototype.onKeyUp=function(e){var t=e.target.value;this.onValueChange(t)},e.prototype.onValueChange=function(e){var n={};this.lastModifiedDir.before?(n[t.QueryParameters.MODIFIED_BEFORE]=e,n[t.QueryParameters.MODIFIED_AFTER]=null):(n[t.QueryParameters.MODIFIED_BEFORE]=null,n[t.QueryParameters.MODIFIED_AFTER]=e);var s=new B(Q.QUERY,n);this.onEvent.emit(s)},e.prototype.onDirChange=function(){this.onValueChange(this.value)},e.prototype.clear=function(){this.value?(this.value=null,this.onValueChange(this.value)):this.isCollapsed=!0},y([n.Input()],e.prototype,"key",void 0),y([n.Input()],e.prototype,"value",void 0),y([n.Output()],e.prototype,"onEvent",void 0),e=y([n.Component({selector:"gp-modified-filter",template:'<div class="m-article o-query-filter">\n    <div class="m-article__heading">\n        <button type="button" class="btn btn-sm btn-link"\n            title="{{isCollapsed?\'Expand\':\'Collapse\'}}"\n            (click)="isCollapsed = !isCollapsed">\n            <span class="fas"\n                [ngClass]="{\'fa-minus-square\':!isCollapsed,\'fa-plus-square\':isCollapsed}">\n            </span>\n        </button>\n        Filter by Modified Date\n    </div>\n\n    <div class="m-article__desc o-facets" [ngClass]="{\'is-collapsed\':isCollapsed}">\n\n        <div *ngIf="isCollapsed" class="m-facet active">\n            <span *ngIf="value">{{lastModifiedDir.value}} {{value}}</span>\n            <span *ngIf="!value">No date specified</span>\n        </div>\n\n        <div class="m-facet  d-flex flex-justify-between flex-align-stretch">\n\n            <select class="form-control flex-1 u-mg-right--md"\n                ([ngModel])="lastModifiedDir"\n                (change)="onDirChange()"\n                aria-label="Select before or after modification date constraint">\n                <option *ngFor="let opt of lastModifiedOptions" [value]="opt">{{opt.value}}</option>\n            </select>\n\n            <div class="flex-2 input-group-slick">\n                \x3c!-- <span class="fas fa-calendar"\n                    title="Open date picker to select a date"\n                    (click)="toggle($event)">\n                </span> --\x3e\n                <input type="text" class="form-control"\n                    placeholder="Specify modified date"\n                    aria-label="Specify modified date"\n                    ([ngModel])="value"\n                    (change)="onValueChange(value)" />\n                <span class="fas fa-times" title="Clear value"\n                    *ngIf="value" (click)="clear()">\n                </span>\n            </div>\n        </div>\n\n    </div>\n</div>\n',styles:[""]})],e)}();function Se(e){return W||(W=new t.TrackingService({provider:e})),W}var ke=g.RPMServiceFactory(),Ee=Se,xe=function(){function e(){}return e=y([n.NgModule({imports:[c.RouterModule,u.CommonModule,p.FormsModule,d.MatInputModule,d.MatButtonModule,d.MatIconModule,d.MatDialogModule,f.NgbModule],exports:[P,L,N,q,U,j,w,A,_,J,X,ee,te,ne,M,ce,ue,pe,de,fe,he,ge,me,ye,ve,be,Ie,Ce],declarations:[P,L,N,q,U,j,w,A,_,J,X,ee,te,ne,M,ce,ue,pe,de,fe,he,ge,me,ye,ve,be,Ie,Ce],providers:[O,oe,se,ae,ie,V,R,re,{provide:i.RPMService,useValue:ke},{provide:t.TrackingService,useFactory:Ee,deps:[i.RPMService]}],entryComponents:[P,L]})],e)}();e.AppAuthService=O,e.ArrayedItemsPipe=J,e.AuthenticatedComponent=k,e.CommunityFilterComponent=ce,e.CreatedByFilterComponent=ue,e.DefaultSortOptions=[{value:"_score,desc",label:"Relevance"},{value:"modified,desc",label:"Most Recently Modified"},{value:"modified,asc",label:"Least Recently Modified"},{value:"label,asc",label:"Title [A-Z]"},{value:"label,desc",label:"Title [Z-A]"},{value:"reliability,asc",label:"Reliability"}],e.ErrorResolver=oe,e.EventTypes=Q,e.FixLabelPipe=ne,e.FriendlyTypePipe=te,e.GeoPlatformCommonModule=xe,e.GeoPlatformCommonVersion="1.0.0",e.GeoPlatformError=F,e.GeoPlatformErrorService=V,e.GeoPlatformIconDirective=M,e.HeaderComponent=_,e.ImageFallbackDirective=N,e.ItemFactory=Z,e.ItemFilterComponent=le,e.ItemHelper=R,e.ItemResolver=se,e.KeywordFilterComponent=pe,e.LimitToPipe=X,e.ListSelectDialog=P,e.LoginButtonComponent=w,e.LoginModalComponent=A,e.MapTypes={GeoPlatform:{label:"GeoPlatform Map",uri:"http://www.geoplatform.gov/ont/openmap/GeoplatformMap"},AGOL:{label:"AGOL Web Map",uri:"http://www.geoplatform.gov/ont/openmap/AGOLMap"},WMS:{label:"WMS Map",uri:"http://www.geoplatform.gov/ont/openmap/WMSMap"},MapBox:{label:"Map Box Map",uri:"http://www.geoplatform.gov/ont/openmap/MapBoxMap"}},e.MessageDialog=L,e.ModifiedFilterComponent=Ce,e.NewItemResolver=ae,e.PublisherFilterComponent=de,e.ResourceLinkComponent=j,e.SchemeFilterComponent=fe,e.SearchEvent=B,e.SearchService=re,e.SelectedItemsComponent=U,e.SemanticFilterComponent=he,e.SemanticFilterDialog=ge,e.ServiceTypeFilterComponent=me,e.SimilarityFilterComponent=ye,e.SortByPipe=ee,e.ThemeFilterComponent=ve,e.ThumbnailComponent=q,e.TopicFilterComponent=be,e.TrackingServiceFactory=Se,e.TypeFilterComponent=Ie,e.VersionResolver=ie,e.authServiceFactory=T,e.logger=S,e.ɵ0=ke,e.ɵ1=Ee,e.ɵa=P,e.ɵb=L,e.ɵc=N,e.ɵd=q,e.ɵe=U,e.ɵf=j,e.ɵg=w,e.ɵh=A,e.ɵi=_,e.ɵj=M,e.ɵk=ce,e.ɵl=ue,e.ɵm=pe,e.ɵn=de,e.ɵo=fe,e.ɵp=he,e.ɵq=ge,e.ɵr=me,e.ɵs=ye,e.ɵt=ve,e.ɵu=be,e.ɵv=Ie,e.ɵw=Ce,e.ɵx=O,e.ɵy=re,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=geoplatform-common.umd.min.js.map