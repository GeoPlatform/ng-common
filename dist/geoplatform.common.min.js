!function(e,n){"use strict";n.module("gp-common",[]).value("GPConfig",GeoPlatform)}(jQuery,angular),function(e){"use strict";e.module("gp-common").service("AuthenticationService",["$q","$http","$location","$rootScope","$window","GPConfig",function(e,n,t,i,o,a,r){function s(e){for(var n in e)this[n]=e[n];!this.id&&this.username&&(this.id=this.username),this.toJSON=function(){return{id:this.id,username:this.username,name:this.name,email:this.email,org:this.org,exp:this.exp}},this.clone=function(){return new s(this.toJSON())},this.compare=function(e){return e instanceof s?this.id===e.id:"object"==typeof e&&("undefined"!=typeof e.id&&e.id===this.id)}}Storage.prototype.setObject=function(e,n){this.setItem(e,btoa(JSON.stringify(n)))},Storage.prototype.getObject=function(e){var n=atob(this.getItem(e));return n&&JSON.parse(n)};var l=null,c={NONE:0,INITIALIZING:-1,INITIALIZED:1},u=function(){var i=this;this.status=c.NONE,this.getUserQ=function(){var n=e.defer();return this.getUser(function(e){n.resolve(e)}),n.promise},this.getUser=function(e){return e&&"function"==typeof e?void(i.status===c.INITIALIZED?e(l):i.status!==c.INITIALIZING?i.check().then(function(n){i.status=c.INITIALIZED,e(n)},function(){i.status=c.INITIALIZED,e(null)}):setTimeout(function(){i.getUser(e)},500)):l},this.login=function(){var e=window.location.href,n=r.CALLBACK?r.CALLBACK:e,t="implicit"===r.AUTH_TYPE?r.IDP_BASE_URL+"/auth/authorize?client_id="+r.APP_ID+"&response_type="+r.AUTH_TYPE+"&redirect_uri="+encodeURIComponent(n):r.LOGIN_URL;window.location=t},this.logout=function(){delete window.localStorage.sub,delete window.localStorage.at,l=null;var e=r.IDP_BASE_URL+"/auth/revoke";n.get(e).then(function(e){i.removeAuth(),i.forceLogin()},function(e){console.log(e)})},this.forceLogin=function(){r.FORCE_LOGIN&&r.LOGIN_URL&&(window.location=r.LOGIN_URL)},this.getOauthProfile=function(){var t=e.defer();if(window.localStorage.at&&window.localStorage.sub){var i=r.IDP_BASE_URL+"/api/profile";n.get(i).then(function(e){t.resolve(e.data)},function(e){console.log(e),t.reject(e)})}return t.promise},this.check=function(){var n=e.defer();i.status=c.INITIALIZING;var o,r=new RegExp("access_token=.*type=Bearer","g"),u=(t.hash(),a&&a.location&&a.location.hash?a.location.hash:t.url()),d=u.match(r);if(d){var p=d[0];o=p.split("&")[0].split("=")[1]}var g=i.parseJwt(o);if(l=g?new s({id:g.sub,username:g.username,email:g.email,name:g.name,org:g.org,exp:g.exp}):null,l?i.setAuth(l,o):window.localStorage.sub&&window.localStorage.at&&i.validateJwt(window.localStorage.at)?i.setAuth(window.localStorage.getObject("sub"),window.localStorage.at):i.removeAuth(),r.test(u)){var f=u.replace(r,"");a.location=f}return n.resolve(l),n.promise},this.parseJwt=function(e){var n;if(e){var t=e.split(".")[1],i=t.replace("-","+").replace("_","/");n=JSON.parse(atob(i))}return n},this.validateJwt=function(e){var n=i.parseJwt(e),t=!!(n&&n.exp&&1e3*n.exp>Date.now());return t},this.setAuth=function(e,t){l=e,window.localStorage.setObject("sub",e),window.localStorage.at=t,n.defaults.headers.common.Authorization="Bearer "+t,n.defaults.useXDomain=!0},this.removeAuth=function(){delete window.localStorage.sub,delete window.localStorage.at,l=null,n.defaults.useXDomain=!1,delete n.defaults.headers.common.Authorization},this.check().then(function(e){i.status=c.INITIALIZED},function(e){i.status=c.INITIALIZED})["catch"](function(e){})};return new u}]).directive("gpLoginButton",["$timeout","AuthenticationService","GPConfig",function(e,n,t){return{scope:{minimal:"@"},replace:!0,template:['<div class="btn-account btn-group">  <a class="btn btn-link" ng-click="login()" ng-if="!user">Sign In</a>  <button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown"    aria-expanded="false" ng-if="user">     <span class="glyphicon glyphicon-user"></span>      <span class="hidden-xs">{{::user.name}}</span>      <span class="caret"></span>  </button>  <ul class="dropdown-menu dropdown-menu-right" role="menu" ng-if="user">    <li class="account-details">      <div class="media">        <div class="media-left">          <div class="media-object">            <span class="glyphicon glyphicon-user glyphicon-xlg"></span>          </div>        </div>        <div class="media-body">          <div class="media-heading">{{::user.name}}</div>          <div><em>{{::user.username}}</em></div>          <div>{{::user.email}}</div>          <div>{{::user.org}}</div>        </div>      </div>    </li>    <li class="divider"></li>    <li><a href="{{::idpUrl}}/modifyuser.html">Edit Info</a></li>    <li><a href="{{::idpUrl}}/changepassword.html">Change Password</a></li>    <li><a href ng-click="logout()">Sign Out</a></li>  </ul></div>'].join(" "),controller:["$scope","$element",function(i,o){"true"===i.minimal&&(i.minimal=!0),i.minimal!==!0&&(i.minimal=!1),i.idpUrl=t.idmUrl,n.getUser(function(n){e(function(){i.user=n},100)}),i.login=function(){i.user=n.login()},i.logout=function(){i.user=n.logout()};var a=i.$watch(function(){return n.getUser()},function(e){i.user=e});i.$on("$destroy",function(){a()})}]}}]).directive("gpAccountDetails",["$timeout","AuthenticationService","GPConfig",function(e,n,t){return{scope:{},replace:!0,template:['<div>  <div class="media">','    <div class="media-left">','        <div class="media-object">','            <span class="glyphicon glyphicon-user glyphicon-xlg"></span>',"        </div>","    </div>",'    <div class="media-body" ng-if="user">','       <div class="media-heading">{{::user.name}}</div>       <div><small><em>{{::user.username}}</em></small></div>       <div><small>{{::user.email}}</small></div>       <div><small>{{::user.org}}</small></div>    </div>','    <div class="media-body" ng-if="!user">','       <div class="media-heading">Please Sign In</div>       <div><small>Sign in to your GeoPlatform account or register a new account.</small></div>    </div>',"  </div>","  <hr/>",'  <div ng-if="user">','    <button type="button" class="btn btn-sm btn-accent pull-right" ng-click="logout()">Sign Out</button>    <a class="btn btn-sm btn-default" href="{{::idpUrl}}/modifyuser.html">Edit Details</a>  </div>','  <div ng-if="!user">','    <button type="button" class="btn btn-sm btn-accent pull-right" ng-click="login()">Sign In</button>    <a class="btn btn-sm btn-default" href="{{::idpUrl}}/registeruser.html">Register</a>  </div>',"</div>"].join(" "),controller:["$scope","$element",function(i,o){i.idpUrl=t.idmUrl,n.getUser(function(n){e(function(){i.user=n},100)}),i.login=function(){i.user=n.login()},i.logout=function(){i.user=n.logout()};var a=i.$watch(function(){return n.getUser()},function(e){i.user=e});i.$on("$destroy",function(){a()})}]}}])}(angular),function(){"use strict";"undefined"==typeof Array.prototype.find&&(Array.prototype.find=function(e){for(var n=0;n<this.length;++n)if(e(this[n],n,this))return this[n];return null}),"undefined"==typeof Array.prototype.filter&&(Array.prototype.filter=function(e){for(var n=[],t=0;t<this.length;++t)e(this[t],t,this)&&n.push(this[t]);return n}),"undefined"==typeof Array.prototype.each&&(Array.prototype.each=function(e){for(var n=0;n<this.length;++n)e(this[n],n,this)}),"undefined"==typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){var n=this;return!!n.length&&(!!e.length&&(!(n.length<e.length)&&0===n.indexOf(e)))}),"undefined"==typeof String.prototype.endsWith&&(String.prototype.endsWith=function(e){var n=this;if(!n.length)return!1;if(!e.length)return!1;if(n.length<e.length)return!1;var t=n.substring(n.length-e.length,n.length);return t==e}),"undefined"==typeof Date.prototype.plus&&(Date.prototype.plus=function(e){var n=typeof e;if("undefined"===n)return this;var t=0;if("string"===n)switch(e){case"hour":t=36e5;break;case"day":t=864e5;break;case"week":t=6048e5;break;case"month":t=26784e5;break;case"year":t=31536e6}else{if("number"!==n)return this;t=e}var i=this;return new Date(i.getTime()+t)}),"undefined"==typeof Date.prototype.random&&(Date.prototype.random=function(e){var n=typeof e;if("undefined"===n)return this;var t=0;if("string"===n)switch(e){case"hour":t=36e5;break;case"day":t=864e5;break;case"week":t=6048e5;break;case"month":t=26784e5;break;case"year":t=31536e6}else{if("number"!==n)return this;t=e}var i=this;return new Date(i.getTime()+Math.floor(Math.random()*t))})}(),function(e,n){"use strict";n.module("gp-common").directive("gpDatePicker",["$timeout",function(e){return{scope:{label:"@",format:"@",date:"=",onChange:"&?"},template:['<div class="input-group-slick">','    <input type="text" class="form-control" placeholder="{{::label}}"','        datepicker-popup="{{format}}" ng-model="date" is-open="opened" />','    <span class="glyphicon glyphicon-calendar" ng-click="toggle($event)"></span>',"</div>",'<p class="help-block"><small><em>Ex: "2015-01-31" or "Jan 31 2015"</em></small></p>'].join(" "),controller:["$scope","$element","$attrs",function(n,t,i){n.toggle=function(e){e.preventDefault(),e.stopPropagation(),this.opened=!this.opened},n.format||(n.format="MMM dd yyyy");var o=null;n.debounce=function(){o&&e.cancel(o),o=e(function(){o=null,n.onChange&&n.onChange()},200)},n.$watch("date",function(){n.debounce()});var a=n.$on("$destroy",function(){a(),o&&e.cancel(o),o=null,n.opened=!1,n.onChange=null,n.format=null,n.debounce=null})}]}}])}(jQuery,angular),function(e,n){"use strict";n.module("gp-common").directive("gpGeolocation",["$window",function(e){var n="Locate";return{scope:{label:"=?"},restrict:"EA",template:['<a class="btn btn-primary" ng-click="geolocate()" ng-if="available">','  <span class="glyphicon glyphicon-screenshot" ng-if="!loading"></span>','  <span class="glyphicon glyphicon-hourglass glyphicon-spin" ng-if="loading"></span>',"  {{btnLabel}}","</a>",'<div ng-if="error">{{error}}</div>'].join(" "),controller:["$scope",function(t){t.btnLabel=t.label||n,t.loading=!1,t.available=e.navigator&&e.navigator.geolocation,t.available||(t.error="Your browser does not support determining location"),t.geolocate=function(){t.loading=!0,e.navigator.geolocation.getCurrentPosition(function(e){t.$apply(function(){t.loading=!1}),t.$emit("map:geolocation",e.coords.latitude,e.coords.longitude)},function(e){switch(e.code){case 1:t.error="Permission was denied while attempting to determine location";break;case 2:t.error="Unable to determine your location";break;case 3:t.error="Unable to determine location in a reasonable amount of time"}})}}]}}])}(jQuery,angular),function(e,n){"use strict";n.module("gp-common").directive("gpHeader",["GPConfig","AuthenticationService",function(e,n){return{scope:{brand:"@",showHomeLink:"@"},restrict:"AE",transclude:!0,replace:!0,template:["<header>",'  <div class="container-fluid">','    <div class="row">','      <div class="col-md-12">','        <ul role="menu" class="header__menu" gp-header-menu>','          <li ng-if="showHomeLink">','            <a href="#/goHome">','                <span class="glyphicon glyphicon-home"></span> ','                <span class="hidden-xs hidden-sm">Home</span>',"            </a>","          </li>",'          <div class="transcluded"></div>',"          <li><span gp-login-button></span></li>","        </ul>",'        <h4 class="brand">','          <a href="{{portalUrl}}" title="Go to the GeoPlatform Home Page">','            <span class="icon-gp"></span>','            <span class="hidden-xs">GeoPlatform</span>',"          </a>","          {{brand}}","        </h4>","      </div>","    </div>","  </div>","</header>"].join(" "),link:function(t,i,o,a,r){t.showHomeLink="true"===t.showHomeLink||!1,t.portalUrl=e.portalUrl,n.getUserQ().then(function(e){t.user=e}),i.find(".transcluded").replaceWith(r())}}}]).directive("gpHeaderMenu",["$location",function(e){function n(n){var i=e.path();"/"!==i&&"/#"!==i&&"/#/"!==i||(i=t),"/"===i[0]&&(i=i.substring(1));var o=n;o.find("li.active").removeClass("active");var a=o.find('li > a[href="#/'+i+'"]');if(a.length){var r=a.closest(".dropdown-menu");r.length?r.closest("li").addClass("active"):a.parent().addClass("active")}o.find("li > a").each(function(e,n){var t=$(n),o=t.attr("href");o&&(o=o.replace("#/",""),0===i.indexOf(o)&&t.parent().addClass("active"))})}var t="goHome";return{scope:{homeHref:"@"},restrict:"A",controller:["$rootScope","$scope","$element",function(e,n,i){n.homeHref&&(t=n.homeHref)}],link:function(e,t){n(t),e.$root.$on("$locationChangeSuccess",function(){n(t)})}}}])}(jQuery,angular),function(e){"use strict";e.module("gp-common").directive("iframeOnload",function(){return{scope:{callback:"&iframeOnload"},link:function(e,n,t){n.on("load",function(t){return n.off("load"),e.callback(t)})}}})}(angular),function(e){"use strict";e.module("gp-common").directive("onImgFail",function(){return{scope:{onImgFail:"@"},link:function(e,n){var t=jQuery(n);t.on("error",function(){t.attr("src",e.onImgFail)})}}})}(angular),function(e){"use strict";e.module("gp-common").service("NotificationService",["$rootScope",function(e){var n=function(){this.items=[]};return n.prototype={getItems:function(){return this.items},addItem:function(n){this.items.push(n),e.$broadcast("gp:notifications:new",n);var t=function(e){this.removeItem(e)};return t.bind(this,n)},removeItem:function(e){var n=this.items.indexOf(e);return n>=0?this.items.splice(n,1):null},error:function(e,n,t){return this.addItem({type:"error",label:e,message:n,canDismiss:t})},success:function(e,n,t){return this.addItem({type:"success",label:e,message:n,canDismiss:t})},info:function(e,n,t){return this.addItem({type:"info",label:e,message:n,canDismiss:t})}},new n}]).directive("gpNotifications",["$timeout","NotificationService",function(e,n){return{scope:{expiration:"@"},template:['<div class="notifications ng-hide" ng-show="items.length">','  <div class="notification" ng-repeat="item in items"',"    ng-class=\"{'notification--success':item.type==='success', 'notification--error':item.type==='error', 'notification--info':item.type==='info'}\">",'    <h5 class="notification__title">','        <span class="pull-right glyphicon" ',"            ng-class=\"{'glyphicon-ok-sign':item.type==='success','glyphicon-exclamation-sign':item.type==='error','glyphicon-info-sign':item.type==='info'}\">","        </span>","        {{item.label}}","    </h5>",'    <p class="notification__content" ng-bind-html="item.message"></p>','    <div class="notification__actions" ng-if="item.canDismiss">','        <button type="button" class="btn btn-link" ng-click="dismiss(item)">dismiss</button>',"    </div>","  </div>","</div>"].join(" "),link:function(t,i,o){function a(){t.items=n.getItems(),t.timer&&(e.cancel(t.timer),t.timer=null),t.timer=e(function(){t.timer=null,t.removeOldest()},t.expiration)}t.expiration=1*(t.expiration||2e3),t.items=[],a(),t.removeOldest=function(){var e=t.items.find(function(e){return e.canDismiss});e&&n.removeItem(e)},t.dismiss=function(e){n.removeItem(e)},t.$watchCollection(function(){return n.getItems()},a)}}}])}(angular),function(e,n){"use strict";n.module("gp-common").directive("gpPagination",function(){function e(e,n){function t(){var n=1*e.start,t=1*e.pageSize,i=[],o=5;o%2!==0?Math.ceil(o/2):o/2;if(e.total>0){var a=Math.ceil(e.total/t),r=Math.floor(n/t),s=0;s=r>Math.floor(o/2)?r-Math.floor(o/2):0;for(var l=Math.min(s+o,a);s>0&&l-s<o;)s-=1;for(var c=s;c<l;++c){var u=c*t+1,d=Math.min(u+t-1,e.total);i.push({label:c+1+"",tooltip:"Results "+u+"-"+d}),c==r&&(i[i.length-1].active=!0)}}e.pages=i}e.pageSizeOpts||(e.pageSizeOpts=[5,10,25,50]),e.pageSize&&e.pageSizeOpts.indexOf(1*e.pageSize)<0&&e.pageSizeOpts.push(1*e.pageSize).sort(),e.previous=function(){e.start=Math.max(0,1*e.start-1*e.pageSize),e.$emit("pagination:change",e.start,e.pageSize)},e.next=function(){e.start=Math.min(e.total,1*e.start+1*e.pageSize),e.$emit("pagination:change",e.start,e.pageSize)},e.setPage=function(n){var t=1*n;e.start=(t-1)*(1*e.pageSize),e.$emit("pagination:change",e.start,e.pageSize)},e.setPageSize=function(n){e.pageSize=1*n;var t=Math.floor(e.start/e.pageSize)+1;e.setPage(t)},e.hasPrevious=function(){return e.start>0},e.hasNext=function(){return e.start+e.pageSize<e.total},t(),e.$watch("start",t),e.$watch("pageSize",t),e.$watch("total",t)}return e.$inject=["$scope","$element"],{scope:{start:"=",pageSize:"=",total:"=",pageSizeOpts:"="},replace:!0,template:["<div>",'  <div class="visible-xs row">','    <div class="col-xs-6">{{total}} results</div>','    <div class="col-xs-6">','      <select class="form-control" ng-model="pageSize">','        <option ng-repeat="ps in pageSizeOpts" ','          ng-selected="pageSize===ps" ','          value="{{ps}}">{{ps}} per page</option>',"      </select>","    </div>","  </div>",'  <ul class="pagination">','    <li class="info hidden-xs">',"      <a>{{total}} results</a>","    </li>",'    <li class="pagination-control hidden-xs" ng-if="total>0">',"      <span uib-dropdown>",'        <a href="" uib-dropdown-toggle title="Change the number of results returned">','          {{pageSize}} per page <span class="caret"></span>',"        </a>",'        <ul class="dropdown-menu" role="menu">','          <li ng-repeat="ps in pageSizeOpts"><a ng-click="setPageSize(ps)">{{ps}} per page</a></li>',"        </ul>","      </span>","    </li>",'    <li class="separator hidden-xs"></li>','    <li ng-if="hasPrevious()">','      <a ng-click="previous()">','        <span class="glyphicon glyphicon-backward"></span>',"      </a>","    </li>",'    <li ng-repeat="page in pages" ng-class="{active:page.active,disabled:page.disabled}">','      <a ng-click="setPage(page.label)" title="{{::page.tooltip}}">{{::page.label}}</a>',"    </li>",'    <li ng-if="hasNext()">','      <a ng-click="next()">','        <span class="glyphicon glyphicon-forward"></span>',"      </a>","    </li>","  </ul>","</div>"].join(" "),controller:e}})}(jQuery,angular),function(e,n){"use strict";n.module("gp-common").provider("responsiveHelper",["$windowProvider",function(e){function n(e){this.window=e}var t=e.$get();n.prototype={getWidth:function(){return t.innerWidth||t.outerWidth},isXS:function(){var e=this.getWidth();return e<768},isSM:function(){var e=this.getWidth();return e>=768&&e<992},isMD:function(){var e=this.getWidth();return e>=992&&e<1200},isLG:function(){var e=this.getWidth();return e>=1200}};var i=new n(t);this.$get=function(){return i}}]).directive("gpResponsive",["$window","responsiveHelper",function(e,t){return{restrict:"A",link:function(i,o,a){function r(e,n){n.isXS()?e.addClass("gp-responsive-xs"):e.removeClass("gp-responsive-xs"),n.isSM()?e.addClass("gp-responsive-sm"):e.removeClass("gp-responsive-sm"),n.isMD()?e.addClass("gp-responsive-md"):e.removeClass("gp-responsive-md"),n.isLG()?e.addClass("gp-responsive-lg"):e.removeClass("gp-responsive-lg")}r(o,t);var s=function(){r(o,t)},l=n.element(e);l.on("resize",s);i.$on("$destroy",function(){l.off("resize",s)})}}}]).directive("gpResize",["$window","$timeout",function(t,i){return function(o,a,r){var s=function(){var n=e("header")[0].offsetHeight,t=n+2,i={top:t+"px"};a.css(i),o.$apply()},l=n.element(t);l.on("resize",s),i(s,200),o.$on("$destroy",function(){l.off("resize",s)})}}])}(jQuery,angular),function(e,n){"use strict";function t(e,n,t,i,o){function a(){var t=n.find(".form-control");e.isDirty=t.hasClass("ng-dirty"),t.hasClass("ng-invalid")?t.hasClass("ng-empty")?e.error="This field requires a value":e.error="Invalid value provided":e.error=null}function r(e){i.$setViewValue(e),i.$render()}e.type||(e.type="text"),"true"===e.required?e.required=!0:e.required=!1,e.elId="input_"+Math.ceil(9999*Math.random()),e.size=e.size||"medium",e.type=e.type||"text",n.find(".form-control").on("change",function(){a(e.innerValue)}),i.$render=function(){var n=i.$viewValue;e.innerValue=n,e.displayValue=n||e.placeholder||"No value provided",a(n)},e.isReadOnly=function(){var e=typeof this.readOnly;return"undefined"!==e&&("string"===e?"true"===this.readOnly.toLowerCase():"number"===e?1===this.readOnly:"boolean"===e&&this.readOnly)},e.edit=function(){e.isReadOnly()||(e.editing=!0,o(function(){n.find(".form-control").focus().select()},200))},e.done=function(){e.editing=!1,e.error=null},e.save=function(){r(e.innerValue),e.done()},e.cancel=function(){e.innerValue=i.$viewValue,e.done()},e.onKeyPress=function(n,t){if(void 0!==t&&0!==t||void 0===n.which||(t=n.which),"number"===e.type){if(8===t||46===t||t>=44&&t<=57)return;return n.preventDefault(),!1}},e.onKeyUp=function(n,t){if(void 0!==t&&0!==t||void 0===n.which||(t=n.which),13!==t||e.error)if(27===t)e.cancel();else{if(8!==t&&46!==t&&190!==t&&(t<48||t>90)&&(t<106||t>111)&&t<186)return;a()}else e.done()},e.$destroy=function(){n.off("change")}}n.module("gp-common").directive("gpSlickFormInput",["$timeout",function(e){return{restrict:"AE",require:"ngModel",scope:{label:"@",placeholder:"@",help:"=",type:"@",pattern:"@",required:"@",readOnly:"@",size:"@",icon:"@"},template:i,link:function(n,i,o,a){t(n,i,o,a,e)}}}]).directive("gpSlickFormTextarea",["$timeout",function(e){return{restrict:"AE",require:"ngModel",scope:{label:"@",placeholder:"@",help:"@",readOnly:"@",size:"@",icon:"@"},template:o,link:function(n,i,o,a){t(n,i,o,a,e)}}}]).directive("gpSlickFormDate",["$timeout","$filter",function(e,t){return{restrict:"AE",require:"ngModel",scope:{label:"@",format:"@",placeholder:"@",required:"@",readOnly:"@",size:"@",icon:"@"},template:a,controller:["$scope","$element",function(e,n){(!e.format||e.format.length<3)&&(e.format="mediumDate"),e.inline=n.hasClass("inline")}],link:function(e,i,o,a){function r(n){var t=i.find(".form-control");t.hasClass("ng-invalid")?t.hasClass("ng-empty")?e.error="This field requires a value":e.error="Invalid value provided":e.error=null}function s(e){a.$setViewValue(e),a.$render()}"true"===e.required?e.required=!0:e.required=!1,e.elId="input_"+Math.ceil(9999*Math.random()),e.size=e.size||"medium",e.type=e.type||"text",a.$render=function(){var n=a.$viewValue;e.innerValue=n,e.displayValue=n?t("date")(a.$modelValue,e.format):e.placeholder||"No value provided",r(n)},e.isReadOnly=function(){var e=typeof this.readOnly;return"undefined"!==e&&("string"===e?"true"===this.readOnly.toLowerCase():"number"===e?1===this.readOnly:"boolean"===e&&this.readOnly)},e.edit=function(){e.isReadOnly()||(e.editing=!0)},e.done=function(){e.opened=!1,e.editing=!1,e.error=null},e.save=function(){s(e.innerValue),e.done()},e.cancel=function(){e.innerValue=n.copy(a.$modelValue),e.done()},e.open=function(){"undefined"==typeof e.uibopts&&(e.uibopts={}),e.uibopts.opened=!0},e.onKeyUp=function(n){13===n?e.done():27===n&&e.cancel()},e.onChange=function(n){isNaN(a.$modelValue)&&e.required?e.error="This field requires a value":e.error=null}}}}]).directive("gpSlickFormSelect",["$timeout",function(e){return{restrict:"AE",require:"ngModel",scope:{label:"@",codeList:"=",help:"=",required:"@",readOnly:"@",size:"@",icon:"@"},template:r,link:function(n,t,i,o){function a(){return l&&l.length||(l=t.find(".form-control")),l}function r(){var e=a();n.isDirty=e.hasClass("ng-dirty"),e.hasClass("ng-invalid")?e.hasClass("ng-empty")?n.error="This field requires a value":n.error="Invalid value provided":n.error=null}function s(e){o.$setViewValue(e),o.$render()}n.type||(n.type="text"),"true"===n.required?n.required=!0:n.required=!1,n.elId="input_"+Math.ceil(9999*Math.random()),n.size=n.size||"medium",n.type=n.type||"text";var l=null;n.codeList?n.selectOptions=n.codeList.map(function(e){return"object"==typeof e&&e.value?e.label?e:{value:e.value,label:e.value}:{value:e,label:e}}):n.selectOptions=[],o.$render=function(){var e=o.$viewValue;if(n.innerValue=e,n.displayValue=n.placeholder||"No value provided",e){var t=n.selectOptions.find(function(n){return n.value==e});n.displayValue=t.label}r()},n.onChange=function(t){n.innerValue=t,e(function(){r()},200)},n.onTypeaheadSelection=function(t,i,o,a){n.innerValue=t?t.value:null,e(function(){r()},200)},n.isReadOnly=function(){var e=typeof this.readOnly;return"undefined"!==e&&("string"===e?"true"===this.readOnly.toLowerCase():"number"===e?1===this.readOnly:"boolean"===e&&this.readOnly)},n.edit=function(){n.isReadOnly()||(n.editing=!0,e(function(){l.focus().select()},200))},n.done=function(){n.editing=!1,n.error=null},n.save=function(){s(n.innerValue),n.done()},n.cancel=function(){n.innerValue=o.$viewValue,n.done()},n.onKeyUp=function(e){13!==e||n.error?27===e&&n.cancel():n.save()},n.onTypeaheadKeyUp=function(e){r()},n.$destroy=function(){}}}}]);var i=['<div class="form-group form-group-slick">','   <label for="{{::elId}}" class="control-label">{{::label}}</label>','   <div class="input__display" ',"       ng-class=\"{'is-read-only':isReadOnly(), 'has-error':!!error,'text-lg':size==='large'}\" ",'       ng-show="!editing" ng-click="edit()" ',"       title=\"{{!!error?error:(!isReadOnly()?'Click to edit':'')}}\">","      {{displayValue}}","   </div>",'   <div ng-show="editing">',"      <div class=\"input-group\" ng-class=\"{'input-group-lg':size==='large'}\">","           <div class=\"input-group-slick\" ng-class=\"{'input-group-slick--lg':size==='large'}\">",'               <span ng-if="icon" class="{{::icon}}"></span>','               <input id="{{::elId}}" type="{{::type}}" class="form-control" ','                   pattern="{{pattern}}" ','                   ng-model="innerValue" ','                   ng-required="{{required}}" ','                   ng-keypress="onKeyPress($event, $event.keyCode)" ','                   ng-keyup="onKeyUp($event, $event.keyCode)" >','               <span class="indicators">','                   <span class="is-valid glyphicon glyphicon-ok-sign"></span>','                  <span class="is-invalid glyphicon glyphicon-exclamation-sign"></span>',"              </span>","           </div>",'          <span class="input-group-btn">','               <button type="button" class="btn btn-default" ',"                   ng-class=\"{'btn-lg':size==='large'}\"",'                   ng-click="cancel()" title="Cancel changes">','                   <span class="glyphicon glyphicon-ban-circle"></span>',"              </button>",'               <button type="button" class="btn btn-default" ',"                   ng-class=\"{disabled:!!error||!isDirty,'btn-lg':size==='large'}\"",'                   ng-disabled="{{!!error}}" ','                   ng-click="save()" title="Save changes">','                  <span class="glyphicon glyphicon-ok"></span>',"               </button>","           </span>","       </div>",'       <div ng-if="error && error.length"><small class="help-block text-danger">{{error}}</small></div>','       <div ng-if="help && help.length"><small class="help-block">{{help}}</small></div>',"   </div>","</div>"].join(" "),o=['<div class="form-group form-group-slick">','   <label for="{{::elId}}" class="control-label">{{::label}}</label>','   <div class="input__display" ',"       ng-class=\"{'is-read-only':isReadOnly(), 'has-error':!!error,'text-lg':size==='large'}\" ",'       ng-show="!editing" ng-click="edit()" ',"       title=\"{{!!error?error:(!isReadOnly()?'Click to edit':'')}}\">","      {{displayValue}}","   </div>",'   <div ng-show="editing">',"      <div class=\"input-group\" ng-class=\"{'input-group-lg':size==='large'}\">","           <div class=\"input-group-slick\" ng-class=\"{'input-group-slick--lg':size==='large'}\">",'               <span ng-if="icon" class="{{::icon}}"></span>','               <textarea rows="3" id="{{::elId}}" class="form-control" ','                   ng-required="{{required}}" ng-model="innerValue"','                   ng-keypress="onKeyPress($event, $event.keyCode)" ','                   ng-keyup="onKeyUp($event, $event.keyCode)"></textarea>','               <span class="indicators">','                   <span class="is-valid glyphicon glyphicon-ok-sign"></span>','                  <span class="is-invalid glyphicon glyphicon-exclamation-sign"></span>',"              </span>","           </div>",'          <span class="input-group-btn">','               <button type="button" class="btn btn-default" ',"                   ng-class=\"{'btn-lg':size==='large'}\"",'                   ng-click="cancel()" title="Cancel changes">','                   <span class="glyphicon glyphicon-ban-circle"></span>',"              </button>",'               <button type="button" class="btn btn-default" ',"                   ng-class=\"{disabled:!!error||!isDirty,'btn-lg':size==='large'}\"",'                   ng-disabled="{{!!error}}" ','                   ng-click="save()" title="Save changes">','                  <span class="glyphicon glyphicon-ok"></span>',"               </button>","           </span>","       </div>",'       <div ng-if="error && error.length"><small class="help-block text-danger">{{error}}</small></div>','       <div ng-if="help && help.length"><small class="help-block">{{help}}</small></div>',"   </div>","</div>"].join(" "),a=['<div class="form-group form-group-slick">','   <label for="{{::elId}}" class="control-label">{{::label}}</label>','   <div class="input__display" ',"       ng-class=\"{'is-read-only':isReadOnly(), 'has-error':!!error}\" ",'       ng-show="!editing" ng-click="edit()" ',"       title=\"{{!!error?error:(!isReadOnly()?'Click to edit':'')}}\">","      {{displayValue}}","   </div>",'   <div ng-show="editing">','       <div uib-datepicker ng-required="{{required}}" ng-model="innerValue" datepicker-options="{showWeeks:false}"></div>','       <div ng-if="error && error.length"><small class="help-block text-danger">{{error}}</small></div>','       <div ng-if="help && help.length"><small class="help-block">{{help}}</small></div>','       <button type="button" class="btn btn-default" ',"           ng-class=\"{'btn-lg':size==='large'}\"",'           ng-click="cancel()" title="Cancel changes">','           <span class="glyphicon glyphicon-ban-circle"></span>',"      </button>",'      <button type="button" class="btn btn-default" ',"           ng-class=\"{disabled:!!error,'btn-lg':size==='large'}\"",'          ng-disabled="{{!!error}}" ','           ng-click="save()" title="Save changes">','           <span class="glyphicon glyphicon-ok"></span>',"      </button>","   </div>","</div>"].join(" "),r=['<div class="form-group form-group-slick">','   <label for="{{::elId}}" class="control-label">{{::label}}</label>','   <div class="input__display" ',"       ng-class=\"{'is-read-only':isReadOnly(), 'has-error':!!error}\" ",'       ng-show="!editing" ng-click="edit()" ',"       title=\"{{!!error?error:(!isReadOnly()?'Click to edit':'')}}\">","      {{displayValue}}","   </div>",'   <div ng-show="editing">',"      <div class=\"input-group\" ng-class=\"{'input-group-lg':size==='large'}\">","           <div class=\"input-group-slick\" ng-class=\"{'input-group-slick--lg':size==='large'}\">",'               <span ng-if="icon" class="{{::icon}}"></span>','               <select class="form-control input__field" ','                   ng-if="codeList.length<=12" ','                   ng-model="innerValue" ','                   ng-options="opt.value as opt.label for opt in selectOptions" ','                   ng-required="{{required}}" ','                   ng-change="onChange(innerValue)" ','                   ng-keyUp="onKeyUp($event.keyCode)" >','                   <option value="">Select One</option>',"               </select>",'               <input type="text" class="form-control input__field" ng-if="codeList.length>12" ','                   ng-model="innerValue" ','                   ng-required="{{required}}" ','                   ng-keyUp="onTypeaheadKeyUp($event.keyCode)" ','                   typeahead-on-select="onTypeaheadSelection($item, $model, $label, $event)" ','                   uib-typeahead="opt.value as opt.label for opt in selectOptions | filter:{value:$viewValue} | limitTo:12" ','                   typeahead-min-length="0" ','                   typeahead-editable="false">','               <span class="indicators">','                   <span class="is-valid glyphicon glyphicon-ok-sign"></span>','                  <span class="is-invalid glyphicon glyphicon-exclamation-sign"></span>',"              </span>","           </div>",'          <span class="input-group-btn">','               <button type="button" class="btn btn-default" ',"                   ng-class=\"{'btn-lg':size==='large'}\"",'                   ng-click="cancel()" title="Cancel changes">','                   <span class="glyphicon glyphicon-ban-circle"></span>',"              </button>",'               <button type="button" class="btn btn-default" ',"                   ng-class=\"{disabled:!!error||!isDirty,'btn-lg':size==='large'}\"",'                   ng-disabled="{{!!error}}" ','                   ng-click="save()" title="Save changes">','                  <span class="glyphicon glyphicon-ok"></span>',"               </button>","           </span>","       </div>",'       <div ng-if="error && error.length"><small class="help-block text-danger">{{error}}</small></div>','       <div ng-if="help && help.length"><small class="help-block">{{help}}</small></div>',"   </div>","</div>"].join(" ");
}(jQuery,angular),function(e){"use strict";e.module("gp-common").directive("gpTweetButton",["$timeout",function(e){function n(e,n,t){var i;return function(){var o=this,a=arguments,r=function(){i=null,t||e.apply(o,a)},s=t&&!i;clearTimeout(i),i=setTimeout(r,n),s&&e.apply(o,a)}}return{link:function(t,i,o){if("undefined"==typeof twttr)return void(i.className+=" disabled");var a=n(function(){o.url&&e(function(){i[0].innerHTML="",twttr.widgets.createShareButton(o.url,i[0],function(){},{count:o.count,text:o.text,via:o.via,size:o.size,hashtags:o.hashtags,dnt:o.dnt})})},75);o.$observe("url",a),o.$observe("text",a)}}}])}(angular),function(e){"use strict";e.module("gp-common").directive("sortOrder",function(){return{replace:!0,require:"ngModel",template:["<div>",'<a class="btn btn-default" title="Click to sort in ascending order" href ng-if="value===\'dsc\'" ng-click="toggle()">','    <span class="glyphicon glyphicon-sort-by-attributes-alt"></span>',"</a>",'<a class="btn btn-default" title="Click to sort in descending order" href ng-if="value===\'asc\'" ng-click="toggle()">','    <span class="glyphicon glyphicon-sort-by-attributes"></span>',"</a>","</div>"].join(" "),link:function(e,n,t,i){i.$viewChangeListeners.push(function(){e.$eval(t.ngChange)}),i.$render=function(){e.value=i.$modelValue},e.toggle=function(){e.value="asc"===e.value?"dsc":"asc",i.$setViewValue(e.value)}}}})}(angular),function(e,n){"use strict";n.module("gp-common").filter("fixLabel",function(){return function(e){return e=e||"",e.replace(/_/g," ")}}).filter("pluralize",function(){return function(e){return e&&e.length?e.endsWith("ss")?e+"es":e.endsWith("s")?e:e+"s":""}}).filter("capitalize",function(){return function(e){return e[0].toUpperCase()+e.substring(1)}}).filter("facets",function(){return function(e,n){return n?e&&e.length?e.filter(function(e){return e.toLowerCase().startsWith(n+":")}).map(function(e){return e.substring(e.indexOf(":")+1,e.length)}):[]:e}}).filter("joinBy",function(){return function(e,n,t){return e.length?e.join(n||", "):t||""}}).filter("defaultValue",function(){return function(e,n){return"undefined"!=typeof e&&e.length?e:n}}).filter("count",function(){return function(e){if("undefined"!=typeof e){if("function"==typeof e.push)return e.length;if("object"==typeof e&&"undefined"!=typeof Object.keys)return Object.keys(e)}return 0}})}(jQuery,angular);
//# sourceMappingURL=geoplatform.common.min.js.map
