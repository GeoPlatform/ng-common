{"version":3,"sources":["module.js","auth.js","lang.js","directives/datepicker.js","directives/geolocation.js","directives/header-menu.js","directives/iframe.js","directives/notifications.js","directives/pagination.js","geoplatform.common.js","directives/responsive.js","filters/filters.js"],"names":["jQuery","angular","module","isDEV","window","location","hostname","indexOf","constant","GeoPlatform","idspUrl","idmUrl","value","service","$q","$http","Config","User","opts","p","this","id","username","toJSON","name","email","org","clone","compare","arg","TEST_USER","_user","STATUS","NONE","INITIALIZING","INITIALIZED","Service","self","status","getUserQ","deferred","defer","getUser","user","resolve","promise","callback","check","then","setTimeout","login","current","href","idspBaseUrl","encodeURIComponent","logout","get","success","response","Success","mail","first_name","last_name","organization","error","data","headers","console","log","reject","err","directive","$timeout","AuthenticationService","scope","minimal","template","join","controller","$scope","$element","idpUrl","idmBaseUrl","watcher","$watch","newUser","$on","replace","Array","prototype","find","i","length","filter","results","push","each","String","startsWith","str","endsWith","substr","substring","Date","plus","offset","type","offsetMS","d","getTime","random","threshold","Math","floor","label","format","date","onChange","$attrs","toggle","event","preventDefault","stopPropagation","opened","debounce","cancel","listener","$window","defaultBtnLabel","restrict","btnLabel","loading","available","navigator","geolocation","geolocate","getCurrentPosition","position","$apply","$emit","coords","latitude","longitude","code","brand","showHomeLink","transclude","link","ctrl","transcludeFn","portalUrl","replaceWith","$location","update","path","menu","removeClass","parent","addClass","a","$a","$","attr","$rootScope","$root","element","attrs","on","off","items","getItems","addItem","item","$broadcast","fn","removeItem","bind","index","splice","msg","dismiss","message","canDismiss","info","NotificationService","expiration","timer","removeOldest","oldest","$watchCollection","Controller","ostart","start","osize","pageSize","pages","maxPagination","ceil","total","numPages","currentPage","s","e","min","pageStart","pageEnd","tooltip","active","previous","max","next","setPage","page","setPageSize","size","hasPrevious","hasNext","$inject","provider","$windowProvider","Helper","$get","getWidth","innerWidth","outerWidth","isXS","width","isSM","isMD","isLG","helper","responsiveHelper","el","resizeFn","w","$attr","hh","offsetHeight","tp","changes","top","css","input","text","arr","facetName","f","toLowerCase","map","delimiter","emptyValue"],"mappings":"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","file":"geoplatform.common.min.js","sourcesContent":["(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\", []);\n\n})(jQuery, angular);","(function(angular) {\n    \n    'use strict';\n\n    //flag on whether we're in dev env\n    function isDEV() {\n        return \"localhost\" === window.location.hostname || \n            ~window.location.hostname.indexOf(\"192.168\")||\n            ~window.location.hostname.indexOf(\"10.0\");\n    }\n\n\n\n    /** \n     * GeoPlatform Common Module Authentication Support\n     *\n     * Contains re-usable services, directives, and other angular components\n     *\n     * \n     * NOTE: This module uses certain variables in $rootScope in order to \n     * perform actions like authentication.  The following variables should be\n     * set before using any service/directive in this file:\n     *\n     *   - idspUrl : the url to the identity service provider server\n     *   - idmUrl : the url to the identity management server\n     *   - portalUrl : the url to the main landing page of GeoPlatform (www.geoplatform.gov in production) \n     */\n    angular.module('gp-common')\n\n\n    //Assumes a global has been set\n    // Don't use these... deprecated\n    .constant('idspBaseUrl', GeoPlatform.idspUrl)\n    .constant('idmBaseUrl', GeoPlatform.idmUrl)\n\n    //Assumes a global object containing configuration values for GeoPlatform exists \n    // prior to this module being declared\n    // (using 'value' since config might change)\n    .value('GPConfig', GeoPlatform)\n\n\n    /**\n     * Authentication Service\n     * \n     * Because the auth service redirects the page to the IDM portal\n     * and WMV is reloaded once the login/logout processes are complete,\n     * there's no need to bind listeners informing other components of \n     * an auth change.\n     *\n     * Inside \"DEV\", you should close and re-open any components' widgets\n     * to get current auth status.\n     */\n    .service('AuthenticationService', ['$q', '$http', 'GPConfig', function($q, $http, Config) {\n\n        // console.log(\"IDSP Base Url: \" + Config.idspBaseUrl);\n\n        function User(opts) {\n            for(var p in opts) {\n                this[p] = opts[p];\n            }\n            if(!this.id && this.username)\n                this.id = this.username;\n\n            this.toJSON = function() {\n                return {\n                    id: this.id,\n                    username: this.username, \n                    name: this.name, \n                    email: this.email,\n                    org: this.org\n                };\n            };\n            this.clone = function() {\n                return new User(this.toJSON());\n            };\n            this.compare = function(arg) {\n                if(arg instanceof User) {\n                    return this.id === arg.id;\n                } else if(typeof(arg) === 'object') {\n                    return typeof(arg.id) !== 'undefined' && \n                        arg.id === this.id;\n                }\n                return false;\n            };\n        }\n\n\n        var TEST_USER = new User({\n            id: \"tester\",\n            username: \"tester\", \n            email: \"tester@geoplatform.us\",\n            name: \"John Test\", \n            org: \"Other\"\n        });\n\n\n        var _user = null;\n\n        if(isDEV()) {\n            _user = TEST_USER.clone();\n        }    \n\n        var STATUS = {\n            NONE: 0,\n            INITIALIZING: -1,   //auth check in progress\n            INITIALIZED: 1      //auth check completed\n        };\n\n\n        /**\n         * Authentication Service\n         */\n        var Service = function() {\n\n            var self = this;\n            \n\n            this.status = STATUS.NONE;\n\n            //$q version of getUser\n            this.getUserQ = function() {\n                var deferred = $q.defer();\n                this.getUser(function(user) { deferred.resolve(user); });\n                return deferred.promise;\n            };\n\n            /**\n             * If the callback parameter is specified, this method\n             * will return undefined. Otherwise, it returns the user (or null).\n             *\n             * @param callback optional function to invoke with the user\n             * @return object representing current user\n             */\n            this.getUser = function(callback) {\n                if(callback && typeof(callback) === 'function') {\n\n                    //if already checked, return what we have\n                    if(self.status === STATUS.INITIALIZED) \n                        callback(_user);\n                    //if not in process of checking, check\n                    else if(self.status !== STATUS.INITIALIZING) {\n                        //if hasn't been checked for auth yet, do that now\n                        self.check().then(function(_user) {\n                            self.status = STATUS.INITIALIZED;\n                            callback(_user);\n                        }, function() {\n                             self.status = STATUS.INITIALIZED;\n                             callback(null);\n                        });\n                    } \n                    //if in process of checking, wait until it finishes\n                    else {\n                        setTimeout(function() {\n                            self.getUser(callback);\n                        }, 500);\n                    }\n                    return;\n                }\n                return _user;\n            };\n\n            /**\n             * Redirects the page to the login site\n             */\n            this.login = function () {\n                if(isDEV()) {\n                    _user = TEST_USER.clone();\n                    return _user;\n                }\n                var current = window.location.href;\n                window.location = Config.idspBaseUrl + '/module.php/core/as_login.php?AuthId=geosaml&ReturnTo=' + encodeURIComponent(current);\n            };\n\n            /**\n             * Redirects the page to the logout site\n             */\n            this.logout = function() {\n                if(isDEV()) {\n                    _user = null;\n                    return _user;\n                }\n                var current = window.location.href;\n                window.location = Config.idspBaseUrl + '/module.php/core/as_logout.php?AuthId=geosaml&ReturnTo=' + encodeURIComponent(current);\n            };\n\n\n            /**\n             * Queries simplesamlphp if the current session is authenticated\n             * @return promise - then(function(user) {}, function(response){})\n             */\n            this.check = function() {\n                \n                var deferred = $q.defer();\n                \n                if(isDEV()) {\n                    setTimeout(function() {\n                        deferred.resolve(_user);\n                    }, 1000);\n                    return deferred.promise;\n                }\n\n                self.status = STATUS.INITIALIZING;\n\n                //check authentication on load\n                $http.get(Config.idspBaseUrl + '/authenticategeosaml.php?as=geosaml')\n                .success(function(response) {\n                    \n                    if(response.Success) {  //authenticated\n                        _user = new User({\n                            id       : response.name[0],\n                            username : response.name[0],\n                            email    : response.mail[0],\n                            name     : response.first_name[0] + ' ' + response.last_name[0],\n                            org      : response.organization[0]\n                        });\n                    } else {\n                        _user = null;       //not authenticated\n                    }\n\n                    deferred.resolve(_user);\n                    \n                }).error(function(data, status, headers) {   // failed check\n                    console.log(\"Authentication call failed\");\n                    deferred.reject(data);\n                });\n\n                return deferred.promise;\n            };\n\n            //=====================================================\n\n            //initialize with auth check\n            this.check().then(function(user) {\n                self.status = STATUS.INITIALIZED;\n            }, function(err) {\n                self.status = STATUS.INITIALIZED;\n            });\n\n        };\n\n        return new Service();\n\n    }])\n\n    .directive('gpLoginButton', ['$timeout', 'AuthenticationService', 'GPConfig', \n        function($timeout, AuthenticationService, Config) {\n        return {\n            scope: {\n                minimal: '@'\n            },\n            template: [\n\n                //not logged in\n                '<div class=\"btn-account btn-group\" ng-if=\"!user\" >' + \n                '    <a class=\"hidden-xs btn btn-link\" ng-click=\"login()\">' + \n                '        <span class=\"glyphicon glyphicon-user\"></span>' + \n                '        Sign In' + \n                '    </a>' + \n                '    <button type=\"button\" class=\"visible-xs btn btn-link dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' + \n                '        <span class=\"glyphicon glyphicon-user\"></span>' + \n                '        <span class=\"caret\"></span>' + \n                '    </button>' + \n                '    <ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">' + \n                '        <li><a ng-click=\"login()\">Sign In</a></li>' + \n                '    </ul>' + \n                '</div>' + \n\n                //logged in\n                '<div class=\"btn-account btn-group\" ng-if=\"user\" >' + \n                '  <button type=\"button\" class=\"btn btn-link dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' + \n                '     <span class=\"glyphicon glyphicon-user\"></span> ' +\n                '     <span class=\"hidden-xs\">{{::user.name}}</span> ' + \n                '     <span class=\"caret\"></span>' + \n                '  </button>' + \n                '  <ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">' + \n                '    <li class=\"account-details\">' + \n                '      <div class=\"media\">' + \n                '        <div class=\"media-left\">' + \n                '          <div class=\"media-object\">' + \n                '            <span class=\"glyphicon glyphicon-user glyphicon-xlg\"></span>' + \n                '          </div>' + \n                '        </div>' + \n                '        <div class=\"media-body\">' + \n                '          <div class=\"media-heading\">{{::user.name}}</div>' + \n                '          <div><em>{{::user.username}}</em></div>' + \n                '          <div>{{::user.email}}</div>' + \n                '          <div>{{::user.org}}</div>' + \n                '        </div>' + \n                '      </div>' + \n                '    </li>' + \n                '    <li class=\"divider\"></li>' + \n                '    <li><a href=\"{{::idpUrl}}/modifyuser.html\">Edit Info</a></li>' + \n                '    <li><a href=\"{{::idpUrl}}/changepassword.html\">Change Password</a></li>' + \n                '    <li><a href ng-click=\"logout()\">Sign Out</a></li>' + \n                '  </ul>' + \n                '</div>'\n            ].join(' '),\n            controller: function($scope, $element) {\n\n                if($scope.minimal === 'true') $scope.minimal = true;\n                if($scope.minimal !== true) $scope.minimal = false;\n\n                $scope.idpUrl = Config.idmBaseUrl;\n                // console.log(\"IDM Base Url: \" + Config.idmBaseUrl);\n                \n                AuthenticationService.getUser(function(user) {\n                    $timeout(function() {\n                        $scope.user = user;\n                    },100);\n                });\n                \n                $scope.login = function() {\n                    $scope.user = AuthenticationService.login();\n                };\n\n                $scope.logout = function() {\n                    $scope.user = AuthenticationService.logout();\n                };\n\n                //watch user for changes (timeouts)\n                var watcher = $scope.$watch(function() { return AuthenticationService.getUser(); }, function(newUser) {\n                    $scope.user = newUser;\n                });\n\n                $scope.$on('$destroy', function() {\n                    watcher();  //destroy watcher\n                });\n            }\n        };\n    }])\n\n\n    \n    .directive('gpAccountDetails', ['$timeout', 'AuthenticationService', 'GPConfig', \n        function($timeout, AuthenticationService, Config) {\n\n        return {\n            scope: {},\n            replace: true,\n            template: [\n                '<div>' + \n                '  <div class=\"media\">',\n                '    <div class=\"media-left\">',\n                '        <div class=\"media-object\">',\n                '            <span class=\"glyphicon glyphicon-user glyphicon-xlg\"></span>',\n                '        </div>',\n                '    </div>',\n                '    <div class=\"media-body\" ng-if=\"user\">',\n                '       <div class=\"media-heading\">{{::user.name}}</div>' + \n                '       <div><small><em>{{::user.username}}</em></small></div>' + \n                '       <div><small>{{::user.email}}</small></div>' + \n                '       <div><small>{{::user.org}}</small></div>' +  \n                '    </div>',\n                '    <div class=\"media-body\" ng-if=\"!user\">',\n                '       <div class=\"media-heading\">Please Sign In</div>' + \n                '       <div><small>Sign in to your GeoPlatform account or register a new account.</small></div>' + \n                '    </div>',\n                '  </div>',\n                '  <hr/>',\n                '  <div ng-if=\"user\">',\n                '    <button type=\"button\" class=\"btn btn-sm btn-accent pull-right\" ng-click=\"logout()\">Sign Out</button>' + \n                '    <a class=\"btn btn-sm btn-default\" href=\"{{::idpUrl}}/modifyuser.html\">Edit Details</a>' + \n                '  </div>',\n                '  <div ng-if=\"!user\">',\n                '    <button type=\"button\" class=\"btn btn-sm btn-accent pull-right\" ng-click=\"login()\">Sign In</button>' + \n                '    <a class=\"btn btn-sm btn-default\" href=\"{{::idpUrl}}/registeruser.html\">Register</a>' + \n                '  </div>',\n                '</div>'\n            ].join(' '),\n            controller: function($scope, $element) {\n                \n                $scope.idpUrl = Config.idmBaseUrl;\n\n                AuthenticationService.getUser(function(user) {\n                    $timeout(function() {\n                        $scope.user = user;\n                    },100);\n                });\n                \n                $scope.login = function() {\n                    $scope.user = AuthenticationService.login();\n                };\n\n                $scope.logout = function() {\n                    $scope.user = AuthenticationService.logout();\n                };\n\n                //watch user for changes (timeouts)\n                var watcher = $scope.$watch(function() { return AuthenticationService.getUser(); }, function(newUser) {\n                    $scope.user = newUser;\n                });\n\n                $scope.$on('$destroy', function() {\n                    watcher();  //destroy watcher\n                });\n\n            }\n        };\n    }])\n\n;\n\n})(angular);","(function() {\n\n    \"use strict\";\n\n    if(typeof(Array.prototype.find) === 'undefined') {\n        Array.prototype.find = function(callback) {\n            for(var i=0; i<this.length; ++i) {\n                if(callback(this[i], i, this))\n                    return this[i];\n            }\n            return null;\n        };\n    }\n    if(typeof(Array.prototype.filter) === 'undefined') {\n        Array.prototype.filter = function(callback) {\n            var results = [];\n            for(var i=0; i<this.length; ++i) {\n                if(callback(this[i], i, this))\n                    results.push(this[i]);\n            }\n            return results;\n        };\n    }\n    if(typeof(Array.prototype.each) === 'undefined') {\n        Array.prototype.each = function(callback) {\n            for(var i=0; i<this.length; ++i) {\n                callback(this[i], i, this);\n            }\n        };\n    }\n    if(typeof(String.prototype.startsWith) === 'undefined') {\n        String.prototype.startsWith = function(value) {\n            var str = this;\n            if(!str.length)     return false;\n            if(!value.length)   return false;\n            if(str.length < value.length) return false;\n            return str.indexOf(value) === 0;\n        };\n    }\n    if(typeof(String.prototype.endsWith) === 'undefined') {\n        String.prototype.endsWith = function(value) {\n            var str = this;\n            if(!str.length)     return false;\n            if(!value.length)   return false;\n            if(str.length < value.length) return false;\n            var substr = str.substring(\n                str.length - value.length,\n                str.length\n            );\n            return substr == value;\n        };\n    }\n\n\n\n\n    if(typeof(Date.prototype.plus) === 'undefined') {\n        Date.prototype.plus = function(offset) {\n            \n            var type = typeof(offset);\n            if(type === 'undefined') return this;\n\n            var offsetMS = 0;\n            if(type === 'string') {\n                switch(offset) {\n                    case 'hour':    offsetMS = 1000*60*60; break;\n                    case 'day':     offsetMS = 1000*60*60*24; break;\n                    case 'week':    offsetMS = 1000*60*60*24*7; break;\n                    case 'month':   offsetMS = 1000*60*60*24*31; break;\n                    case 'year':    offsetMS = 1000*60*60*24*365; break;\n                }\n            } else if(type === 'number') {\n                offsetMS = offset;\n            } else return this;\n\n            var d = this;\n            return new Date(d.getTime() + offsetMS);\n        };\n    }\n\n    if(typeof(Date.prototype.random) === 'undefined') {\n        Date.prototype.random = function(threshold) {\n\n            var type = typeof(threshold);\n            if(type === 'undefined') return this;\n\n            var offsetMS = 0;\n            if(type === 'string') {\n                switch(threshold) {\n                    case 'hour':    offsetMS = 1000*60*60; break;\n                    case 'day':     offsetMS = 1000*60*60*24; break;\n                    case 'week':    offsetMS = 1000*60*60*24*7; break;\n                    case 'month':   offsetMS = 1000*60*60*24*31; break;\n                    case 'year':    offsetMS = 1000*60*60*24*365; break;\n                }\n            } else if(type === 'number') {\n                offsetMS = threshold;\n            } else return this;\n\n            var d = this;\n            return new Date(d.getTime() + Math.floor(Math.random()*offsetMS));\n        };\n    }\n\n})();","(function(jQuery, angular) {\n    \n    'use strict';\n\n    angular.module('gp-common').directive('gpDatePicker', ['$timeout', function($timeout) {\n\n        return {\n            scope: {\n                label: '@',\n                format: '@',\n                date: '=',\n                onChange: '&?'\n            },\n            template: [\n                '<div class=\"input-group-slick\">',\n                '    <input type=\"text\" class=\"form-control\" placeholder=\"{{::label}}\"',\n                '        datepicker-popup=\"{{format}}\" ng-model=\"date\" is-open=\"opened\" />',\n                '    <span class=\"glyphicon glyphicon-calendar\" ng-click=\"toggle($event)\"></span>',\n                '</div>',\n                '<p class=\"help-block\"><small><em>Ex: \"2015-01-31\" or \"Jan 31 2015\"</em></small></p>'\n            ].join(' '),\n\n            controller: function($scope, $element, $attrs) {\n\n                //toggle date picker\n                $scope.toggle = function(event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.opened = !this.opened;\n                };\n\n                if(!$scope.format)\n                    $scope.format = 'MMM dd yyyy';\n\n                var promise = null;\n\n                $scope.debounce = function() {\n                    if(promise) $timeout.cancel(promise);\n                    promise = $timeout(function() { \n                        promise = null;\n                        if($scope.onChange)\n                            $scope.onChange();\n                    }, 200);\n                };\n\n                $scope.$watch('date', function() {\n                    $scope.debounce();\n                });\n\n                var listener = $scope.$on('$destroy', function() {\n                    \n                    listener();             //deregister listener\n                    \n                    if(promise) $timeout.cancel(promise);\n                    promise = null;\n\n                    $scope.opened = false;    //close picker if open\n                    $scope.onChange = null;\n                    $scope.format = null;\n                    $scope.debounce = null;\n                });\n\n            }\n        };\n\n    }]);\n\n})(jQuery, angular);","(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\")\n\n    /**\n     * Geolocation directive\n     */\n    .directive('gpGeolocation', ['$window',function ($window) {\n        \n        var defaultBtnLabel = \"Locate\";\n\n        return {\n            scope: {\n                label: '=?'\n            },\n            restrict: \"EA\",\n            template: [\n                '<a class=\"btn btn-primary\" ng-click=\"geolocate()\" ng-if=\"available\">',\n                '  <span class=\"glyphicon glyphicon-screenshot\" ng-if=\"!loading\"></span>',\n                '  <span class=\"glyphicon glyphicon-hourglass glyphicon-spin\" ng-if=\"loading\"></span>',\n                '  {{btnLabel}}',\n                '</a>',\n                '<div ng-if=\"error\">{{error}}</div>'\n            ].join(' '),\n            controller: function($scope) {\n\n                $scope.btnLabel = $scope.label || defaultBtnLabel;\n                $scope.loading = false;\n                $scope.available = ($window.navigator && $window.navigator.geolocation);\n\n                if(!$scope.available) \n                    $scope.error = \"Your browser does not support determining location\";\n\n                $scope.geolocate = function() {\n\n                    $scope.loading = true;\n                    $window.navigator.geolocation.getCurrentPosition(function(position){\n\n                        $scope.$apply(function() {$scope.loading = false;});\n                        $scope.$emit('map:geolocation', position.coords.latitude, position.coords.longitude);\n\n                    }, function(error) {\n                        switch (error.code) {\n                          case 1:\n                            $scope.error = \"Permission was denied while attempting to determine location\";\n                            break;\n                          case 2:\n                            $scope.error = \"Unable to determine your location\";\n                            break;\n                          case 3:\n                            $scope.error = \"Unable to determine location in a reasonable amount of time\";\n                            break;\n                        }\n                    });\n                }; \n            }\n        };\n\n    }])\n\n    ;\n\n})(jQuery, angular);","(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\")\n\n\n\n    .directive('gpHeader', ['GPConfig', 'AuthenticationService', function(Config, AuthenticationService) {\n\n        return {\n\n            scope: {\n                brand: \"@\",\n                showHomeLink: \"@\"\n            },\n            restrict: \"AE\",\n            transclude: true,\n            replace: true,\n            template: [\n                '<header>',\n                '  <div class=\"container-fluid\">',\n                '    <div class=\"row\">',\n                '      <div class=\"col-md-12\">',\n                '        <ul role=\"menu\" class=\"header__menu\" gp-header-menu>',\n                '          <li ng-if=\"showHomeLink\">',\n                '            <a href=\"#/goHome\">',\n                '                <span class=\"glyphicon glyphicon-home\"></span> ',\n                '                <span class=\"hidden-xs hidden-sm\">Home</span>',\n                '            </a>',\n                '          </li>',\n                '          <div class=\"transcluded\"></div>',\n                '          <li><span gp-login-button></span></li>',\n                '        </ul>',\n                '        <h4 class=\"brand\">',\n                '          <a href=\"{{portalUrl}}\" title=\"Go to the GeoPlatform Home Page\">',\n                '            <span class=\"icon-gp\"></span>',\n                '            <span class=\"hidden-xs\">GeoPlatform</span>',\n                '          </a>',\n                '          {{brand}}',\n                '        </h4>',\n                '      </div>',\n                '    </div>',\n                '  </div>',\n                '</header>'\n            ].join(' '),\n\n            // controller: function($rootScope, $scope, $element) {\n            //     $scope.portalUrl = $rootScope.portalUrl;\n            // }, \n\n            link: function($scope, $element, $attrs, ctrl, transcludeFn) {\n\n                $scope.showHomeLink = $scope.showHomeLink === 'true' || false;\n\n                $scope.portalUrl = Config.portalUrl;\n\n                AuthenticationService.getUserQ().then(function(user) {\n                    $scope.user = user;    \n                });\n                \n                $element.find('.transcluded').replaceWith(transcludeFn());\n            }            \n\n        };\n\n    }])\n\n\n    \n    /**\n     * Header Menu\n     *\n     * Monitors the current page URL and updates the header links \n     * to highlight whichever one is associated with the current page\n     *\n     * Usage: \n     *\n     *  <ul role=\"menu\" class=\"nav-menu\" gp-header-menu>\n     *      <li><a href=\"#/maps\">Maps</a></li>\n     *      <li><a href=\"#/galleries\">Galleries</a></li>\n     *      ...\n     *  </ul>\n     *\n     */\n    .directive('gpHeaderMenu', ['$location', function($location) {\n\n        function update($element) {\n            var path = $location.path();\n            if(path === '/' || path === '/#' || path === '/#/')\n                path = 'maps';\n            if(path[0] === '/') path = path.substring(1);\n\n            var menu = $element;\n            menu.find('li.active').removeClass('active');\n            menu.find('li > a[href=\"#/' + path + '\"]').parent().addClass('active');\n\n            menu.find('li > a').each(function(i,a) {\n                var $a = $(a), href = $a.attr('href');\n                if(!href) return;\n                href = href.replace('#/', '');\n                if(path.indexOf(href) === 0)\n                    $a.parent().addClass('active');\n            });\n        }\n\n        return {\n            scope: {},\n            restrict: \"A\",\n            controller: function($rootScope, $scope, $element) {\n                // $scope.menuOpen = false;\n                // $scope.portalUrl = $rootScope.portalUrl;\n            },\n            link: function($scope, $element) {\n\n                update($element);\n\n                $scope.$root.$on('$locationChangeSuccess', function() {\n                    update($element);\n                });\n\n            }\n        };\n    }]);\n\n})(jQuery, angular);\n","(function(angular) {\n\n\n    \"use strict\";\n\n    angular.module('gp-common').directive('iframeOnload', function(){\n        return {\n            scope: {\n                callback: '&iframeOnload'\n            },\n            link: function(scope, element, attrs){\n                element.on('load', function(event){\n                    element.off('load');\n                    return scope.callback(event);\n                });\n            }\n        };\n    });\n\n}) (angular);","(function(angular) {\n    \n    \"use strict\";\n\n\n    angular.module('gp-common')\n\n\n    //\n    .service('NotificationService', ['$rootScope', function($rootScope) {\n        var Service = function() {\n            this.items = [];\n        };\n        Service.prototype = {\n            getItems: function() { return this.items; },\n            /**\n             * @param item object\n             * @return function to cancel the notification\n             */\n            addItem: function(item) { \n                this.items.push(item); \n                $rootScope.$broadcast('gp:notifications:new', item);\n\n                var fn = function(item) { this.removeItem(item); };\n                return fn.bind(this, item);\n            },\n            removeItem: function(item) {\n                var index = this.items.indexOf(item);\n                if(index >= 0)\n                    return this.items.splice(index, 1);\n                return null;\n            },\n            error: function(label, msg, dismiss) { \n                return this.addItem({ type: 'error', label: label, message: msg, canDismiss: dismiss });\n            },\n            success: function(label, msg, dismiss) { \n                return this.addItem({ type: 'success', label: label, message: msg, canDismiss: dismiss });\n            },\n            info: function(label, msg, dismiss) { \n                return this.addItem({ type: 'info', label: label, message: msg, canDismiss: dismiss });\n            }\n        };\n        return new Service();\n    }])\n\n\n    // Usage: <gp-notifications />\n    .directive('gpNotifications', ['$timeout', 'NotificationService', function($timeout, NotificationService) {\n        return {\n            scope: {\n                expiration: '@'\n            },\n            template: [\n                '<div class=\"notifications ng-hide\" ng-show=\"items.length\">',\n                '  <div class=\"notification\" ng-repeat=\"item in items\"',\n                '    ng-class=\"{\\'notification--success\\':item.type===\\'success\\', \\'notification--error\\':item.type===\\'error\\', \\'notification--info\\':item.type===\\'info\\'}\">',\n                '    <h5 class=\"notification__title\">',\n                '        <span class=\"pull-right glyphicon\" ',\n                '            ng-class=\"{\\'glyphicon-ok-sign\\':item.type===\\'success\\',\\'glyphicon-exclamation-sign\\':item.type===\\'error\\',\\'glyphicon-info-sign\\':item.type===\\'info\\'}\">',\n                '        </span>',\n                '        {{item.label}}',\n                '    </h5>',\n                '    <p class=\"notification__content\" ng-bind-html=\"item.message\"></p>',\n                '    <div class=\"notification__actions\" ng-if=\"item.canDismiss\">',\n                '        <button type=\"button\" class=\"btn btn-link\" ng-click=\"dismiss(item)\">dismiss</button>',\n                '    </div>',\n                '  </div>',\n                '</div>'\n            ].join(' '),\n\n            link: function($scope, $element, $attrs) {\n\n                $scope.expiration = ($scope.expiration || 2000)*1;\n\n                $scope.items = [];\n\n\n                function update() {\n                    $scope.items = NotificationService.getItems();\n\n                    //if updated before timer expired, reset timer\n                    if($scope.timer) {\n                        $timeout.cancel($scope.timer);\n                        $scope.timer = null;\n                    }\n\n                    //set timer to kill earliest item after time\n                    $scope.timer = $timeout(function() {\n                        $scope.timer = null;\n                        //will ultimately call update() and thus trigger timeout again\n                        $scope.removeOldest();\n                    }, $scope.expiration);\n                }\n                update();\n\n                $scope.removeOldest = function() {\n                    //find oldest that can be removed\n                    var oldest = $scope.items.find(function(item) {return item.canDismiss;});\n                    if(oldest)\n                        NotificationService.removeItem(oldest);\n                };\n\n                $scope.dismiss = function(item) {\n                    //remove item using service\n                    NotificationService.removeItem(item);\n                };\n\n                $scope.$watchCollection(function() {\n                    return NotificationService.getItems();\n                }, update);\n\n                // $scope.$on('gp:notifications:new', function(event, item) { update(); });\n\n            }\n        };\n    }]);\n\n\n})(angular);","(function(jQuery, angular) {\n    \n    \"use strict\";\n\n    angular.module('gp-common').directive('gp-Pagination', function() {\n\n\n        function Controller($scope, $element) {\n\n            $scope.previous = function() { \n                $scope.start = Math.max(0, $scope.start*1 - $scope.pageSize*1);\n                $scope.$emit('pagination:change', $scope.start, $scope.pageSize);\n            };\n\n            $scope.next = function() {\n                $scope.start = Math.min($scope.total, $scope.start*1 + $scope.pageSize*1);\n                $scope.$emit('pagination:change', $scope.start, $scope.pageSize);\n            };\n\n            $scope.setPage = function(arg) {\n                var page = arg*1;\n                $scope.start = (page-1) * ($scope.pageSize*1);\n                $scope.$emit('pagination:change', $scope.start, $scope.pageSize);\n            };\n\n            $scope.setPageSize = function(size) {\n\n                $scope.pageSize = size*1;\n                //move start cursor to beginning of new current page based on updated pagesize\n                var currentPage = Math.floor($scope.start / $scope.pageSize) + 1;\n                $scope.setPage(currentPage);\n            };\n\n            $scope.hasPrevious = function() {\n                return $scope.start > 0;\n            };\n\n            $scope.hasNext = function() {\n                return ($scope.start+$scope.pageSize) < $scope.total;\n            };\n\n\n            function update() {\n            \n                var ostart = $scope.start*1;\n                var osize = $scope.pageSize*1;\n                \n                //calculate # of pages needed\n                var pages = [];\n                var maxPagination = 5;\n                var maxPaginationMidPoint = ((maxPagination % 2) !== 0) ? Math.ceil(maxPagination / 2) : maxPagination / 2;\n\n                if($scope.total > 0) {\n                    \n                    var numPages = Math.ceil($scope.total / osize);\n                    var currentPage = Math.floor(ostart / osize);\n\n                    var s = 0;\n                    if(currentPage > Math.floor(maxPagination/2)) {     //  1 2 '3' 4 5\n                        s = currentPage-Math.floor(maxPagination/2);    //  1 2 3 '4' 5\n                                                                        //  ...\n\n                    } else {                                            //  '1' 2 3 4 5\n                        s = 0;                                          //  1 '2' 3 4 5\n                                                                        //  ...\n                    }\n\n                    var e = Math.min(s+maxPagination, numPages);\n\n                    //ensure at least <maxPagination> # of page links are shown\n                    // even if near the end of the results\n                    while(s>0 && ((e-s) < maxPagination))\n                        s-=1;\n\n                    for(var i=s; i<e; ++i) {\n                        var pageStart = (i*osize)+1;\n                        var pageEnd = Math.min(pageStart + osize - 1, $scope.total);\n                        pages.push({\n                            label: (i+1)+\"\",\n                            tooltip: \"Results \" + pageStart + \"-\" + pageEnd\n                        });\n                        if(i == currentPage)\n                            pages[pages.length-1].active = true;\n                    }\n\n                }\n\n                $scope.pages = pages;\n\n            }\n\n            update();\n\n            $scope.$watch('start',      update);\n            $scope.$watch('pageSize',   update);\n            $scope.$watch('total',      update);\n\n        }\n\n\n\n        return {\n\n            scope: {\n                start: '=',\n                pageSize: '=',\n                total: '='\n            },\n            replace: true,\n            template: [\n                '<div>',\n                '  <div class=\"visible-xs row\">',\n                '    <div class=\"col-xs-6\">{{total}} results</div>',\n                '    <div class=\"col-xs-6\">',\n                '      <select class=\"form-control\" ng-model=\"pageSize\">',\n                '        <option value=\"5\">5 per page</option>',\n                '        <option value=\"10\">10 per page</option>',\n                '        <option value=\"25\">25 per page</option>',\n                '        <option value=\"50\">50 per page</option>',\n                '      </select>',\n                '    </div>',\n                '  </div>',\n                '  <ul class=\"pagination\">',\n                '    <li class=\"info hidden-xs\">',\n                '      <a>{{total}} results</a>',\n                '    </li>',\n                '    <li class=\"pagination-control hidden-xs\" ng-if=\"total>0\">',\n                '      <span dropdown>',\n                '        <a href=\"\" dropdown-toggle title=\"Change the number of results returned\">',\n                '          {{pageSize}} per page <span class=\"caret\"></span>',\n                '        </a>',\n                '        <ul class=\"dropdown-menu\" role=\"menu\">',\n                '          <li><a href=\"\" ng-click=\"setPageSize(5)\">5 per page</a></li>',\n                '          <li><a href=\"\" ng-click=\"setPageSize(10)\">10 per page</a></li>',\n                '          <li><a href=\"\" ng-click=\"setPageSize(25)\">25 per page</a></li>',\n                '          <li><a href=\"\" ng-click=\"setPageSize(50)\">50 per page</a></li>',\n                '        </ul>',\n                '      </span>',\n                '    </li>',\n                '    <li class=\"separator hidden-xs\"></li>',\n                '    <li ng-if=\"hasPrevious()\">',\n                '      <a ng-click=\"previous()\">',\n                '        <span class=\"glyphicon glyphicon-backward\"></span>',\n                '      </a>',\n                '    </li>',\n                '    <li ng-repeat=\"page in pages\" ng-class=\"{active:page.active,disabled:page.disabled}\">',\n                '      <a ng-click=\"setPage(page.label)\" title=\"{{::page.tooltip}}\">{{::page.label}}</a>',\n                '    </li>',\n                '    <li ng-if=\"hasNext()\">',\n                '      <a ng-click=\"next()\">',\n                '        <span class=\"glyphicon glyphicon-forward\"></span>',\n                '      </a>',\n                '    </li>',\n                '  </ul>',\n                '</div>'\n            ].join(' '),\n\n            controller: Controller\n\n        };\n\n    });\n\n\n})(jQuery, angular);","(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\", []);\n\n})(jQuery, angular);\n(function(angular) {\n    \n    'use strict';\n\n    //flag on whether we're in dev env\n    function isDEV() {\n        return \"localhost\" === window.location.hostname || \n            ~window.location.hostname.indexOf(\"192.168\")||\n            ~window.location.hostname.indexOf(\"10.0\");\n    }\n\n\n\n    /** \n     * GeoPlatform Common Module Authentication Support\n     *\n     * Contains re-usable services, directives, and other angular components\n     *\n     * \n     * NOTE: This module uses certain variables in $rootScope in order to \n     * perform actions like authentication.  The following variables should be\n     * set before using any service/directive in this file:\n     *\n     *   - idspUrl : the url to the identity service provider server\n     *   - idmUrl : the url to the identity management server\n     *   - portalUrl : the url to the main landing page of GeoPlatform (www.geoplatform.gov in production) \n     */\n    angular.module('gp-common')\n\n\n    //Assumes a global has been set\n    // Don't use these... deprecated\n    .constant('idspBaseUrl', GeoPlatform.idspUrl)\n    .constant('idmBaseUrl', GeoPlatform.idmUrl)\n\n    //Assumes a global object containing configuration values for GeoPlatform exists \n    // prior to this module being declared\n    // (using 'value' since config might change)\n    .value('GPConfig', GeoPlatform)\n\n\n    /**\n     * Authentication Service\n     * \n     * Because the auth service redirects the page to the IDM portal\n     * and WMV is reloaded once the login/logout processes are complete,\n     * there's no need to bind listeners informing other components of \n     * an auth change.\n     *\n     * Inside \"DEV\", you should close and re-open any components' widgets\n     * to get current auth status.\n     */\n    .service('AuthenticationService', ['$q', '$http', 'GPConfig', function($q, $http, Config) {\n\n        // console.log(\"IDSP Base Url: \" + Config.idspBaseUrl);\n\n        function User(opts) {\n            for(var p in opts) {\n                this[p] = opts[p];\n            }\n            if(!this.id && this.username)\n                this.id = this.username;\n\n            this.toJSON = function() {\n                return {\n                    id: this.id,\n                    username: this.username, \n                    name: this.name, \n                    email: this.email,\n                    org: this.org\n                };\n            };\n            this.clone = function() {\n                return new User(this.toJSON());\n            };\n            this.compare = function(arg) {\n                if(arg instanceof User) {\n                    return this.id === arg.id;\n                } else if(typeof(arg) === 'object') {\n                    return typeof(arg.id) !== 'undefined' && \n                        arg.id === this.id;\n                }\n                return false;\n            };\n        }\n\n\n        var TEST_USER = new User({\n            id: \"tester\",\n            username: \"tester\", \n            email: \"tester@geoplatform.us\",\n            name: \"John Test\", \n            org: \"Other\"\n        });\n\n\n        var _user = null;\n\n        if(isDEV()) {\n            _user = TEST_USER.clone();\n        }    \n\n        var STATUS = {\n            NONE: 0,\n            INITIALIZING: -1,   //auth check in progress\n            INITIALIZED: 1      //auth check completed\n        };\n\n\n        /**\n         * Authentication Service\n         */\n        var Service = function() {\n\n            var self = this;\n            \n\n            this.status = STATUS.NONE;\n\n            //$q version of getUser\n            this.getUserQ = function() {\n                var deferred = $q.defer();\n                this.getUser(function(user) { deferred.resolve(user); });\n                return deferred.promise;\n            };\n\n            /**\n             * If the callback parameter is specified, this method\n             * will return undefined. Otherwise, it returns the user (or null).\n             *\n             * @param callback optional function to invoke with the user\n             * @return object representing current user\n             */\n            this.getUser = function(callback) {\n                if(callback && typeof(callback) === 'function') {\n\n                    //if already checked, return what we have\n                    if(self.status === STATUS.INITIALIZED) \n                        callback(_user);\n                    //if not in process of checking, check\n                    else if(self.status !== STATUS.INITIALIZING) {\n                        //if hasn't been checked for auth yet, do that now\n                        self.check().then(function(_user) {\n                            self.status = STATUS.INITIALIZED;\n                            callback(_user);\n                        }, function() {\n                             self.status = STATUS.INITIALIZED;\n                             callback(null);\n                        });\n                    } \n                    //if in process of checking, wait until it finishes\n                    else {\n                        setTimeout(function() {\n                            self.getUser(callback);\n                        }, 500);\n                    }\n                    return;\n                }\n                return _user;\n            };\n\n            /**\n             * Redirects the page to the login site\n             */\n            this.login = function () {\n                if(isDEV()) {\n                    _user = TEST_USER.clone();\n                    return _user;\n                }\n                var current = window.location.href;\n                window.location = Config.idspBaseUrl + '/module.php/core/as_login.php?AuthId=geosaml&ReturnTo=' + encodeURIComponent(current);\n            };\n\n            /**\n             * Redirects the page to the logout site\n             */\n            this.logout = function() {\n                if(isDEV()) {\n                    _user = null;\n                    return _user;\n                }\n                var current = window.location.href;\n                window.location = Config.idspBaseUrl + '/module.php/core/as_logout.php?AuthId=geosaml&ReturnTo=' + encodeURIComponent(current);\n            };\n\n\n            /**\n             * Queries simplesamlphp if the current session is authenticated\n             * @return promise - then(function(user) {}, function(response){})\n             */\n            this.check = function() {\n                \n                var deferred = $q.defer();\n                \n                if(isDEV()) {\n                    setTimeout(function() {\n                        deferred.resolve(_user);\n                    }, 1000);\n                    return deferred.promise;\n                }\n\n                self.status = STATUS.INITIALIZING;\n\n                //check authentication on load\n                $http.get(Config.idspBaseUrl + '/authenticategeosaml.php?as=geosaml')\n                .success(function(response) {\n                    \n                    if(response.Success) {  //authenticated\n                        _user = new User({\n                            id       : response.name[0],\n                            username : response.name[0],\n                            email    : response.mail[0],\n                            name     : response.first_name[0] + ' ' + response.last_name[0],\n                            org      : response.organization[0]\n                        });\n                    } else {\n                        _user = null;       //not authenticated\n                    }\n\n                    deferred.resolve(_user);\n                    \n                }).error(function(data, status, headers) {   // failed check\n                    console.log(\"Authentication call failed\");\n                    deferred.reject(data);\n                });\n\n                return deferred.promise;\n            };\n\n            //=====================================================\n\n            //initialize with auth check\n            this.check().then(function(user) {\n                self.status = STATUS.INITIALIZED;\n            }, function(err) {\n                self.status = STATUS.INITIALIZED;\n            });\n\n        };\n\n        return new Service();\n\n    }])\n\n    .directive('gpLoginButton', ['$timeout', 'AuthenticationService', 'GPConfig', \n        function($timeout, AuthenticationService, Config) {\n        return {\n            scope: {\n                minimal: '@'\n            },\n            template: [\n\n                //not logged in\n                '<div class=\"btn-account btn-group\" ng-if=\"!user\" >' + \n                '    <a class=\"hidden-xs btn btn-link\" ng-click=\"login()\">' + \n                '        <span class=\"glyphicon glyphicon-user\"></span>' + \n                '        Sign In' + \n                '    </a>' + \n                '    <button type=\"button\" class=\"visible-xs btn btn-link dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' + \n                '        <span class=\"glyphicon glyphicon-user\"></span>' + \n                '        <span class=\"caret\"></span>' + \n                '    </button>' + \n                '    <ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">' + \n                '        <li><a ng-click=\"login()\">Sign In</a></li>' + \n                '    </ul>' + \n                '</div>' + \n\n                //logged in\n                '<div class=\"btn-account btn-group\" ng-if=\"user\" >' + \n                '  <button type=\"button\" class=\"btn btn-link dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">' + \n                '     <span class=\"glyphicon glyphicon-user\"></span> ' +\n                '     <span class=\"hidden-xs\">{{::user.name}}</span> ' + \n                '     <span class=\"caret\"></span>' + \n                '  </button>' + \n                '  <ul class=\"dropdown-menu dropdown-menu-right\" role=\"menu\">' + \n                '    <li class=\"account-details\">' + \n                '      <div class=\"media\">' + \n                '        <div class=\"media-left\">' + \n                '          <div class=\"media-object\">' + \n                '            <span class=\"glyphicon glyphicon-user glyphicon-xlg\"></span>' + \n                '          </div>' + \n                '        </div>' + \n                '        <div class=\"media-body\">' + \n                '          <div class=\"media-heading\">{{::user.name}}</div>' + \n                '          <div><em>{{::user.username}}</em></div>' + \n                '          <div>{{::user.email}}</div>' + \n                '          <div>{{::user.org}}</div>' + \n                '        </div>' + \n                '      </div>' + \n                '    </li>' + \n                '    <li class=\"divider\"></li>' + \n                '    <li><a href=\"{{::idpUrl}}/modifyuser.html\">Edit Info</a></li>' + \n                '    <li><a href=\"{{::idpUrl}}/changepassword.html\">Change Password</a></li>' + \n                '    <li><a href ng-click=\"logout()\">Sign Out</a></li>' + \n                '  </ul>' + \n                '</div>'\n            ].join(' '),\n            controller: [\"$scope\", \"$element\", function($scope, $element) {\n\n                if($scope.minimal === 'true') $scope.minimal = true;\n                if($scope.minimal !== true) $scope.minimal = false;\n\n                $scope.idpUrl = Config.idmBaseUrl;\n                // console.log(\"IDM Base Url: \" + Config.idmBaseUrl);\n                \n                AuthenticationService.getUser(function(user) {\n                    $timeout(function() {\n                        $scope.user = user;\n                    },100);\n                });\n                \n                $scope.login = function() {\n                    $scope.user = AuthenticationService.login();\n                };\n\n                $scope.logout = function() {\n                    $scope.user = AuthenticationService.logout();\n                };\n\n                //watch user for changes (timeouts)\n                var watcher = $scope.$watch(function() { return AuthenticationService.getUser(); }, function(newUser) {\n                    $scope.user = newUser;\n                });\n\n                $scope.$on('$destroy', function() {\n                    watcher();  //destroy watcher\n                });\n            }]\n        };\n    }])\n\n\n    \n    .directive('gpAccountDetails', ['$timeout', 'AuthenticationService', 'GPConfig', \n        function($timeout, AuthenticationService, Config) {\n\n        return {\n            scope: {},\n            replace: true,\n            template: [\n                '<div>' + \n                '  <div class=\"media\">',\n                '    <div class=\"media-left\">',\n                '        <div class=\"media-object\">',\n                '            <span class=\"glyphicon glyphicon-user glyphicon-xlg\"></span>',\n                '        </div>',\n                '    </div>',\n                '    <div class=\"media-body\" ng-if=\"user\">',\n                '       <div class=\"media-heading\">{{::user.name}}</div>' + \n                '       <div><small><em>{{::user.username}}</em></small></div>' + \n                '       <div><small>{{::user.email}}</small></div>' + \n                '       <div><small>{{::user.org}}</small></div>' +  \n                '    </div>',\n                '    <div class=\"media-body\" ng-if=\"!user\">',\n                '       <div class=\"media-heading\">Please Sign In</div>' + \n                '       <div><small>Sign in to your GeoPlatform account or register a new account.</small></div>' + \n                '    </div>',\n                '  </div>',\n                '  <hr/>',\n                '  <div ng-if=\"user\">',\n                '    <button type=\"button\" class=\"btn btn-sm btn-accent pull-right\" ng-click=\"logout()\">Sign Out</button>' + \n                '    <a class=\"btn btn-sm btn-default\" href=\"{{::idpUrl}}/modifyuser.html\">Edit Details</a>' + \n                '  </div>',\n                '  <div ng-if=\"!user\">',\n                '    <button type=\"button\" class=\"btn btn-sm btn-accent pull-right\" ng-click=\"login()\">Sign In</button>' + \n                '    <a class=\"btn btn-sm btn-default\" href=\"{{::idpUrl}}/registeruser.html\">Register</a>' + \n                '  </div>',\n                '</div>'\n            ].join(' '),\n            controller: [\"$scope\", \"$element\", function($scope, $element) {\n                \n                $scope.idpUrl = Config.idmBaseUrl;\n\n                AuthenticationService.getUser(function(user) {\n                    $timeout(function() {\n                        $scope.user = user;\n                    },100);\n                });\n                \n                $scope.login = function() {\n                    $scope.user = AuthenticationService.login();\n                };\n\n                $scope.logout = function() {\n                    $scope.user = AuthenticationService.logout();\n                };\n\n                //watch user for changes (timeouts)\n                var watcher = $scope.$watch(function() { return AuthenticationService.getUser(); }, function(newUser) {\n                    $scope.user = newUser;\n                });\n\n                $scope.$on('$destroy', function() {\n                    watcher();  //destroy watcher\n                });\n\n            }]\n        };\n    }])\n\n;\n\n})(angular);\n(function() {\n\n    \"use strict\";\n\n    if(typeof(Array.prototype.find) === 'undefined') {\n        Array.prototype.find = function(callback) {\n            for(var i=0; i<this.length; ++i) {\n                if(callback(this[i], i, this))\n                    return this[i];\n            }\n            return null;\n        };\n    }\n    if(typeof(Array.prototype.filter) === 'undefined') {\n        Array.prototype.filter = function(callback) {\n            var results = [];\n            for(var i=0; i<this.length; ++i) {\n                if(callback(this[i], i, this))\n                    results.push(this[i]);\n            }\n            return results;\n        };\n    }\n    if(typeof(Array.prototype.each) === 'undefined') {\n        Array.prototype.each = function(callback) {\n            for(var i=0; i<this.length; ++i) {\n                callback(this[i], i, this);\n            }\n        };\n    }\n    if(typeof(String.prototype.startsWith) === 'undefined') {\n        String.prototype.startsWith = function(value) {\n            var str = this;\n            if(!str.length)     return false;\n            if(!value.length)   return false;\n            if(str.length < value.length) return false;\n            return str.indexOf(value) === 0;\n        };\n    }\n    if(typeof(String.prototype.endsWith) === 'undefined') {\n        String.prototype.endsWith = function(value) {\n            var str = this;\n            if(!str.length)     return false;\n            if(!value.length)   return false;\n            if(str.length < value.length) return false;\n            var substr = str.substring(\n                str.length - value.length,\n                str.length\n            );\n            return substr == value;\n        };\n    }\n\n\n\n\n    if(typeof(Date.prototype.plus) === 'undefined') {\n        Date.prototype.plus = function(offset) {\n            \n            var type = typeof(offset);\n            if(type === 'undefined') return this;\n\n            var offsetMS = 0;\n            if(type === 'string') {\n                switch(offset) {\n                    case 'hour':    offsetMS = 1000*60*60; break;\n                    case 'day':     offsetMS = 1000*60*60*24; break;\n                    case 'week':    offsetMS = 1000*60*60*24*7; break;\n                    case 'month':   offsetMS = 1000*60*60*24*31; break;\n                    case 'year':    offsetMS = 1000*60*60*24*365; break;\n                }\n            } else if(type === 'number') {\n                offsetMS = offset;\n            } else return this;\n\n            var d = this;\n            return new Date(d.getTime() + offsetMS);\n        };\n    }\n\n    if(typeof(Date.prototype.random) === 'undefined') {\n        Date.prototype.random = function(threshold) {\n\n            var type = typeof(threshold);\n            if(type === 'undefined') return this;\n\n            var offsetMS = 0;\n            if(type === 'string') {\n                switch(threshold) {\n                    case 'hour':    offsetMS = 1000*60*60; break;\n                    case 'day':     offsetMS = 1000*60*60*24; break;\n                    case 'week':    offsetMS = 1000*60*60*24*7; break;\n                    case 'month':   offsetMS = 1000*60*60*24*31; break;\n                    case 'year':    offsetMS = 1000*60*60*24*365; break;\n                }\n            } else if(type === 'number') {\n                offsetMS = threshold;\n            } else return this;\n\n            var d = this;\n            return new Date(d.getTime() + Math.floor(Math.random()*offsetMS));\n        };\n    }\n\n})();\n(function(jQuery, angular) {\n    \n    'use strict';\n\n    angular.module('gp-common').directive('gpDatePicker', ['$timeout', function($timeout) {\n\n        return {\n            scope: {\n                label: '@',\n                format: '@',\n                date: '=',\n                onChange: '&?'\n            },\n            template: [\n                '<div class=\"input-group-slick\">',\n                '    <input type=\"text\" class=\"form-control\" placeholder=\"{{::label}}\"',\n                '        datepicker-popup=\"{{format}}\" ng-model=\"date\" is-open=\"opened\" />',\n                '    <span class=\"glyphicon glyphicon-calendar\" ng-click=\"toggle($event)\"></span>',\n                '</div>',\n                '<p class=\"help-block\"><small><em>Ex: \"2015-01-31\" or \"Jan 31 2015\"</em></small></p>'\n            ].join(' '),\n\n            controller: [\"$scope\", \"$element\", \"$attrs\", function($scope, $element, $attrs) {\n\n                //toggle date picker\n                $scope.toggle = function(event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.opened = !this.opened;\n                };\n\n                if(!$scope.format)\n                    $scope.format = 'MMM dd yyyy';\n\n                var promise = null;\n\n                $scope.debounce = function() {\n                    if(promise) $timeout.cancel(promise);\n                    promise = $timeout(function() { \n                        promise = null;\n                        if($scope.onChange)\n                            $scope.onChange();\n                    }, 200);\n                };\n\n                $scope.$watch('date', function() {\n                    $scope.debounce();\n                });\n\n                var listener = $scope.$on('$destroy', function() {\n                    \n                    listener();             //deregister listener\n                    \n                    if(promise) $timeout.cancel(promise);\n                    promise = null;\n\n                    $scope.opened = false;    //close picker if open\n                    $scope.onChange = null;\n                    $scope.format = null;\n                    $scope.debounce = null;\n                });\n\n            }]\n        };\n\n    }]);\n\n})(jQuery, angular);\n(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\")\n\n    /**\n     * Geolocation directive\n     */\n    .directive('gpGeolocation', ['$window',function ($window) {\n        \n        var defaultBtnLabel = \"Locate\";\n\n        return {\n            scope: {\n                label: '=?'\n            },\n            restrict: \"EA\",\n            template: [\n                '<a class=\"btn btn-primary\" ng-click=\"geolocate()\" ng-if=\"available\">',\n                '  <span class=\"glyphicon glyphicon-screenshot\" ng-if=\"!loading\"></span>',\n                '  <span class=\"glyphicon glyphicon-hourglass glyphicon-spin\" ng-if=\"loading\"></span>',\n                '  {{btnLabel}}',\n                '</a>',\n                '<div ng-if=\"error\">{{error}}</div>'\n            ].join(' '),\n            controller: [\"$scope\", function($scope) {\n\n                $scope.btnLabel = $scope.label || defaultBtnLabel;\n                $scope.loading = false;\n                $scope.available = ($window.navigator && $window.navigator.geolocation);\n\n                if(!$scope.available) \n                    $scope.error = \"Your browser does not support determining location\";\n\n                $scope.geolocate = function() {\n\n                    $scope.loading = true;\n                    $window.navigator.geolocation.getCurrentPosition(function(position){\n\n                        $scope.$apply(function() {$scope.loading = false;});\n                        $scope.$emit('map:geolocation', position.coords.latitude, position.coords.longitude);\n\n                    }, function(error) {\n                        switch (error.code) {\n                          case 1:\n                            $scope.error = \"Permission was denied while attempting to determine location\";\n                            break;\n                          case 2:\n                            $scope.error = \"Unable to determine your location\";\n                            break;\n                          case 3:\n                            $scope.error = \"Unable to determine location in a reasonable amount of time\";\n                            break;\n                        }\n                    });\n                }; \n            }]\n        };\n\n    }])\n\n    ;\n\n})(jQuery, angular);\n(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\")\n\n\n\n    .directive('gpHeader', ['GPConfig', 'AuthenticationService', function(Config, AuthenticationService) {\n\n        return {\n\n            scope: {\n                brand: \"@\",\n                showHomeLink: \"@\"\n            },\n            restrict: \"AE\",\n            transclude: true,\n            replace: true,\n            template: [\n                '<header>',\n                '  <div class=\"container-fluid\">',\n                '    <div class=\"row\">',\n                '      <div class=\"col-md-12\">',\n                '        <ul role=\"menu\" class=\"header__menu\" gp-header-menu>',\n                '          <li ng-if=\"showHomeLink\">',\n                '            <a href=\"#/goHome\">',\n                '                <span class=\"glyphicon glyphicon-home\"></span> ',\n                '                <span class=\"hidden-xs hidden-sm\">Home</span>',\n                '            </a>',\n                '          </li>',\n                '          <div class=\"transcluded\"></div>',\n                '          <li><span gp-login-button></span></li>',\n                '        </ul>',\n                '        <h4 class=\"brand\">',\n                '          <a href=\"{{portalUrl}}\" title=\"Go to the GeoPlatform Home Page\">',\n                '            <span class=\"icon-gp\"></span>',\n                '            <span class=\"hidden-xs\">GeoPlatform</span>',\n                '          </a>',\n                '          {{brand}}',\n                '        </h4>',\n                '      </div>',\n                '    </div>',\n                '  </div>',\n                '</header>'\n            ].join(' '),\n\n            // controller: function($rootScope, $scope, $element) {\n            //     $scope.portalUrl = $rootScope.portalUrl;\n            // }, \n\n            link: function($scope, $element, $attrs, ctrl, transcludeFn) {\n\n                $scope.showHomeLink = $scope.showHomeLink === 'true' || false;\n\n                $scope.portalUrl = Config.portalUrl;\n\n                AuthenticationService.getUserQ().then(function(user) {\n                    $scope.user = user;    \n                });\n                \n                $element.find('.transcluded').replaceWith(transcludeFn());\n            }            \n\n        };\n\n    }])\n\n\n    \n    /**\n     * Header Menu\n     *\n     * Monitors the current page URL and updates the header links \n     * to highlight whichever one is associated with the current page\n     *\n     * Usage: \n     *\n     *  <ul role=\"menu\" class=\"nav-menu\" gp-header-menu>\n     *      <li><a href=\"#/maps\">Maps</a></li>\n     *      <li><a href=\"#/galleries\">Galleries</a></li>\n     *      ...\n     *  </ul>\n     *\n     */\n    .directive('gpHeaderMenu', ['$location', function($location) {\n\n        function update($element) {\n            var path = $location.path();\n            if(path === '/' || path === '/#' || path === '/#/')\n                path = 'maps';\n            if(path[0] === '/') path = path.substring(1);\n\n            var menu = $element;\n            menu.find('li.active').removeClass('active');\n            menu.find('li > a[href=\"#/' + path + '\"]').parent().addClass('active');\n\n            menu.find('li > a').each(function(i,a) {\n                var $a = $(a), href = $a.attr('href');\n                if(!href) return;\n                href = href.replace('#/', '');\n                if(path.indexOf(href) === 0)\n                    $a.parent().addClass('active');\n            });\n        }\n\n        return {\n            scope: {},\n            restrict: \"A\",\n            controller: [\"$rootScope\", \"$scope\", \"$element\", function($rootScope, $scope, $element) {\n                // $scope.menuOpen = false;\n                // $scope.portalUrl = $rootScope.portalUrl;\n            }],\n            link: function($scope, $element) {\n\n                update($element);\n\n                $scope.$root.$on('$locationChangeSuccess', function() {\n                    update($element);\n                });\n\n            }\n        };\n    }]);\n\n})(jQuery, angular);\n\n(function(angular) {\n\n\n    \"use strict\";\n\n    angular.module('gp-common').directive('iframeOnload', function(){\n        return {\n            scope: {\n                callback: '&iframeOnload'\n            },\n            link: function(scope, element, attrs){\n                element.on('load', function(event){\n                    element.off('load');\n                    return scope.callback(event);\n                });\n            }\n        };\n    });\n\n}) (angular);\n(function(angular) {\n    \n    \"use strict\";\n\n\n    angular.module('gp-common')\n\n\n    //\n    .service('NotificationService', ['$rootScope', function($rootScope) {\n        var Service = function() {\n            this.items = [];\n        };\n        Service.prototype = {\n            getItems: function() { return this.items; },\n            /**\n             * @param item object\n             * @return function to cancel the notification\n             */\n            addItem: function(item) { \n                this.items.push(item); \n                $rootScope.$broadcast('gp:notifications:new', item);\n\n                var fn = function(item) { this.removeItem(item); };\n                return fn.bind(this, item);\n            },\n            removeItem: function(item) {\n                var index = this.items.indexOf(item);\n                if(index >= 0)\n                    return this.items.splice(index, 1);\n                return null;\n            },\n            error: function(label, msg, dismiss) { \n                return this.addItem({ type: 'error', label: label, message: msg, canDismiss: dismiss });\n            },\n            success: function(label, msg, dismiss) { \n                return this.addItem({ type: 'success', label: label, message: msg, canDismiss: dismiss });\n            },\n            info: function(label, msg, dismiss) { \n                return this.addItem({ type: 'info', label: label, message: msg, canDismiss: dismiss });\n            }\n        };\n        return new Service();\n    }])\n\n\n    // Usage: <gp-notifications />\n    .directive('gpNotifications', ['$timeout', 'NotificationService', function($timeout, NotificationService) {\n        return {\n            scope: {\n                expiration: '@'\n            },\n            template: [\n                '<div class=\"notifications ng-hide\" ng-show=\"items.length\">',\n                '  <div class=\"notification\" ng-repeat=\"item in items\"',\n                '    ng-class=\"{\\'notification--success\\':item.type===\\'success\\', \\'notification--error\\':item.type===\\'error\\', \\'notification--info\\':item.type===\\'info\\'}\">',\n                '    <h5 class=\"notification__title\">',\n                '        <span class=\"pull-right glyphicon\" ',\n                '            ng-class=\"{\\'glyphicon-ok-sign\\':item.type===\\'success\\',\\'glyphicon-exclamation-sign\\':item.type===\\'error\\',\\'glyphicon-info-sign\\':item.type===\\'info\\'}\">',\n                '        </span>',\n                '        {{item.label}}',\n                '    </h5>',\n                '    <p class=\"notification__content\" ng-bind-html=\"item.message\"></p>',\n                '    <div class=\"notification__actions\" ng-if=\"item.canDismiss\">',\n                '        <button type=\"button\" class=\"btn btn-link\" ng-click=\"dismiss(item)\">dismiss</button>',\n                '    </div>',\n                '  </div>',\n                '</div>'\n            ].join(' '),\n\n            link: function($scope, $element, $attrs) {\n\n                $scope.expiration = ($scope.expiration || 2000)*1;\n\n                $scope.items = [];\n\n\n                function update() {\n                    $scope.items = NotificationService.getItems();\n\n                    //if updated before timer expired, reset timer\n                    if($scope.timer) {\n                        $timeout.cancel($scope.timer);\n                        $scope.timer = null;\n                    }\n\n                    //set timer to kill earliest item after time\n                    $scope.timer = $timeout(function() {\n                        $scope.timer = null;\n                        //will ultimately call update() and thus trigger timeout again\n                        $scope.removeOldest();\n                    }, $scope.expiration);\n                }\n                update();\n\n                $scope.removeOldest = function() {\n                    //find oldest that can be removed\n                    var oldest = $scope.items.find(function(item) {return item.canDismiss;});\n                    if(oldest)\n                        NotificationService.removeItem(oldest);\n                };\n\n                $scope.dismiss = function(item) {\n                    //remove item using service\n                    NotificationService.removeItem(item);\n                };\n\n                $scope.$watchCollection(function() {\n                    return NotificationService.getItems();\n                }, update);\n\n                // $scope.$on('gp:notifications:new', function(event, item) { update(); });\n\n            }\n        };\n    }]);\n\n\n})(angular);\n(function(jQuery, angular) {\n    \n    \"use strict\";\n\n    angular.module('gp-common').directive('gp-Pagination', function() {\n\n\n        Controller.$inject = [\"$scope\", \"$element\"];\n        function Controller($scope, $element) {\n\n            $scope.previous = function() { \n                $scope.start = Math.max(0, $scope.start*1 - $scope.pageSize*1);\n                $scope.$emit('pagination:change', $scope.start, $scope.pageSize);\n            };\n\n            $scope.next = function() {\n                $scope.start = Math.min($scope.total, $scope.start*1 + $scope.pageSize*1);\n                $scope.$emit('pagination:change', $scope.start, $scope.pageSize);\n            };\n\n            $scope.setPage = function(arg) {\n                var page = arg*1;\n                $scope.start = (page-1) * ($scope.pageSize*1);\n                $scope.$emit('pagination:change', $scope.start, $scope.pageSize);\n            };\n\n            $scope.setPageSize = function(size) {\n\n                $scope.pageSize = size*1;\n                //move start cursor to beginning of new current page based on updated pagesize\n                var currentPage = Math.floor($scope.start / $scope.pageSize) + 1;\n                $scope.setPage(currentPage);\n            };\n\n            $scope.hasPrevious = function() {\n                return $scope.start > 0;\n            };\n\n            $scope.hasNext = function() {\n                return ($scope.start+$scope.pageSize) < $scope.total;\n            };\n\n\n            function update() {\n            \n                var ostart = $scope.start*1;\n                var osize = $scope.pageSize*1;\n                \n                //calculate # of pages needed\n                var pages = [];\n                var maxPagination = 5;\n                var maxPaginationMidPoint = ((maxPagination % 2) !== 0) ? Math.ceil(maxPagination / 2) : maxPagination / 2;\n\n                if($scope.total > 0) {\n                    \n                    var numPages = Math.ceil($scope.total / osize);\n                    var currentPage = Math.floor(ostart / osize);\n\n                    var s = 0;\n                    if(currentPage > Math.floor(maxPagination/2)) {     //  1 2 '3' 4 5\n                        s = currentPage-Math.floor(maxPagination/2);    //  1 2 3 '4' 5\n                                                                        //  ...\n\n                    } else {                                            //  '1' 2 3 4 5\n                        s = 0;                                          //  1 '2' 3 4 5\n                                                                        //  ...\n                    }\n\n                    var e = Math.min(s+maxPagination, numPages);\n\n                    //ensure at least <maxPagination> # of page links are shown\n                    // even if near the end of the results\n                    while(s>0 && ((e-s) < maxPagination))\n                        s-=1;\n\n                    for(var i=s; i<e; ++i) {\n                        var pageStart = (i*osize)+1;\n                        var pageEnd = Math.min(pageStart + osize - 1, $scope.total);\n                        pages.push({\n                            label: (i+1)+\"\",\n                            tooltip: \"Results \" + pageStart + \"-\" + pageEnd\n                        });\n                        if(i == currentPage)\n                            pages[pages.length-1].active = true;\n                    }\n\n                }\n\n                $scope.pages = pages;\n\n            }\n\n            update();\n\n            $scope.$watch('start',      update);\n            $scope.$watch('pageSize',   update);\n            $scope.$watch('total',      update);\n\n        }\n\n\n\n        return {\n\n            scope: {\n                start: '=',\n                pageSize: '=',\n                total: '='\n            },\n            replace: true,\n            template: [\n                '<div>',\n                '  <div class=\"visible-xs row\">',\n                '    <div class=\"col-xs-6\">{{total}} results</div>',\n                '    <div class=\"col-xs-6\">',\n                '      <select class=\"form-control\" ng-model=\"pageSize\">',\n                '        <option value=\"5\">5 per page</option>',\n                '        <option value=\"10\">10 per page</option>',\n                '        <option value=\"25\">25 per page</option>',\n                '        <option value=\"50\">50 per page</option>',\n                '      </select>',\n                '    </div>',\n                '  </div>',\n                '  <ul class=\"pagination\">',\n                '    <li class=\"info hidden-xs\">',\n                '      <a>{{total}} results</a>',\n                '    </li>',\n                '    <li class=\"pagination-control hidden-xs\" ng-if=\"total>0\">',\n                '      <span dropdown>',\n                '        <a href=\"\" dropdown-toggle title=\"Change the number of results returned\">',\n                '          {{pageSize}} per page <span class=\"caret\"></span>',\n                '        </a>',\n                '        <ul class=\"dropdown-menu\" role=\"menu\">',\n                '          <li><a href=\"\" ng-click=\"setPageSize(5)\">5 per page</a></li>',\n                '          <li><a href=\"\" ng-click=\"setPageSize(10)\">10 per page</a></li>',\n                '          <li><a href=\"\" ng-click=\"setPageSize(25)\">25 per page</a></li>',\n                '          <li><a href=\"\" ng-click=\"setPageSize(50)\">50 per page</a></li>',\n                '        </ul>',\n                '      </span>',\n                '    </li>',\n                '    <li class=\"separator hidden-xs\"></li>',\n                '    <li ng-if=\"hasPrevious()\">',\n                '      <a ng-click=\"previous()\">',\n                '        <span class=\"glyphicon glyphicon-backward\"></span>',\n                '      </a>',\n                '    </li>',\n                '    <li ng-repeat=\"page in pages\" ng-class=\"{active:page.active,disabled:page.disabled}\">',\n                '      <a ng-click=\"setPage(page.label)\" title=\"{{::page.tooltip}}\">{{::page.label}}</a>',\n                '    </li>',\n                '    <li ng-if=\"hasNext()\">',\n                '      <a ng-click=\"next()\">',\n                '        <span class=\"glyphicon glyphicon-forward\"></span>',\n                '      </a>',\n                '    </li>',\n                '  </ul>',\n                '</div>'\n            ].join(' '),\n\n            controller: Controller\n\n        };\n\n    });\n\n\n})(jQuery, angular);\n(function(jQuery, angular) {\n\n    \"use strict\";\n\n\n    angular.module('gp-common')\n\n\n    //helper to determine size of window for responsive breakpoint purposes\n    .provider('responsiveHelper', [\"$windowProvider\", function ($windowProvider) {\n        \n        var $window  = $windowProvider.$get();\n\n        function Helper($window) {\n            this.window = $window;\n        }\n        Helper.prototype = {\n            getWidth: function() { return $window.innerWidth || $window.outerWidth; },\n            isXS: function () { var width = this.getWidth(); return width < 768; },\n            isSM: function () { var width = this.getWidth(); return width >= 768 && width < 992; },\n            isMD: function () { var width = this.getWidth(); return width >= 992 && width < 1200; },\n            isLG: function () { var width = this.getWidth(); return width >= 1200; }\n        };\n\n        var helper = new Helper($window);\n\n        this.$get = function() {\n            return helper;\n        };\n    }])\n\n\n    //directive which appends appropriate responsive breakpoint classNames to the element\n    // on which it's set\n    .directive('gpResponsive', ['$window', 'responsiveHelper', function($window, responsiveHelper) {\n\n        return {\n            restrict: \"A\",\n            link: function($scope, $element, $attrs) {\n\n                function update(el, helper) {\n                    if(helper.isXS())\n                        el.addClass('gp-responsive-xs');\n                    else\n                        el.removeClass('gp-responsive-xs');\n\n                    if(helper.isSM())\n                        el.addClass('gp-responsive-sm');\n                    else \n                        el.removeClass('gp-responsive-sm');\n\n                    if(helper.isMD())\n                        el.addClass('gp-responsive-md');\n                    else \n                        el.removeClass('gp-responsive-md');\n\n                    if(helper.isLG())\n                        el.addClass('gp-responsive-lg');\n                    else \n                        el.removeClass('gp-responsive-lg');\n                }\n\n                update($element, responsiveHelper);\n\n                var resizeFn = function() {\n                    update($element, responsiveHelper);\n                };\n\n                var w = angular.element($window);\n                var listener = w.on('resize', resizeFn);\n\n                $scope.$on('$destroy', function() {\n                    w.off('resize', resizeFn);\n                });\n\n            }\n        };\n\n    }])\n\n\n    .directive('gpResize', [\"$window\", \"$timeout\", function($window, $timeout) {\n        return function($scope, $element, $attr) {\n\n            var resizeFn = function() {\n                var hh = jQuery('header')[0].offsetHeight;\n                // var fh = jQuery('footer')[0].offsetHeight;\n                // console.log('hh & fh', hh, fh);                    \n\n                var tp = hh + 2;\n                // var bt = fh + 2;\n                // console.log('tp & bt', tp, bt);                \n                \n                var changes = {\n                    // bottom: bt + 'px',\n                    top: tp + 'px',\n                };\n                $element.css(changes);\n                $scope.$apply();\n            };\n\n            var w = angular.element($window);\n            w.on('resize', resizeFn);\n\n            $timeout(resizeFn, 200);\n\n            $scope.$on('$destroy', function() {\n                w.off('resize', resizeFn);\n            });\n\n        };\n    }]);\n\n})(jQuery, angular);\n(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\")\n\n    /**\n     * Custom filter to make label values visually helpful by \n     * replacing bad characters with spaces or meaningful equivalents\n     */\n    .filter('fixLabel', function() {\n        return function(input) {\n            input = input || '';\n            return input.replace(/_/g,' ');\n        };\n    })\n\n    .filter('pluralize', function() {\n        return function(text) {\n            if(!text || !text.length) return \"\";\n            if(text.endsWith('ss')) return text + 'es'; //classes, etc\n            if(text.endsWith('s')) return text;         //already plural\n            return text + 's';\n            //TODO support irregular words like \"foot\" -> \"feet\"\n            // and words that need duplicate letters: \"quiz\" -> \"quizzes\"\n        };\n    })\n\n    .filter('facets', function() {\n\n        return function(arr,facetName) {\n            if(!facetName) return arr;\n            if(!arr || !arr.length) return [];\n            return arr.filter(function(f){return f.toLowerCase().startsWith(facetName + \":\");})\n                .map(function(f) {return f.substring(f.indexOf(':')+1, f.length);});\n        };\n\n    })\n\n    .filter('joinBy', function () {\n        return function (input,delimiter,emptyValue) {\n            if(input.length) return input.join(delimiter || ', ');\n            else             return emptyValue || '';\n        };\n    });\n\n})(jQuery, angular);","(function(jQuery, angular) {\n\n    \"use strict\";\n\n\n    angular.module('gp-common')\n\n\n    //helper to determine size of window for responsive breakpoint purposes\n    .provider('responsiveHelper', [\"$windowProvider\", function ($windowProvider) {\n        \n        var $window  = $windowProvider.$get();\n\n        function Helper($window) {\n            this.window = $window;\n        }\n        Helper.prototype = {\n            getWidth: function() { return $window.innerWidth || $window.outerWidth; },\n            isXS: function () { var width = this.getWidth(); return width < 768; },\n            isSM: function () { var width = this.getWidth(); return width >= 768 && width < 992; },\n            isMD: function () { var width = this.getWidth(); return width >= 992 && width < 1200; },\n            isLG: function () { var width = this.getWidth(); return width >= 1200; }\n        };\n\n        var helper = new Helper($window);\n\n        this.$get = function() {\n            return helper;\n        };\n    }])\n\n\n    //directive which appends appropriate responsive breakpoint classNames to the element\n    // on which it's set\n    .directive('gpResponsive', ['$window', 'responsiveHelper', function($window, responsiveHelper) {\n\n        return {\n            restrict: \"A\",\n            link: function($scope, $element, $attrs) {\n\n                function update(el, helper) {\n                    if(helper.isXS())\n                        el.addClass('gp-responsive-xs');\n                    else\n                        el.removeClass('gp-responsive-xs');\n\n                    if(helper.isSM())\n                        el.addClass('gp-responsive-sm');\n                    else \n                        el.removeClass('gp-responsive-sm');\n\n                    if(helper.isMD())\n                        el.addClass('gp-responsive-md');\n                    else \n                        el.removeClass('gp-responsive-md');\n\n                    if(helper.isLG())\n                        el.addClass('gp-responsive-lg');\n                    else \n                        el.removeClass('gp-responsive-lg');\n                }\n\n                update($element, responsiveHelper);\n\n                var resizeFn = function() {\n                    update($element, responsiveHelper);\n                };\n\n                var w = angular.element($window);\n                var listener = w.on('resize', resizeFn);\n\n                $scope.$on('$destroy', function() {\n                    w.off('resize', resizeFn);\n                });\n\n            }\n        };\n\n    }])\n\n\n    .directive('gpResize', function($window, $timeout) {\n        return function($scope, $element, $attr) {\n\n            var resizeFn = function() {\n                var hh = jQuery('header')[0].offsetHeight;\n                // var fh = jQuery('footer')[0].offsetHeight;\n                // console.log('hh & fh', hh, fh);                    \n\n                var tp = hh + 2;\n                // var bt = fh + 2;\n                // console.log('tp & bt', tp, bt);                \n                \n                var changes = {\n                    // bottom: bt + 'px',\n                    top: tp + 'px',\n                };\n                $element.css(changes);\n                $scope.$apply();\n            };\n\n            var w = angular.element($window);\n            w.on('resize', resizeFn);\n\n            $timeout(resizeFn, 200);\n\n            $scope.$on('$destroy', function() {\n                w.off('resize', resizeFn);\n            });\n\n        };\n    });\n\n})(jQuery, angular);","(function(jQuery, angular) {\n    \n    \"use strict\"; \n    \n    angular.module(\"gp-common\")\n\n    /**\n     * Custom filter to make label values visually helpful by \n     * replacing bad characters with spaces or meaningful equivalents\n     */\n    .filter('fixLabel', function() {\n        return function(input) {\n            input = input || '';\n            return input.replace(/_/g,' ');\n        };\n    })\n\n    .filter('pluralize', function() {\n        return function(text) {\n            if(!text || !text.length) return \"\";\n            if(text.endsWith('ss')) return text + 'es'; //classes, etc\n            if(text.endsWith('s')) return text;         //already plural\n            return text + 's';\n            //TODO support irregular words like \"foot\" -> \"feet\"\n            // and words that need duplicate letters: \"quiz\" -> \"quizzes\"\n        };\n    })\n\n    .filter('facets', function() {\n\n        return function(arr,facetName) {\n            if(!facetName) return arr;\n            if(!arr || !arr.length) return [];\n            return arr.filter(function(f){return f.toLowerCase().startsWith(facetName + \":\");})\n                .map(function(f) {return f.substring(f.indexOf(':')+1, f.length);});\n        };\n\n    })\n\n    .filter('joinBy', function () {\n        return function (input,delimiter,emptyValue) {\n            if(input.length) return input.join(delimiter || ', ');\n            else             return emptyValue || '';\n        };\n    });\n\n})(jQuery, angular);"],"sourceRoot":"/source/"}