<div class="o-search-results">

    <div class="o-search-results__toolbar">

        <div class="flex-1 u-mg-left--md">
            <div class="btn-group">
                <button type="button" class="btn btn-light dropdown-toggle"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span *ngIf="!selected || !selected.length" class="far fa-square"></span>
                    <span *ngIf="selected?.length" class="fas fa-check-square"></span>
                    <span class="caret"></span>
                </button>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item" (click)="selectAllInPage()">
                        Select all on this page
                    </a>
                    <a class="dropdown-item"  (click)="deselectAll()">
                        Deselect all
                    </a>
                </div>
            </div>
        </div>

        <mat-paginator
            [length]="results?.totalResults || 0"
            [pageSize]="query?.pageSize || 10"
            [pageSizeOptions]="[10, 25, 50, 100]"
            (page)="onPagingEvent($event)">
        </mat-paginator>

        <mat-form-field>
            <strong matPrefix><span class="fas fa-sort-amount-down"></span> Sort by&nbsp;</strong>
            <mat-select [(ngModel)]="sortValue" (selectionChange)="onSortChange($event)">
                <mat-option *ngFor="let option of sortOptions" value="{{option.value}}">{{option.label}}</mat-option>
            </mat-select>
        </mat-form-field>

    </div>

    <!-- Loading indicator -->
    <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>

    <!-- error displayed to user if present -->
    <div *ngIf="error" class="m-message--error">
        <div class="a-heading">
            <span class="fas fa-exclamation-circle"></span>
            An Error Occurred
        </div>
        <div>{{error.message}}</div>
        <div class="d-flex flex-justify-end">
            <button type="button" class="btn btn-link" (click)="error=null">DISMISS</button>
        </div>
    </div>

    <!-- Search results display -->
    <div class="m-results" *ngIf="results">

        <div *ngIf="!results.totalResults" class="m-message--warning">
            <em>No results found matching the specified criteria.</em>
        </div>

        <div *ngFor="let result of results.results">
            <gp-search-results-item
                [item]="result"
                [adapter]="adapter"
                [showDesc]="showDesc"
                [isSelected]="isSelected(result)"
                [hasPrimaryAction]="hasPrimaryAction"
                [headingTemplate]="itemHeadingTemplate"
                [subHeadingTemplate]="itemSubHeadingTemplate"
                [thumbnailTemplate]="itemThumbnailTemplate"
                [contentTemplate]="itemContentTemplate"
                [footerTemplate]="itemFooterTemplate"
                [statsTemplate]="itemStatsTemplate"
                [actionsTemplate]="itemActionsTemplate"
                [primaryActionTemplate]="itemPrimaryActionTemplate"
                (onEvent)="onItemEvent($event)">
            </gp-search-results-item>
        </div>
    </div>

</div>
